# 『2進数による数値の表現』

（最終更新： 2023-01-09）


## 目次

1. [数の正負](#数の正負)
	1. [符号ビット](#符号ビット)
	1. [補数表現](#補数表現)
	1. [2の補数](#2の補数)
	1. [補数の減算](#補数の減算)
1. [小数](#小数)
	1. [固定小数点数](#固定小数点数)


## 数の正負

### 符号ビット

**符号ビット**は2進数で表された数において数の正負を意味するビット。一般的には最上位ビットを符号ビットとして、符号ビットが0ならば正の数、1ならば負の数として扱う。

### 補数表現

**補数**とはn進数のある数に対して足し合わせることで、ちょうどnのべき乗（あるいはnのべき乗から1を引いたもの）になる自然数のうち最小のもののこと。言い換えると、ある数に足し合わせることで桁が1つ上がる数のこと。例として、 $560_{10}$ に対する補数は $440_{10}$ （ $560_{10} + 440_{10} = 1000_{10}$ となるため）となる。

### 2の補数

**2の補数**は2進数において負の数を表現する際に用いられる。これは、符号ビットを含めたすべてのビットを反転したもの（**1の補数**）に1を加算することで求めることができる。

2の補数を使用するのは、1の補数を用いるよりも表現できる数の範囲が1広いためである。nビットの2進数が表現できる数の範囲は、1の補数を用いた場合は $-(2^{n-1} - 1) \sim (2^{n-1} - 1)$となり、2の補数を用いた場合は $-2^{n-1} \sim (2^{n-1} - 1)$ となる。これは1の補数では0が正と負の2種類存在してしまうためである。

### 補数の減算

補数を用いた場合、減算を加算により表現することができる。例えば次のような10進数の減算を考える。

```math
900_{10} - 350_{10} = 550_{10}
```

$350_{10}$ の補数は $650_{10}$ なので、 $900_{10}$ に補数を加算してみる。

```math
900_{10} + 650_{10} = 1550_{10}
```

この結果から最上位の桁を取り除くと、減算と同じ結果が得られることがわかる。このような性質は2進数であっても同様に成り立つ。

前の例を2進数で考える。それぞれの数を2進数12桁で表すと、 $900_{10} = 001110000100_2, 350_{10} = 000101011110_2$ となる。 $350_{10} = 000101011110_2$ の各ビットを反転すると $111010100001_2$ （1の補数）となり、これに1を加えると $111010100010_2$ （2の補数）となる。 $900_{10} = 001110000100_2$ に $350_{10} = 000101011110_2$ の2の補数を加えると次のようになる。

```math
\begin{array}{rr}
  &  001110000100 \\
+ &  111010100010 \\
\hline
  & 1001000100110
\end{array}
```

得られた結果の最上位ビットを無視した $001000100110_2$ は10進数の $550_{10}$ であるから正しく減算できていることがわかる。


## 小数

### 固定小数点数

**固定小数点数**はコンピュータ上で小数を表現する方法のひとつで、小数点の位置を固定して数を扱う。あらかじめ小数点の位置を決めておくので扱いやすい一方で、表現できる数値の範囲が限定されてしまう。浮動小数点数よりも高速で処理できるという利点がある。

### 浮動小数点数

**浮動小数点数**はコンピュータ上で小数を表現する方法のひとつで、数値を桁の並びを表す仮数部と小数点の位置を表す指数部に分割して表現する方式。限られたバイト数の中で効率よく小数を表現するための方法で、固定小数点数に比べて同じビット数でも広い範囲の数を表すことができる。

浮動小数点数では数を $数値 = (符号部) 仮数部 \times 基数部^{指数部}$ の形式で考える。

- **基数部**は2進数であれば必ず2となる（n進数ではnとなる）
- **符号部**は数の正負を表す
- **指数部**には基数に対する指数部分を2進数で表記したものを格納する
- **仮数部**には正規化した小数点数以下の値を格納する

小数点数の演算では精度が重要になるため、仮数部で有効桁数を確保して指数部で大きさを表現する。仮数部の最上位ビットが0にならないように仮数部と指数部を調整することで有効桁数を最大にすることを、**正規化**という。

[IEEE754](https://ja.wikipedia.org/wiki/IEEE_754)によって規定された浮動小数点数には単精度形式と倍精度形式があり、**単精度形式**では32ビット（符号部1ビット、指数部8ビット、仮数部23ビット）、**倍精度形式**では64ビット（符号部1ビット、指数部11ビット、仮数部52ビット）で表現する。
