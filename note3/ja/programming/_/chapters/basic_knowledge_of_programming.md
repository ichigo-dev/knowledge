# 『プログラミングの基礎知識』

（最終更新： 2023-01-22）


## 目次

1. [プログラミング](#プログラミング)
	1. [ソースコード](#ソースコード)
1. [プログラムのメモリ管理](#プログラムのメモリ管理)
	1. [ヒープ領域の確保と解放](#ヒープ領域の確保と解放)
	1. [メモリリーク](#メモリリーク)
	1. [ダブルフリー](#ダブルフリー)
	1. [ダングリングポインタ](#ダングリングポインタ)
	1. [ガベージコレクション](#ガベージコレクション)
1. [機械語](#機械語)
	1. [オペコード](#オペコード)
1. [低水準言語](#低水準言語)
	1. [アセンブリ言語](#アセンブリ言語)
1. [高水準言語](#高水準言語)


## プログラミング

**プログラミング**は、コンピュータが処理を行う手順や内容を示したもの。プログラムを書く人のことを**プログラマ**、プログラムを実装することを**プログラミング**という。プログラムを記述する際には様々な**プログラミング言語**が用いられる。

プログラマには、世の中の様々なタスクや問題をプログラミングによって解決するという役割がある。毎日の単純作業のくり返しを減らしたり（表計算ソフトなど）、ミスが許されない場面で正確に動作することが保証されたシステムを利用したり（銀行のシステムや信号機など）、さらに人間には難しいタスクの解決を行ったり（AIによる異常検知など）と、プログラミングスキルの応用範囲は多岐にわたる。

### ソースコード

**ソースコード**（**ソース**、**コード**）は、プログラミング言語で書かれたプログラムのこと。


## プログラムのメモリ管理

プログラム中で用いられる変数や関数は、プログラムに割り当てられたメモリ領域内に格納される。グローバル変数は静的領域に、関数内で使用されるローカル変数はスタック領域に、配列やオブジェクトといった可変長のデータの実体はヒープ領域に格納される。

### ヒープ領域の確保と解放

スタック領域に格納された変数は、関数の実行が完了すると自動的に解放されるが、ヒープ領域に格納したデータは別の手段により解放する必要がある。ヒープ領域のデータを解放する手段はプログラミング言語によって異なる。C言語やC++では、プログラマが明示的にソースコード中でヒープ領域の確保・解放を宣言する必要があり、そのほかのほとんどのプログラミング言語ではガベージコレクションを用いる。また、Rust言語ではガベージコレクションを用いずにメモリの解放に関する一定のルールを設けることで、プログラマがメモリ管理に関する責任を負わなくてよいようにしている。

### メモリリーク

**メモリリーク**は、プログラムが使い終わったメモリの解放を忘れることで、使用できなくなるメモリ領域ができてしまうこと。メモリ管理に関するバグの一種。

### ダブルフリー

**ダブルフリー**（メモリの二重解放）は、既に解放されたヒープ領域のメモリを、再度解放しようとすること。メモリ管理に関するバグの一種。

### ダングリングポインタ

**ダングリングポインタ**は、ヒープ領域に格納されたデータのアドレスを格納したスタック領域のポインタにおいて、既に解放されたヒープ領域を指し示すポインタのこと。メモリ管理に関するバグの一種。

### ガベージコレクション

**ガベージコレクション**（**GC**）は、ヒープ領域のデータを定期的に確認し、不要になったデータを解放するプログラム。ガベージコレクションを用いる場合、ソースコード中でヒープ領域の解放を明示する必要はない。

メモリリークやダブルフリー、ダングリングポインタといったメモリに関するバグを回避するこおとができる。ただし、プログラマ自身がメモリ管理をするプログラミング言語に比べてパフォーマンスは低く、プログラムの実行に関係のないソフトウェア（ガベージコレクション）を動作させる必要があるというデメリットがある。また、ガベージコレクションが動くタイミングでソフトウェアの動作が遅くなる可能性がある。


## 機械語

**機械語**（**マシン語**）は、コンピュータが直接解釈できるプログラムで、2進数の羅列からなる。機械語は次の例のようなプログラムとなっており、人間が記述したり内容を理解するのには適していない。そのため、人間が理解しやすいようにプログラミング言語を用いてソースコードを作成し、専用のプログラムによってソースコードを機械語の変換するのが一般的。プロセッサごとに対応する機械語も異なるので注意が必要。

```
0111 1111 0100 0101 0100 1100 0100 0101 0000 0010 0000 0001 0000 0001 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000
0000 0010 0000 0000 0011 1110 0000 0000 0000 0001 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0100 0100 0000 0000 0000 0000 0000 0000 0000 0000 0000

...(以下略)
```

### オペコード

**オペコード**は、プロセッサに与える機械語の命令の識別番号。


## 低水準言語

**低水準言語**（**低級言語**）は、プログラミング言語の中でも機械語に近い言語のこと。低水準言語はコンピュータン資源を効率よく使うことができ、高速に動作するという利点があるが、プログラムが長くなりやすく柔軟性が乏しいことから、組込みやファームウェアの分野などの性能を最大限引き出すなどの目的がない限りは高水準言語が用いられることがほとんどとなる。

### アセンブリ言語

**アセンブリ言語**は、ニーモニックという命令を組み合わせて記述するプログラミング言語。**ニーモニック**は、機械語の命令に1対1で対応する、英単語や記号で表記した命令のこと。プロセッサごとに対応するアセンブリ言語も異なるので注意が必要。

アセンブリ言語を機械語に変換する操作を**アセンブル**といい、アセンブルを行うソフトウェアを**アセンブラ**という。

アセンブリ言語の一種である**Netwide Assembler**を用いて `Hello, world` を出力するプログラムを以下に示す。

```asm
section .data
    msg db      "Hello, world"      ; データセクションで文字列を宣言

section .text
    global _start                   ; プログラムのエントリポイントとして_startを呼び出し

_start:
    mov     rax, 1                  ; sys_writeシステムコール(1)をraxレジスタにセット
    mov     rdi, 1                  ; 第一引数（ファイルディスクリプタ、1は標準出力）をrdiレジスタにセット
    mov     rsi, msg                ; 第二引数（出力したい文字列）をrsiレジスタにセット
    mov     rdx, 12                 ; 第三引数（データのサイズ）をrdxレジスタにセット
    syscall                         ; システムコールを発行
    mov     rax, 60                 ; exitシステムコール(60)をraxレジスタにセット
    mov     rdi, 0                  ; 第一引数（終了コード、0は正常終了）をrdiレジスタにセット
    syscall                         ; システムコールを発行
```


## 高水準言語

**高水準言語**（**高級言語**）は、低水準言語に比べて抽象度が高く、人間にとってわかりやすいプログラミング言語のこと。機械語を意識することなく記述することができ、プロセッサに依存しないプログラム（機械語への変換の段階で様々なプロセッサに対応させることができるため）を作ることができる。

代表的な高水準言語としては、C系言語（C, C#, C++等）やJava、Python、PHP、JavaScriptなどがある。それぞれの言語には得手不得手があり、C言語であれば処理速度が高速であることからCPUやサーバなどの低レイヤの実装に向いており、JavaScriptであれば一般的なWebブラウザで動作することからWebフロントエンド向けとなっている。
