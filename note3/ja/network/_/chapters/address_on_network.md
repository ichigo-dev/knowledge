# 『ネットワーク上のアドレス』

（最終更新： 2023-02-07）


## 目次

1. [MACアドレス](#macアドレス)
1. [IPアドレス](#ipアドレス)
	1. [ネットワーク部](#ネットワーク部)
	1. [ホスト部](#ホスト部)
	1. [ネットワークアドレス](#ネットワークアドレス)
	1. [ブロードキャストアドレス](#ブロードキャストアドレス)
	1. [クラス](#クラス)
	1. [サブネットワーク](#サブネットワーク)
	1. [サブネットマスク](#サブネットマスク)
	1. [CIDR](#cidr)
	1. [VLSM](#vlsm)
	1. [グローバルIPアドレス](#グローバルipアドレス)
	1. [プライベートIPアドレス](#プライベートipアドレス)
	1. [NAT](#nat)
	1. [NAPT](#napt)
	1. [WHOIS](#whois)
	1. [ループバックアドレス](#ループバックアドレス)
	1. [IPv4](#ipv4)
	1. [IPv6](#ipv6)
1. [ポート番号](#ポート番号)
	1. [ウェルノウンポート番号](#ウェルノウンポート番号)
	1. [エフェメラルポート番号](#エフェメラルポート番号)


## MACアドレス

**MACアドレス**(Media Access Control)は、データリンクに接続しているノードを識別する際に利用される識別子で、48ビットの長さを持つ。ネットワーク機器が出荷される時点で割り当てられた固有のアドレスとなっている。

一般的なNICでは、MACアドレスはROMに焼き込まれており、同じMACアドレスを持つNICは世界中にひとつしかない。MACアドレスには、NICの製造メーカを特定する**ベンダ識別子**と、メーカが決定するビット列である**製造番号**が含まれている。ベンダ識別子はIEEEが割り当てる番号で、従来は**OUI**(Organizationally Unique Identifier)と呼ばれていたが、**MA-L**(MAC Address Block Large)に改称された。


## IPアドレス

**IPアドレス**は、個々のホストを特定するための識別子で、32ビットで表される。人間がわかりやすいように8ビットずつに区切り境目にドットを入れた**ドット・デシマル・ノーテーション**や、10進数に置き換えた記法がよく用いられる。

### ネットワーク部

**ネットワーク部**は、IPアドレス中でデータリンクのセグメントごとに割り当てられた固有の値。世界中のネットワークからどのネットワークセグメントであるかを特定するために用いられる。

### ホスト部

**ホスト部**は、データリンクが属するセグメント内で、各機器に割り当てられた固有の値。セグメント内のホストを特定するために用いられる。

### ネットワークアドレス

**ネットワークアドレス**は、IPアドレスのホスト部をすべて0にしたアドレスで、そのセグメントのネットワーク自体を表す。

### ブロードキャストアドレス

**ブロードキャストアドレス**は、ホスト部をすべて1とし、そのネットワークに属しているすべてのホストにパケットを送信するためのアドレス。そのコンピュータ自身が属しているセグメント内へのブロードキャストを**ローカルブロードキャスト**、異なるIPネットワークへのブロードキャストを**ダイレクトブロードキャスト**という。

### クラス

**クラス**は、IPアドレスのネットワーク部とホスト部を識別するために用いられていた概念。IPアドレスをクラスA〜クラスDの4つのグループに分類し、IPアドレスの先頭8ビットによってどのクラスに属するかを判断する。同一ネットワーク内の接続可能台数はホスト部が表せる範囲となるので、例えばクラスCのネットワークでは $2^8 - 2 = 254$ 台となる。

クラス単位でのIPアドレスの割当は、利用されないアドレスが発生しやすく、限られたアドレス空間を有効に利用できないため、CIDR方式を用いるのが一般的。

### サブネットワーク

**サブネットワーク**は、クラスで区切られたネットワーク空間をさらに細かいネットワークに分割したもの。クラスを用いた方法よりも柔軟に接続可能なホストの台数を制御できる。

### サブネットマスク

**サブネットマスク**は、IPアドレスのネットワーク部とホスト部を識別するために用いるアドレス。ネットワーク部がすべて1、ホスト部がすべて0のアドレスとなっており、IPアドレスに対してマスクする（論理積を取る）ことでそれぞれの部分を抽出することができる。

先頭から何ビットがネットワーク部であるか（サブネットマスクが1であるビット数）は、 `172.10.0.1/32` のようにIPアドレスの末尾に付けて表現される。

### CIDR

**CIDR**(Classless InterDomain Routing)は、サブネットマスクによってネットワーク部の長さを識別する方式。これにより、ネットワークアドレスの長さを固定せずに分割して扱えるため、各組織に余分なIPアドレス空間を割り当てることを防げる。

### VLSM

**VLSM**(Variable length Subnet Mask)は、同一ネットワーク内で様々な長さのサブネットマスクを使用する技術。

### グローバルIPアドレス

**グローバルIPアドレス**は、インターネットに接続された機器に割り当てられているIPアドレス。グローバルIPアドレスの割り当ては、**ICANN**(Internet Corporation for Assigned Names and Numbers)で一元管理されており、日本国内では**JPNIC**(Japan Network Information Center)がグローバルIPアドレスの割り当てを行っている。

### プライベートIPアドレス

**プライベートIPアドレス**は、インターネットに直接接続されない、組織内などで固有のIPアドレス。インターネットに接続する際は、インターネットとの接点となるルータや公開サーバにだけグローバルIPアドレスを割り当てて、プロキシサーバや、NATなどのネットワーク変換機能を用いるのが一般的。

### NAT

**NAT**(Network Address Translation)は、グローバルIPアドレスとプライベートIPアドレスを一対一で変換する機能。インターネットに同時に接続できる台数は、割り当てられているグローバルIPアドレスの個数までとなる。NAPTが非常に一般的となったため、単にNAPTのことをNATと呼ぶ場合もある。

### NAPT

**NAPT**（Network Address Port Translation、**IPマスカレード**）は、グローバルIPアドレス1つに対して複数のプライベートIPアドレスを対応させる機能。IPアドレスとポート番号の組み合わせにより通信を識別するため、1つのグローバルIPアドレスで複数の機器が同時にインターネットに接続できる。

### WHOIS

**WHOIS**は、IPアドレスを管理している組織や管理者の連絡先情報。インターネットの通信経路の途中で異常が発生している装置を突き止める目的などで設定する。

### ループバックアドレス

**ループバックアドレス**は、同じコンピュータ内部のプログラム間で通信したい場合などに利用される、その機器自身を表すアドレス。どの機器にも固定で `127.0.0.1` が割り当てられており、 `localhost` というホスト名がエイリアスとして利用される。


## ポート番号

**ポート番号**は、同一のコンピュータ内で通信を行っているプログラムを識別するときに利用される識別子。

### ウェルノウンポート番号

**ウェルノウンポート番号**(Well-known Port Number)は、一般的によく用いられるプログラムのポート番号のことで、 $0 \sim 1023$ の番号が割り当てられたもの。また、ウェルノウンポート番号以外にも、 $1024 \sim 49151$ は正式に登録されているポート番号となっている。

### エフェメラルポート番号

**エフェメラルポート番号**は、 $1024 \sim 655354$ のポート番号のことで、OSが動的に管理するポート番号である。サーバーはポート番号が決まっている必要があるが、サービスを受ける側のポート番号は必ずしも決まっている必要はなく、エフェメラルポート番号を自由に割り当てることができる。
