# 『トランスポート層』

（最終更新： 2023-02-08）


## 目次

1. [TCP](#tcp)
	1. [ストリーム](#ストリーム)
	1. [確認応答](#確認応答)
	1. [否定確認応答](#否定確認応答)
	1. [シーケンス番号](#シーケンス番号)
	1. [TCPのフレームフォーマット](#tcpのフレームフォーマット)
1. [UDP](#udp)
	1. [UDPのフレームフォーマット](#udpのフレームフォーマット)
1. [ソケット](#ソケット)
1. [コネクション](#コネクション)


## TCP

**TCP**(Transmission Control Protocol)はコネクション型で、信頼性のあるストリーム型のプロトコル。ネットワークの途中でパケットが喪失した場合の再送制御や、順序が入れ替わった場合の順序制御などを行う。

- 信頼性が必要な通信
- インターネットを介して大量のデータを転送する場合
- ビデオオンデマンドやライブ配信といった、即時性がそれほど必要ない動画や音声の再生（ストリーミング）

### ストリーム

**ストリーム**は、切れ目のないデータ構造のこと。

### 確認応答

**確認応答**(**ACK**)は、TCPにおいて、送信したデータが受信ホストに到達したときに、受信ホストが送信ホストに対してデータが到達したことを知らせること。

### 否定確認応答

**否定確認応答**(**NACK**)は、TCPにおいて、送信したデータが受信ホストに正しく伝わらなかった時に、受信ホストが送信ホストに対してそのことを知らせること。

### シーケンス番号

**シーケンス番号**は、TCPで送信されるパケットにつけられる通し番号。受信ホストは、送信ホストの再送処理などにより、重複したデータを受け取る可能性がある。シーケンス番号は、このような重複したパケットを識別して破棄するためにも利用される。

### タイムアウト

**タイムアウト**は、ある一定の時間が経過しても、受信ホストから確認応答が返ってこないこと。タイムアウトが発生した場合、送信ホストはデータが喪失したと判断して再送処理を行う。確認応答の到着を待つ時間を**再送タイムアウト時間**という。再送タイムアウト時間を決めるため、パケットを送信する度に通信のラウンドトリップタイムとジッタを計算する。

### TCPのフレームフォーマット


## UDP

**UDP**(User Datagram Protocol)はコネクションレス型で、信頼性のないプロトコル。高速性やリアルタイム性を重視する通信や同報通信を行いたい場合に利用する。

- 総パケット数が少ない通信（DNS、SNMPなど）
- 動画や音声などのマルチメディア通信（即時性が必要な通信）
- LANなどの特定のネットワークに限定したアプリケーションの通信
- 同報性が必要な通信（ブロードキャスト、マルチキャスト）

### UDPのフレームフォーマット


## ソケット

**ソケット**は、TCPやUDPを利用して通信を行うために広く使われているAPI。アプリケーションはソケットを利用して、通信相手のIPアドレスやポート番号の設定、データの送受信の要求を行う。


