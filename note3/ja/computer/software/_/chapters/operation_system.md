# 『オペレーティングシステム』

（最終更新： 2023-01-21）


## 目次

1. [オペレーティングシステム](#オペレーティングシステム)
1. [OSの種類](#osの種類)
	1. [Windows](#windows)
	1. [MacOS](#macos)
	1. [UNIX](#unix)
	1. [Linux](#linux)
1. [カーネル](#カーネル)
	1. [マイクロカーネル](#マイクロカーネル)
	1. [モノリシックカーネル](#モノリシックカーネル)
	1. [カーネルモード](#カーネルモード)
	1. [ユーザモード](#ユーザモード)
1. [OSの起動](#osの起動)
	1. [BIOS](#bios)
	1. [UEFI](#uefi)
	1. [ブートローダ](#ブートローダ)
	1. [ネットワークブート](#ネットワークブート)
	1. [マルチブート](#マルチブート)
	1. [フラッシュブートローダ](#フラッシュブートローダ)
1. [ジョブ](#ジョブ)
	1. [ジョブ管理システム](#ジョブ管理システム)
	1. [JCL](#jcl)
	1. [マスタスケジューラ](#マスタスケジューラ)
	1. [スプーリング](#スプーリング)
1. [プロセス](#プロセス)
	1. [タスク管理システム](#タスク管理システム)
	1. [プロセスの状態遷移](#プロセスの状態遷移)
	1. [到着順方式](#到着順方式)
	1. [処理時間方式](#処理時間方式)
	1. [優先度順方式](#優先度順方式)
	1. [ラウンドロビン方式](#ラウンドロビン方式)
	1. [プリエンプション方式](#プリエンプション方式)
	1. [多段フィードバック待ち行列](#多段フィードバック待ち行列)
	1. [イベントドリブンプリエンプション方式](#イベントドリブンプリエンプション方式)
	1. [ディスパッチャ](#ディスパッチャ)
	1. [スレッド](#スレッド)


## オペレーティングシステム

**オペレーティングシステム**(**OS**: Operating system)は、アプリケーションソフトウェアにハードウェア資源を分配したり、ユーザや他のプログラムに対して使いやすいユーティリティプログラムを提供したり、コンピュータ全体の制御を行うプログラム。


## OSの種類

### Windows

**Windows**は、Microsoftが提供するオペレーティングシステムで、個人利用のOSとしては世界で最も利用者数が多い。技術的な知識を有さないユーザ数も多いため、攻撃者からも狙われやすく、ウィルスの種類も多い。

### MacOS

**MacOS**は、Appleが提供するオペレーティングシステムで、高いユーザエクスペリエンスが特徴。一般ビジネスや個人利用においてはWindowsに及ばないものの、クリエイティブな分野で活躍している。

### UNIX

**UNIX**（Unix系OS）は、1960年代にAT&T社のベル研究所で誕生したUNIXおよびUNIXをベースとして開発されたOSのこと。IT分野やサーバといった分野においては一定のシェアを有している。基本的にはCUIによる操作となっているが、GUI環境の導入も可能。

### Linux

**Linux**は、Linuxカーネル（狭義のLinux）と、GNUが提供するソフトウェア群などから構成されるOS。UNIXを模倣して作られているが、全く別のOSとして設計されており、オープンソースソフトウェアとして提供されている。基本的にはCUIによる操作となっているが、GUI環境の導入も可能。


## カーネル

**カーネル**とは、OSの最も核となる機能の部分のこと。個々のアプリケーションからカーネルの機能を使用するにはAPI（システムコール、SVC=スーパバイザコール）を利用する。

### マイクロカーネル

**マイクロカーネル**は、OSの機能の中でも最小限の機能だけを有するカーネル。他の機能はサービスとして実行する。

### モノリシックカーネル

**モノリシックカーネル**は、OSの機能の多くをカーネルに含み、カーネルだけで豊富な機能を提供できるもの。

### カーネルモード

**カーネルモード**（**スーパバイザモード**）は、コンピュータに対する高い権限を持って処理を実行するモード。コンピュータ資源のあらゆる部分にアクセスが可能で、実行する命令も優先度が高くなっている。

### ユーザモード

**ユーザモード**は、アプリケーションソフトウェアを実行するためのモードで、比較的権限が低く、アプリケーションに必要な資源だけにアクセスできる。


## OSの起動

コンピュータの電源を入れると、CPUはマザーボード上のROMに記憶されているBIOSやUEFIといったファームウェアインタフェースプログラムを実行する。その後、ファームウェインタフェースによって読み込まれたブートローダを用いてオペレーティングシステムが起動される。

### BIOS

**BIOS**(Basic Input/Output System)は、正常起動に要するハードウェアが揃っているかを確認し、ブートローダを立ち上げてコンピュータを起動するファームウェアインタフェース。

### UEFI

**UEFI**(Unified Extensible Firmware Interface)は、近年主流となっているファームウェアインタフェース。ファームウェアをコンピュータに接続し、ハードウェアコンポーネントの初期化とオペレーティングシステムの起動に使用される。

### ブートローダ

**ブートローダ**（**ブートストラップ**）は、コンピュータにOSを読み込ませるために用いるプログラムのことで、OS自身に組み込まれている。ブートローダとしては、Linuxに付属していた**LILO**(Linux Loader)や、UNIX系OSで使われる**GRUB**(Grand Unified Bootloader)といったものが代表的。

### ネットワークブート

**ネットワークブート**は、ネットワーク上の他のコンピュータからOSを取り込んで起動する仕組み。

### マルチブート

**マルチブート**（**デュアルブート**、**トリプルブート**...）は、1台のコンピュータに複数のOSを組み込む機能。BIOSの設定によってブートローダの起動優先順位を入れ替えたり、マルチブート対応のブートローダによって起動時にどのOSを読み込むか選択したりする。

### フラッシュブートローダ

**フラッシュブートローダ**は、書き換え可能なフラッシュメモリのブートローダ領域に配置されたブートローダ。


## ジョブ

**ジョブ**は、ユーザがコンピュータに依頼した仕事の単位のこと。

### ジョブ管理システム

**ジョブ管理システム**（**ジョブスケジューラ**）は、複数のジョブの起動や終了を制御したり、ジョブの実行・終了状態の監視などを行うソフトウェア。以下のプログラムから構成される。

- **リーダ**（ジョブ読み取り）: ジョブの入力、入力待ち行列を作成する
- **イニシエータ**（ジョブ開始）: 待ち行列のジョブの優先度を考慮して実行するジョブを選択し、資源を割り当てる
- **ターミネータ**（ジョブ終了）: 実行終了したジョブステップが使用していた主記憶領域を解放し、入出力ファイルの後始末を行ったりする
- **ライタ**（ジョブ書き出し）: 出力ジョブ待ち行列に登録されているジョブの女王から、出力するべき情報を決定する

ジョブの実行順序を決定することを**スケジューリング**という。

### JCL

**JCL**（**ジョブ制御言語**: Job Control Language）は、ジョブステップを指定するための言語。JCLによってプログラムの実行順序、ジョブの実行に必要な資源などを記述する。ジョブを構成する1つ1つの処理単位を**ジョブステップ**という。

### マスタスケジューラ

**マスタスケジューラ**は、オペレータからの指示を解釈してジョブスケジューラへ指示を出したり、メッセージを返す役割を担うスケジューラで、メモリ上に常駐する。

### スプーリング

**スプーリング**（**スプール**）は、プリンタなどの低速の装置にジョブの結果を出力する場合に、一時的にデータを書き込んでおくこと、あるいはその領域。CPUを素早く解放し、出力装置がデータを受け付ける準備ができてから処理を行うことで、資源の無駄をなくす。


## プロセス

**プロセス**（**タスク**）は、コンピュータから見た仕事の単位（OSの元で実行される内部処理の単位）のこと。ジョブ（ジョブステップ）をCPUが実行するのに適した単位に分割したもの。

### タスク管理システム

**タスク管理システム**（**タスクスケジューラ**）は、複数のタスクの実行順を決定するプログラム。

### プロセスの状態

生成されたプロセスは、**実行可能状態**、**実行状態**、**待ち状態**の3つの状態を遷移させながら実行を進めていく。

タスクは生成されるとまず実行可能状態となる。そこでCPUに空きができると実行状態に移り、処理を実行する。実行が完了するとタスクが消滅し、実行中に入出力が必要な処理などのCPU以外を使用する処理が発生すると、待ち状態に移る。入出力などの処理が完了すると、待ち状態から実行可能状態に移行する。

実行状態のタスクを実行中に**タイムクォンタム**（ひとつのタスクに割り当てられた時間）を使い切ると、実行可能状態に戻る。また、実行状態のタスクを中断させる**プリエンプション**が発生した場合も実行可能状態に戻る。プリエンプションは、他に優先度が高いタスクが生成された場合や、割込みが起こった場合に発生する。

### 到着順方式

**到着順方式**（**ノンプリエンプション方式**）は、タスクを到着順で処理する。**FIFO**(FIrst In First Out)とも呼ばれる。

### 処理時間順方式

**処理時間方式**は、タスクの処理時間が短いものから順に処理を行う。

### 優先度順方式

**優先度順方式**は、タスクを優先度順で処理する。

### ラウンドロビン方式

**ラウンドロビン方式**は、ひとつひとつのタスクに同じタイムクォンタムを割り当て、一定時間ごとに順番に処理を回していく方式。

### プリエンプション方式

**プリエンプション方式**（**プリエンプティブ方式**）は、タスクに優先度を付け、優先度の高いタスクが実行可能状態になるとプリエンプションを発生させる方式。

### 多段フィードバック待ち行列

**多段フィードバック待ち行列**は、複数の優先度待ち行列を持ち、高い優先度の待ち行列から順次処理していく方式。低い優先度で長時間待っているタスクは優先度を上げ、一度実行したタスクの優先度を下げるといったフィードバック調整を行う。

### イベントドリブンプリエンプション方式

**イベントドリブンプリエンプション方式**は、割込みによってタスクの切り替えを行うイベントドリブン方式と、優先度の高いタスクを実行させるプリエンプション方式を組み合わせた方式。**イベント**は、タスクの状態を、入出力の終了や外部からのコマンド入力などで割込みにより通知する仕組みのこと。

### ディスパッチャ

**ディスパッチャ**（**タスク指名ルーチン**）は、実行可能状態のタスクを調べ、最も優先度の高いタスクを実行状態にしたり、実行状態のタスクを中断したりするプログラム。


## 参考文献

- [角谷一成.令和05年 基本情報技術者合格教本.株式会社技術評論社, 2022, 575](https://gihyo.jp/book/2022/978-4-297-13164-7)
- [瀬戸美月.徹底攻略 応用情報技術者教科書 令和4年度.株式会社インプレス, 2021, 814](https://book.impress.co.jp/books/1121101057)
### スレッド

**スレッド**は、プロセス中で生成された子プロセスのこと。
