# 演算


## 目次

1. [プログラミングにおける演算](#プログラミングにおける演算)
1. [誤差](#誤差)
	1. [桁落ち](#桁落ち)
	1. [情報落ち](#情報落ち)
	1. [丸め誤差](#丸め誤差)
	1. [打ち切り誤差](#打ち切り誤差)
	1. [オーバフロー](#オーバフロー)
	1. [アンダーフロー](#アンダーフロー)
1. [算術演算子](#算術演算子)
1. [比較演算子](#比較演算子)
1. [代入演算子](#代入演算子)
1. [論理演算子](#論理演算子)
1. [ビット演算子](#ビット演算子)
1. [インクリメントとデクリメント](#インクリメントとデクリメント)
1. [三項演算子](#三項演算子)


## プログラミングにおける演算

**演算**とは加算や減算、比較といった計算処理のことである。各種演算を表す記号・シンボルのことを**演算子**（**オペレータ**）といい、演算対象のデータのことを**被演算子**（**オペランド**）という。各[プログラミング言語](./01_basic_knowledge_of_programming.ja.md#プログラミングの概要)で用いられる演算子は基本的に共通しているものが多い。


## 誤差

[コンピュータ](./01_basic_knowledge_of_programming.ja.md#プログラミングの概要)は有限の桁数でデータを表現するため、[演算](#プログラミングにおける演算)の際に**誤差**を生じる場合がある。

### 桁落ち

**桁落ち**は値がほぼ等しい2つの数値の差を求めたときに、有効桁数が減ってしまう誤差。次の例では、もともとの値の有効桁数は8桁であるが、計算後の値の有効桁数は2桁になってしまう。

```
1.2345678 - 1.2345668 = 0.0000010
```

### 情報落ち

**情報落ち**は絶対値が非常に大きい数値と小さい数値で加算や減算を行ったときに、小さい数値が計算結果に反映されない誤差。下記の例で有効桁数が8桁であるとすると、計算結果に小さい方の数値が反映されえない。

```
1234.5678 + 0.0000001 = 1234.5678001 ≒ 1234.5678
```

### 丸め誤差

**丸め誤差**は数値の有効桁数の関係で切り捨て、切り上げ、四捨五入などによって下位の桁を削除することで発生する誤差。

### 打ち切り誤差

**打ち切り誤差**は無限少数などの桁が無限に続く数値を途中で打ち切ることによって発生する誤差。

### オーバフロー

**オーバフロー**は[演算](#プログラミングにおける演算)結果が桁内で表すことができる数値の範囲を超えることで発生する誤差。例えば、1[バイト](./01_basic_knowledge_of_programming.ja.md#データの単位)の整数データであれば表現できる範囲は `-128 ~ 127` 、4[バイト](./01_basic_knowledge_of_programming.ja.md#データの単位)の整数データであれば `-2,147,483,648 ~ 2,147,483,647` となる。

### アンダーフロー

**アンダーフロー**は浮動小数点型の[演算](#プログラミングにおける演算)において、[演算](#プログラミングにおける演算)結果の指数部が小さくなりすぎることで数値を表現できなくなるような誤差。


## 算術演算子

**算術演算子**は加算、減算、乗算、除算、剰余の総称。また、算術演算の優先度に関するルールについては通常の数学で用いられるものと変わらない。

| 演算                 | 演算子 |
|----------------------|--------|
| 加算                 | `+`    |
| 減算                 | `-`    |
| 乗算                 | `*`    |
| 除算                 | `/`    |
| 剰余（モジュロ演算） | `%`    |


## 比較演算子

**比較演算子**（**関係演算子**）は左右の[オペランド](#プログラミングにおける演算)を比較して、結果として[ブーリアン型](./03_data_type.ja.md#ブーリアン型)の値を返却する。[プログラミング言語](./01_basic_knowledge_of_programming.ja.md#プログラミングの概要)によっては等価・非等価の[演算子](#プログラミングにおける演算)は[型](./03_data_type.ja.md#型)まで比較せず、曖昧な結果を返す場合がある（[文字型](./03_data_type.ja.md#文字型)の `'1'` と[整数型](./03_data_type.ja.md#整数型)の `1` を同値として扱うなど）。このような言語では、[型](./03_data_type.ja.md#型)の比較も行う厳密な等価・非等価の[演算子](#プログラミング言語の概要)として `===` および `!==` を用いる場合もある。

| 演算           | 演算子 |
|----------------|--------|
| 大なり         | `>`    |
| 大なりイコール | `>=`   |
| 小なり         | `<`    |
| 小なりイコール | `<=`   |
| イコール       | `==`   |
| ノットイコール | `!=`   |


## 代入演算子

**代入演算子**は左側の[オペランド](#プログラミングにおける演算)の[変数](./02_variable.ja.md#プログラミングにおける変数)に対して、右側の[オペランド](#プログラモングにおける演算)の値を代入する[演算子](#プログラミングにおける演算)である。また代入の際に、左側の[オペランド](#プログラミングにおける演算)の元の値と右側の[オペランド](#プログラミングにおける演算)の[算術演算](#算術演算子)結果の[再代入](./02_variable.ja.md#変数の操作)を行う、**複合代入演算子**をサポートする場合もある。

| 演算         | 演算子 |
|--------------|--------|
| 代入         | `=`    |
| 加算して代入 | `+=`   |
| 減算して代入 | `-=`   |
| 乗算して代入 | `*=`   |
| 除算して代入 | `/=`   |
| 剰余して代入 | `%=`   |


## 論理演算子

**論理演算子**は[オペランド](#プログラミングにおける演算)として[ブーリアン型](./03_data_type.ja.md#ブーリアン型)の値をとり、複数の条件を組み合わせた結果として新たな[ブーリアン型](./03_data_type.ja.md#ブーリアン型)の値を返却する。論理演算子を組み合わせることで、複雑な条件を表現することもできる。

| 演算          | 演算子 | 概要                                                                  |
|---------------|--------|-----------------------------------------------------------------------|
| 論理積（AND） | `&&`   | 左右のオペランドが両方が `true` であれば `true` を返却                |
| 論理和（OR）  | `\|\|` | 左右のオペランドの一方でも `true` であれば `true` を返却              |
| 否定（NOT）   | `!`    | オペランドが `true` であれば `false`、 `false` であれば `true` を返却 |


## ビット演算子

**ビット演算子**は[オペランド](#プログラミングにおける演算)を[ビット](./01_basic_knowledge_of_programming.ja.md#データの単位)列（[2進数](./01_basic_knowledge_of_programming.ja.md#2進数とプログラミング)データ）とみなして、[ビット](./01_basic_knowledge_of_programming.ja.md#データの単位)単位での[論理演算](#論理演算子)などを行う。

| 演算           | 演算子 | 概要                                                                                         |
|----------------|--------|----------------------------------------------------------------------------------------------|
| ビットAND      | `&`    | 左右のオペランドをビット列として比較して、両方1のビットのみを1にしたビット列を返す           |
| ビットOR       | `\|`   | 左右のオペランドをビット列として比較して、どちらか一方が1のビットのみを1にしたビット列を返す |
| ビットXOR      | `^`    | 左右のオペランドをビット列として比較して、異なる値を持つビットのみを1にしたビット列を返す   |
| ビットNOT      | `~`    | オペランドをビット列として識別し、全てのビットを反転させたビット列を返す |
| 右ビットシフト | `>>`   | オペランドをビット列として識別し、全てのビットを右に1ビットずらしたビット列を返す           |
| 左ビットシフト | `<<`   | オペランドをビット列として識別し、全てのビットを左に1ビットずらしたビット列を返す           |

**右ビットシフト**では、1[ビット](./01_basic_knowledge_of_programming.ja.md#データの単位)シフトするごとに値が元の1/2倍される。**左ビットシフト**では、1[ビット](./01_basic_knowledge_of_programming.ja.md#データの単位)シフトするごとに値が元の2倍される。

**論理ビットシフト**では、シフト演算を行った後の空き[ビット](./01_basic_knowledge_of_programming.ja.md#データの単位)を常に `0` で初期化する。**算術ビットシフト**では、右シフトを行った後の空き[ビット](./01_basic_knowledge_of_programming.ja.md#データの単位)を符号[ビット](./01_basic_knowledge_of_programming.ja.md#データの単位)で初期化する。

```
// ビットANDの例
a: 11011001
b: 01010101
-----------
c: 01010001

// ビットORの例
a: 11011001
b: 01010101
-----------
c: 11011101

// ビットXORの例
a: 11011001
b: 01010101
-----------
c: 10001100

// ビットNOTの例
a: 11011001
-----------
c: 00100110

// 右ビットシフトの例（算術ビットシフト）
a: 11011001
-----------
c: 11101100

// 左ビットシフトの例
a: 11011001
-----------
c: 10110010
```


## インクリメントとデクリメント

**インクリメント演算子**（ `++` ）は[オペランド](#プログラミングにおける演算)の値を1増加させる。**デクリメント演算子**（ `--` ）は[オペランド](#プログラミングにおける演算)の値を1減少させる。[オペランド](#プログラミングにおける演算)の前に[演算子](#プログラミングにおける演算)をつける**前置**では、データをインクリメント・デクリメントした後にその値を返却する。一方で[オペランド](#プログラミングにおける演算)の後ろに[演算子](#プログラミングにおける演算)をつける**後置**では、現在の値を返却して後からインクリメント・デクリメント処理を行う。

```c
// C言語

// 前置インクリメント、前置デクリメント
++x;
--x;

// 後置インクリメント、後置デクリメント
x++;
x--;
```

[プログラミング言語](./01_basic_knowledge_of_programming.ja.md#プログラミングの概要)によってはインクリメント演算子とデクリメント演算子をサポートしていない場合もある。


## 三項演算子

**三項演算子**（**条件演算子**）は[条件式](./05_control_flow.ja.md#条件分岐)に応じて返却する値を切り替えるような処理を行う。一般的には次のような記法を用いる。

```
<条件式> ? <真式> : <偽式>
```

[プログラミング言語](./01_basic_knowledge_of_programming.ja.md#プログラミングの概要)によっては三項演算子をサポートしていない場合もある。
