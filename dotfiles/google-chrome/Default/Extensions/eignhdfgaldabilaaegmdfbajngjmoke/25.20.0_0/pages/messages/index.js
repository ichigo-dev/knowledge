"use strict";cjce.registerTemplate("bm-p-messages",function(e,n){var c="https://messages.google.com",a=c+"/web/u/"+n.account.authuser+"/",i=cjBasics.uniqueId.generate(),t=n.darkMode?"1":"0",s={bm_iid:i,bm_cid:"messages",hl:cjBasics.lang.current,bm_cst:"1",bm_udm:n.darkMode?"1":"0",dark_theme:t,dl_dark_theme:t},o="authentication",l=!1,m={conversations:{iconName:"__mdi:message",label:cjBasics.lang.i18n("cj_i18n_01487","Conversations"),newTabUrl:"conversations"},archived:{iconName:"__mdi:archive",label:cjBasics.lang.i18n("cj_i18n_01740","Archived"),newTabUrl:"conversations"},calls:{iconName:"__mdi:call",label:cjBasics.lang.i18n("cj_i18n_01170","Calls"),newTabUrl:"calls"},voicemail:{iconName:"__mdi:voicemail",label:cjBasics.lang.i18n("cj_i18n_01129","Voicemail"),newTabUrl:"voicemail"},settings:{iconName:"__mdi:settings",label:cjBasics.lang.i18n("cj_i18n_00298","Settings"),newTabUrl:"settings"},relatedHeader:{header:!0,color:!0,label:cjBasics.lang.i18n("cj_i18n_01539","Related apps")},chat:{iconName:"__mdi:chat_bubble_outline",label:cjBasics.lang.i18n("cj_i18n_06694","Google Chat"),shortcutId:"559",external:!n.servicesDatabase.chat},meet:{iconName:"__mdi:meet",label:cjBasics.lang.i18n("cj_i18n_00809","Meet"),shortcutId:"545",external:!n.servicesDatabase.meet}},r={authentication:cjBasics.lang.i18n("cj_i18n_01745","Connect phone"),newConversation:cjBasics.lang.i18n("cj_i18n_01741","New conversation"),newGroupConversation:cjBasics.lang.i18n("cj_i18n_01742","New group conversation"),conversation:cjBasics.lang.i18n("cj_i18n_01743","Conversation")},d=cjce.createElement("bm-ogb",{drawer:!0,withShadow:!0,serviceIcon:"messages",serviceLabel:cjBasics.lang.i18n("cj_i18n_01084","Messages"),pageLabel:cjBasics.lang.i18n("cj_i18n_07237","Authentication"),bmApis:n,onBack:function(){v.cjceSendFrameCommand({method:"bmCstNavigateBack"},c)},onNewTab:function(){v.cjceGetCleanUrl(c).then(function(e){n.openTab(e||a)})}});function _(e){v.cjceSendFrameCommand({method:"bmCstClickDomElement",value:e},c)}function j(){_(".notifications-button")}e.appendChild(d);var b=cjce.createElement("ccbm-iconbutton",{label:cjBasics.lang.i18n("cj_i18n_06600","Unmute notifications"),iconName:"__mdi:notifications_off",onClick:j}),g=(b.hidden=!0,d.cjceAppendChild(b),cjce.createElement("ccbm-iconbutton",{label:cjBasics.lang.i18n("cj_i18n_06599","Mute notifications"),iconName:"__mdi:notifications",onClick:j})),h=(g.hidden=!0,d.cjceAppendChild(g),cjce.createElement("ccbm-iconbutton",{iconName:"__mdi:more_vert",onClick:function(){_(".conversation-menu-icon")}}));function u(e){e="conversation"===e;g.hidden=!e||!l,b.hidden=!e||l,h.hidden=!e}h.hidden=!0,d.querySelector(".cjmd-appbar").appendChild(h),cjBasics.webRequest.handleIframeHeaders([c+"/*bm_iid="+i+"*"],{handleFirefoxInject:!0,handleSwCache:!0}),cjBasics.webRequest.catchAndStop(["https://accounts.google.com/AccountChooser*"+a+"postSignIn"],function(){v.src=cjBasics.urlParams.attach(a+"postSignIn",s)});var v=cjce.createElement("bm-iframe",{src:cjBasics.urlParams.attach(a+"authentication",s),onMessage:function(e){var c,n=e.bm_method,e=e.bm_value;"messagesUpdateView"===n?(u(o=e),c=(c=m[o])&&c.label||r[o],d.cjceSetPageLabel(c),p.cjceSelectedId=o):"messagesBackState"===n?d.cjceSetBackState(e):"messagesMutedState"===n?(l=e,g.hidden=!l,b.hidden=l):"messagesPageTitle"===n&&e&&(r.conversation=e,"conversation"===o)&&d.cjceSetPageLabel(e)}}),t=(e.appendChild(v),d.cjceDrawerEl),p=cjce.createElement("bm-navlist",{isSelector:!0,selectedId:o,items:m,onChange:function(e){"chat"===e||"meet"===e?(n.pageManager.navigate(e),p.cjceSelectedId=o):(v.cjceSendFrameCommand({method:"messagesActivateMenuItem",value:e},c),"archived"===e&&(p.cjceSelectedId=e="conversations"),u(o=e))},onNewTab:function(e,c){c=c.newTabUrl?a+c.newTabUrl:cjgShortcuts.getUrl(c.shortcutId,n.account);n.openTab(c)}});t.appendChild(p)});