"use strict";!function(){var n,s,e,a,o,i,c,m,u=window,r=u.location,d=document,t="undefined"!=typeof chrome&&chrome||{};function l(){d.body.classList.toggle("dark-theme",e),d.body.classList.toggle("dark-mode",e)}function g(e){d.documentElement.dataset.bmMessagesHideMenus="1",d.querySelector("button[data-e2e-main-nav-menu]").click(),setTimeout(function(){setTimeout(function(){d.documentElement.dataset.bmMessagesHideMenus="0"},50),d.querySelector(e).click()},50)}function v(){(d.querySelector('a[href="/web/conversations"]')||d.querySelector(".back-button")).click()}function b(){g("button[data-e2e-main-nav-menu-archived], a[data-e2e-main-nav-menu-archived]")}u.top!==u.self&&"https://messages.google.com"===r.origin&&(n=t.runtime.getURL("PATH/").replace("/PATH/",""),"object"!=typeof(t=r.ancestorOrigins)||1===t.length&&t[0]===n)&&(s=n.startsWith("moz-extension://"),e=-1!==r.search.indexOf("bm_udm=1"),function e(){d.body?(l(),setTimeout(l,100),setTimeout(l,200),setTimeout(l,1e3)):setTimeout(e,10)}(),function e(){var t=r.href,t=(a!==t&&(a=t,t="conversations",(i=r.pathname).contains("/auth")?t="authentication":i.contains("/settings")?t="settings":i.contains("/conversations/new")?t=-1===a.indexOf("mode=group")?"newConversation":"newGroupConversation":i.contains("/conversations/")?t="conversation":i.contains("/calls/")?t="calls":i.contains("/voicemail/")&&(t="voicemail"),t!==o&&(o=t,u.parent.postMessage({bm_method:"messagesUpdateView",bm_value:o},n)),t=!i.contains("/conversations")&&!i.contains("/auth"),u.parent.postMessage({bm_method:"messagesBackState",bm_value:t},n)),d.querySelector("h2[data-e2e-header-title]")),t=t&&t.textContent,t=(c!==t&&(c=t,u.parent.postMessage({bm_method:"messagesPageTitle",bm_value:t},n)),d.querySelector("button.notifications-button[data-e2e-is-muted")),t=t&&"true"===t.dataset.e2eIsMuted;m!==t&&(m=t,u.parent.postMessage({bm_method:"messagesMutedState",bm_value:t},n)),setTimeout(e,100)}(),u.addEventListener("message",function(e){var t;e.origin===n&&(e.isTrusted||s)&&(t=(e=e.data||{}).bm_method,e=e.bm_value,"messagesActivateMenuItem"===t)&&("archived"===(t=e)?i.startsWith("/web/conversation")?b():(v(),setTimeout(b,50)):"settings"===t?g('a[data-e2e-main-nav-menu-settings], a[href="/web/settings"]'):v())}))}();