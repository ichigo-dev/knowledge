"use strict";!function(){var a,r,o,s,i,c=window,u=c.location,l=document,e="undefined"!=typeof chrome&&chrome||{};function m(e){if("closest"in Element.prototype)return e.closest("a");for(var t=e;t;){if("A"===t.tagName)return t;t=t.parentNode}return null}function p(e,t){t=new InputEvent(t,{bubbles:!0,cancelable:!0});e.dispatchEvent(t)}function b(e,t){t=new KeyboardEvent(t,{bubbles:!0,cancelable:!0,keyCode:13});e.dispatchEvent(t)}function t(e,t){t=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window});e.dispatchEvent(t)}function d(e){t(e,"mousedown"),t(e,"mouseup"),t(e,"click")}function f(e,t){var n=l.querySelector(e);if(n){for(;0<t;)n=n.parentNode,t--;d(n)}}c.top!==c.self&&u.origin.endsWith(".google.com")&&(a=e.runtime.getURL("PATH/").replace("/PATH/",""),"object"!=typeof(e=u.ancestorOrigins)||1===e.length&&e[0]===a)&&(r=a.startsWith("moz-extension://"),o=-1!==navigator.platform.toLowerCase().indexOf("mac")?"metaKey":"ctrlKey",e=0|u.search.split("bm_cst=")[1].split("&"),s=u.origin,e%2==0&&(i=u.search,l.addEventListener("mousedown",function(e){var t,n,e=m(e.target);e&&!e.bmProcessed&&(e.bmProcessed=!0,e.href)&&(t=e.origin,n=e.search,/^https:\/\/[a-z]+\.app\.goo\.gl$/.test(t)&&(e.href=decodeURIComponent(n.match(/[&?](?:link|afl)=(.+?)(?:&|$)/))),t===s)&&-1===n.indexOf("bm_cst=")&&(n.startsWith("?")?e.search+=i.replace("?","&"):e.search=i)},!0),l.addEventListener("click",function(e){var t=m(e.target),n=t&&t.href;(n&&-1===t.search.indexOf("bm_cst=")||1===e.button||e[o])&&(c.parent.postMessage({bm_method:"bmCstOpenUrl",bm_value:n},a),e.stopPropagation(),e.preventDefault())})),c.addEventListener("message",function(e){var t,n,o,s;e.origin===a&&(e.isTrusted||r)&&(t=(s=e.data||{}).bm_method,n=s.bm_value,"bmCstGetFrameUrl"===t?e.source.postMessage({bm_request:s.bm_request,bm_value:u.href},a):"bmCstUpdateState"===t?(c.history.pushState(null,null,n),e=new PopStateEvent("popstate",{state:{url:n}}),c.dispatchEvent(e)):"bmCstNavigateBack"===t?c.history.back():"bmCstClickDomElement"===t?f(n):"bmCstClickParentElement"===t?f(n.selector,n.depth):"bmCstInputFill"===t?((s=l.querySelector(n.selector)).value=n.newValue,p(s,"input")):"bmCstFillAndSubmit"===t&&((e=l.querySelector(n.selector)).value=n.newValue,o=e,s=0,setTimeout(function(){d(o)},s+=50),setTimeout(function(){b(o,"keydown")},s+=50),setTimeout(function(){b(o,"keyup")},s+=50),setTimeout(function(){p(o,"input")},200)))}))}();