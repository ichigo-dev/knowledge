"use strict";!function(){var C=window,N=document;cjce.registerTemplate("bm-p-movies",function(a,r){var n,i,c,o,e=cjBasics.geo.isUsaCheck(),s=(e||(n="youtube",a.classList.add("bm-ele-app--yttheme"),a.style.setProperty("--ccc-accent-color","#f5221b")),["https://www.googleapis.com/auth/android_video"]),l=C.atob("QUl6YVN5QUgwcURTVzk3M0xPeEUtRmZmbDdaNWVZVFdCQ0FXT20w"),u="home",t="https://play.google.com",m=t+"/store/",d=m+"movies",p="authuser="+r.account.authuser,h=d+"?"+p,_=t+"/movies?"+p,g={home:{label:e?cjBasics.lang.i18n("cj_i18n_01055","For you"):cjBasics.lang.i18n("cj_i18n_00291","Home"),iconName:"__mdi:home",newTabUrl:h},library:{label:cjBasics.lang.i18n("cj_i18n_00131","Library"),iconName:"__mdi:video_library",divider:!0,newTabUrl:_},play:{label:cjBasics.lang.i18n("cj_i18n_00134","Shop"),iconName:"__mdi:shop",newTabUrl:h,external:!cjBasics.webRequest.wrifSupported},save:{label:e?cjBasics.lang.i18n("cj_i18n_06670","Watchlist"):cjBasics.lang.i18n("cj_i18n_00550","Wishlist"),iconName:"__mdi:cjg_wishlist",external:!0,newTabUrl:e?"https://www.google.com/search?q=my+watchlist&stick=H4sIAAAAAAAAABPi1U_XNzTMMLQ0TopPNn3EqMYt8PLHPWEp2UlrTl5jFOcSDEgtKs7PS8wJTyxJzsjJLC6xYtJg5FnEypNbqVAOEwMAB_LtUkcAAAA&"+p:"https://play.google.com/wishlist?"+p},purchases:{label:cjBasics.lang.i18n("cj_i18n_00310","Purchases"),iconName:"__mdi:local_offer",external:!0,newTabUrl:cjgApis.url.youtube(r.account,"paid_memberships")}};function j(e){var t;e&&"not_authorized"===e.cjg_error&&(a.textContent="",t=cjce.createElement("bm-fulldialog",{theme:n,lockup:{label:cjBasics.lang.i18n("cj_i18n_01205","Movies")},iconName:"youtube_movies",message:cjBasics.lang.i18n("cj_i18n_01249","Before you can use this page, you need to give access to your movies"),actionLabel:cjBasics.lang.i18n("cj_i18n_01916","Continue with Google"),actionG:!0,action:function(){cjgApis.auth.requestPermissions(r.account,e.cjg_missing_scopes)}}),a.appendChild(t))}function b(e){return e&&"object"==typeof e&&Array.isArray(e.resource)?e.resource.map(function(e){var t,a=e.metadata;return{title:a.title,year:(t=a.release_date_timestamp_sec,t=parseInt(t+"000",10),new Date(t).getUTCFullYear()),thumbnail:function(e){for(var t=196*C.devicePixelRatio,a=1;a<e.length;a++)if(e[a].width<t)return e[a-1].url;return e[0].url}(a.images),duration:(t=a.duration_sec,Math.round(t/60)),id:e.resource_id.id}}):[]}function v(e,t){t=t||{},t.alt="json",t.prettyPrint="false",e=cjBasics.urlParams.attach("https://content.googleapis.com/android_video/v1/"+e,t);return cjgApis.request(e,{fetchAs:"json"},{key:l,account:r.account,requiredScopes:s}).catch(j)}function y(){return v("recommendation",{cat:"type=movie",cr:"NL",if:"imobrg",lr:"en_US",max:"9"})}function f(e){return v("asset/list",{cr:"NL",fs:"peg",id:"yt:movie:"+e.join(",yt:movie:"),if:"imobrg",lr:"en_US"})}function w(){return v("userlibrary",{max:"20"}).then(function(e){return e&&"object"==typeof e&&Array.isArray(e.resource)?e.resource.map(function(e){return e.resource_id.id}):[]}).then(f)}function B(e){if(0===e.length)return cjce.createElement("cjmd-emptystate",{theme:n,color:!0,iconName:"__mdi:local_movies",label:cjBasics.lang.i18n("cj_i18n_00156","No results")});for(var t=cjce.createElement("cjmd-grid"),a=0;a<e.length;a++){var i=function(t){var e,a=cjce.createElement("cjmd-griditem",{onClick:function(){var e=cjBasics.urlParams.attach(d+"/details",{id:t.id,authuser:r.account.authuser});r.openTab(e)}}),i=N.createElement("div");i.className="cjmd-griditem__thumbnail bm-p-movies-griditem__thumbnail",i.style.backgroundImage='url("'+t.thumbnail+'")',a.appendChild(i);(i=N.createElement("div")).className="cjmd-griditem__bottom",a.appendChild(i);var n=N.createElement("div");n.className="cjmd-griditem__textcontainer",i.appendChild(n);(i=N.createElement("div")).textContent=t.title||cjBasics.lang.i18n("cj_i18n_00380","Movie"),n.appendChild(i);var c=[];return"number"==typeof t.year&&c.push(t.year),"number"==typeof t.duration&&1<t.duration&&c.push(t.duration+" mins"),0<c.length&&((e=N.createElement("div")).className="cjmd-secondarytext",e.textContent=c.join(", "),n.appendChild(e)),20<t.title.length&&(i.title=t.title),a}(e[a]);t.appendChild(i)}return t}function A(e){var t;"play"===e?(r.pageManager.navigate(e,{typeId:"movies"}),o.cjceSelectedId=u):(t=g[u=e],i.cjceSetPageLabel(t.label),i.cjceSetLoading(!0),c.textContent="",("library"===e?w:y)().then(b).then(B).then(function(e){c.appendChild(e),i.cjceSetLoading(!1)}))}i=cjce.createElement("bm-ogb",{loading:!0,theme:n,drawer:{color:!0},serviceIcon:e?"tv":"youtube_movies",serviceLabel:e?cjBasics.lang.i18n("cj_i18n_06402","Google TV"):cjBasics.lang.i18n("cj_i18n_01205","Movies"),pageLabel:e?cjBasics.lang.i18n("cj_i18n_01055","For you"):cjBasics.lang.i18n("cj_i18n_00291","Home"),searchbox:{color:!0,submitInNewTab:!0,onSubmit:function(e){e=cjBasics.urlParams.attach(m+"search",{c:"movies",authuser:r.account.authuser,hl:cjBasics.lang.current,q:e});r.openTab(e)}},bmApis:r,onNewTab:function(){var e="library"===u?_:h;r.openTab(e)}}),a.appendChild(i),o=cjce.createElement("bm-navlist",{theme:n,isSelector:!0,selectedId:u,items:g,onChange:A,onNewTab:function(e,t){r.openTab(t.newTabUrl)}}),i.cjceDrawerEl.appendChild(o),c=cjce.createElement("cjmd-container",{scrollable:!0,shadow:"thinOnScroll"}),a.appendChild(c),r.setOnPageDisplayHandler(i.cjceSearchboxEl.select),A(u)})}();