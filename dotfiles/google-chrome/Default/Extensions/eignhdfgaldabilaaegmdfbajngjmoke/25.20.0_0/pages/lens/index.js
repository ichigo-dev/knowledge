"use strict";cjce.registerTemplate("bm-p-lens",function(c,a){var n,i,e,t,l="https://lens.google.com",o=l+"/"+a.wizPath+"search",s=o+"?p=",r={home:{iconName:"__mdi:home",label:cjBasics.lang.i18n("cj_i18n_00291","Home"),newTabUrl:s},about:{iconName:"__mdi:info",label:cjBasics.lang.i18n("cj_i18n_00838","About"),shortcutId:"911",external:!0},relatedHeader:{color:!0,header:!0,label:cjBasics.lang.i18n("cj_i18n_01539","Related apps")},search:{iconName:"__mdi:search",label:cjBasics.lang.i18n("cj_i18n_01365","Google Search"),shortcutId:"157"}},m=cjBasics.uniqueId.generate();function d(){n.cjceSendFrameCommand({method:"bmCstClickDomElement",value:"#gb div:empty + div > div span > button"},l)}function b(e){n=cjce.createElement("bm-iframe",{solid:"#fff",src:cjBasics.urlParams.attach(o,{bm_cid:"lens",bm_cst:"2",bm_wiz:"1",bm_iid:m,p:e,hl:cjBasics.lang.current}),onLoad:function(){i.cjceSetLoading(!1),e||d()},onMessage:function(e){var c=e.bm_method,e=e.bm_value;"lensUpdateView"===c?browserStorage.local.setItem("bm_cache_v33__lens__p",{p:e,time:Date.now()}):"bmCstOpenUrl"===c&&(c=cjBasics.cleanBmUrl(e),a.openTab(c))}}),c.appendChild(n)}i=cjce.createElement("bm-ogb",{drawer:!0,withShadow:!0,serviceIcon:"lens",serviceLabel:cjBasics.lang.i18n("cj_i18n_01778","Lens"),pageLabel:cjBasics.lang.i18n("cj_i18n_00291","Home"),bmApis:a,loading:!0,onNewTab:function(){n.cjceGetCleanUrl(l).then(function(e){a.openTab(e||s)})}}),c.appendChild(i),e=cjce.createElement("ccbm-iconbutton",{iconName:"__mdi:file_upload",label:cjBasics.lang.i18n("cj_i18n_01326","Upload"),onClick:d}),i.cjceAppendChild(e),e=i.cjceDrawerEl,t=cjce.createElement("bm-navlist",{isSelector:!0,items:r,selectedId:"home",onChange:function(e){a.pageManager.navigate(e),t.cjceSelectedId="home"},onNewTab:function(e,c){c=c.newTabUrl||cjgShortcuts.getUrl(c.shortcutId,a.account);a.openTab(c)}}),e.appendChild(t),cjBasics.webRequest.handleIframeHeaders([l+"/*bm_iid="+m+"*"],{disableOgs:l,handleFirefoxInject:!0,handleSecVariables:!0}),browserStorage.local.getItem("bm_cache_v33__lens__p").then(function(e){var c;return e&&"object"==typeof e&&(c=e.time,!(3e6<Date.now()-c))&&e.p||""}).then(b)});