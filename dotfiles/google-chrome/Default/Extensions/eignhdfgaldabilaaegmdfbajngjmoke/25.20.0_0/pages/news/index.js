"use strict";!function(){var I=document,B=browserStorage.sync.getItem("bm_pref__news__edition");cjce.registerTemplate("bm-p-news",function(e,c){var t,n,r,i,a,s="auto",l="headlines",o="https://news.google.com",d=o+"/"+c.wizPath,u=o+"/rss",_="/headlines/section/topic/",o=o+_,m=[{value:"auto",label:cjBasics.lang.i18n("cj_i18n_01344","Auto detect"),selected:!0},{value:"ar_me",label:"Arabic (العالم العربي)"},{value:"es_ar",label:"Argentina (Español)‎"},{value:"au",label:"Australia‎"},{value:"de_at",label:"Austria (Österreich)‎"},{value:"bn_bd",label:"Bangladesh (বাংলাদেশ)‎"},{value:"nl_be",label:"Belgium (België)‎"},{value:"fr_be",label:"Belgium (Belgique)‎"},{value:"en_bw",label:"Botswana‎"},{value:"pt-BR_br",label:"Brazil (Brasil)‎"},{value:"bg_bg",label:"Bulgaria (България)‎"},{value:"ca",label:"Canada (English)‎"},{value:"fr_ca",label:"Canada (Français)‎"},{value:"es_cl",label:"Chile (Español)‎"},{value:"cn",label:"China (中国)‎"},{value:"es_co",label:"Colombia (Español)‎"},{value:"es_cu",label:"Cuba (Español)‎"},{value:"cs_cz",label:"Czech Republic (Česká republika)‎"},{value:"ar_eg",label:"Egypt (مصر)"},{value:"en_et",label:"Ethiopia‎"},{value:"fr",label:"France (Français)‎"},{value:"de",label:"Germany (Deutschland)‎"},{value:"en_gh",label:"Ghana‎"},{value:"el_gr",label:"Greece (Ελλάδα)‎"},{value:"hk",label:"Hong Kong (香港)‎"},{value:"hu_hu",label:"Hungary (Magyarország)‎"},{value:"in",label:"India‎"},{value:"hi_in",label:"India (हिन्दी)‎"},{value:"ta_in",label:"India (தமிழ்)‎"},{value:"te_in",label:"India (తెలుగు)‎"},{value:"ml_in",label:"India (മലയാളം)‎"},{value:"id_id",label:"Indonesia (Bahasa Indonesia)‎"},{value:"en_ie",label:"Ireland‎"},{value:"en_il",label:"Israel (English)‎"},{value:"iw_il",label:"Israel (ישראל)"},{value:"it",label:"Italy (Italia)‎"},{value:"jp",label:"Japan (日本)‎"},{value:"en_ke",label:"Kenya‎"},{value:"kr",label:"Korea (한국)‎"},{value:"ar_sa",label:"KSA (السعودي)"},{value:"lv_lv",label:"Latvia (Latvija)‎"},{value:"ar_lb",label:"Lebanon (لبنان)"},{value:"lt_lt",label:"Lithuania (Lietuva)‎"},{value:"en_my",label:"Malaysia‎"},{value:"es_mx",label:"México (Español)‎"},{value:"fr_ma",label:"Morroco (Maroc)‎"},{value:"en_na",label:"Namibia‎"},{value:"nl_nl",label:"Netherlands (Nederland)‎"},{value:"nz",label:"New Zealand‎"},{value:"en_ng",label:"Nigeria‎"},{value:"no_no",label:"Norway (Norge)‎"},{value:"en_pk",label:"Pakistan‎"},{value:"es_pe",label:"Perú (Español)‎"},{value:"en_ph",label:"Philippines‎"},{value:"pl_pl",label:"Poland (Polska)‎"},{value:"pt-PT_pt",label:"Portugal (Português)‎"},{value:"ro_ro",label:"Romania (România)‎"},{value:"ru_ru",label:"Russia (Россия)‎"},{value:"fr_sn",label:"Senegal (Sénégal)‎"},{value:"sr_rs",label:"Serbia (Србија)‎"},{value:"en_sg",label:"Singapore‎"},{value:"sk_sk",label:"Slovakia (Slovensko)‎"},{value:"sl_si",label:"Slovenia (Slovenija)‎"},{value:"en_za",label:"South Africa‎"},{value:"es",label:"Spain (España)‎"},{value:"sv_se",label:"Sweden (Sverige)‎"},{value:"de_ch",label:"Switzerland (Schweiz)‎"},{value:"fr_ch",label:"Switzerland (Suisse)‎"},{value:"tw",label:"Taiwan (台灣)‎"},{value:"en_tz",label:"Tanzania‎"},{value:"th_th",label:"Thailand (ประเทศไทย)‎"},{value:"tr_tr",label:"Turkey (Türkiye)‎"},{value:"uk",label:"U.K.‎"},{value:"us",label:"U.S.‎"},{value:"ar_ae",label:"UAE (الإمارات)"},{value:"en_ug",label:"Uganda‎"},{value:"ru_ua",label:"Ukraine (Украина / русский)‎"},{value:"uk_ua",label:"Ukraine (Україна / українська)‎"},{value:"es_us",label:"United States (Estados Unidos)‎"},{value:"es_ve",label:"Venezuela (Español)‎"},{value:"vi_vn",label:"Vietnam (Việt Nam)‎"},{value:"en_zw",label:"Zimbabwe‎"}],b={HEADLINE:{iconName:"__mdi:news",newTabUrl:o+"HEADLINE",label:cjBasics.lang.i18n("cj_i18n_01345","Headlines")},WORLD:{iconName:"__mdi:language",newTabUrl:o+"WORLD",label:cjBasics.lang.i18n("cj_i18n_00021","World")},NATION:{iconName:"__mdi:flag",newTabUrl:o+"NATION",label:cjBasics.lang.i18n("cj_i18n_00022","Your country")},BUSINESS:{iconName:"__mdi:business",newTabUrl:o+"BUSINESS",label:cjBasics.lang.i18n("cj_i18n_00023","Business")},TECHNOLOGY:{iconName:"__mdi:memory",newTabUrl:o+"TECHNOLOGY",label:cjBasics.lang.i18n("cj_i18n_01347","Technology")},ENTERTAINMENT:{iconName:"__mdi:theaters",newTabUrl:o+"ENTERTAINMENT",label:cjBasics.lang.i18n("cj_i18n_00025","Entertainment")},SPORTS:{iconName:"__mdi:directions_bike",newTabUrl:o+"SPORTS",label:cjBasics.lang.i18n("cj_i18n_00026","Sports")},SCIENCE:{iconName:"__mdi:experiment",newTabUrl:o+"SCIENCE",label:cjBasics.lang.i18n("cj_i18n_01346","Science")},HEALTH:{iconName:"__mdi:fitness_center",newTabUrl:o+"HEALTH",label:cjBasics.lang.i18n("cj_i18n_00027","Health")}};function h(c){var e,r=c.q;return r||!0===c.noCache?(e=u+_+c.topic,r&&(e=u+"/search"),e=cjBasics.urlParams.attach(e,{q:r,ned:c.ned}),cjBasics.ajax(e,{fetchAs:"xml"}).then(function(e){for(var a={items:[]},n=e.querySelectorAll("rss > channel > item"),l=0;l<n.length;l++){var t=n[l],i={},t=(i.title=t.querySelector("title").textContent.split(" - ")[0],i.url=t.querySelector("link").textContent,t.querySelector("source")),t=t&&t.textContent;t&&(i.newsProvider=t),a.items.push(i)}return r||browserStorage.local.setItem("bm_cache_v33__news__"+c.topic,a.items),a})):browserStorage.local.getItem("bm_cache_v33__news__"+c.topic).then(function(e){return c.noCache=!0,e?{items:e,freshRequest:function(){return h(c)}}:h(c)})}function g(e){var i=cjce.createElement("cjmd-container",{scrollable:!0,shadow:"thinOnScroll"});return r.cjceSetLoading(!0),h({q:e.q||null,topic:e.topic||"HEADLINE",ned:e.ned||"auto"}).then(function e(a){a.freshRequest?a.freshRequest().then(e):r.cjceSetLoading(!1),i.textContent="",a.items.forEach(function(e){a=e,(e=cjce.createElement("cjmd-card",{withPadding:!0,onClick:function(){c.openTab(a.url)}})).classList.add("bm-p-news-card"),(n=I.createElement("header")).className="bm-p-news-card__header",e.appendChild(n),(l=I.createElement("div")).className="bm-p-news-card__main",n.appendChild(l),t=cjce.createElement("cjmd-title",{label:a.title}),l.appendChild(t),(t=I.createElement("div")).className="cjmd-secondarytext",t.textContent=a.newsProvider,l.appendChild(t),a.img&&((l=I.createElement("div")).className="bm-p-news-card__thumbnail",l.style.backgroundImage="url('"+a.img+"')",n.appendChild(l));var a,n,l,t=e;i.appendChild(t)})}),i}function v(){return a=a||B.then(function(e){s=e||s||"auto"})}function p(e){var a="publications/",a=("TOPIC"===e.kind&&(a="topics/"),d+a+e.id);c.openTab(a)}var j,w={headlines:{label:cjBasics.lang.i18n("cj_i18n_00020","Top stories"),iconName:"__mdi:play_newsstand",newTabUrl:d},foryou:{label:cjBasics.lang.i18n("cj_i18n_01055","For you"),iconName:"__mdi:for_you",newTabUrl:d+"foryou",external:!0},library:{label:cjBasics.lang.i18n("cj_i18n_01339","Topics/sources"),iconName:"__mdi:star_outline",newTabUrl:d+"my/library"},searches:{label:cjBasics.lang.i18n("cj_i18n_01372","Saved searches"),iconName:"__mdi:saved_search",newTabUrl:d+"my/searches"},magazines:{label:cjBasics.lang.i18n("cj_i18n_00132","Magazines"),iconName:"__mdi:auto_stories",newTabUrl:d+"my/magazines"},bookmarks:{label:cjBasics.lang.i18n("cj_i18n_01341","Saved stories"),iconName:"__mdi:bookmark_border",newTabUrl:d+"my/bookmarks",external:!0,divider:!0},weather:{label:cjBasics.lang.i18n("cj_i18n_00743","Weather"),iconName:"__mdi:cloud",newTabUrl:"https://www.google.com/search?q=weather"+("0"!==c.account.authuser?"&authuser="+c.account.authuser:""),divider:!0},covid19:{label:cjBasics.lang.i18n("cj_i18n_06392","COVID-19"),iconName:"__mdi:local_hospital",newTabUrl:d+"/topics/CAAqIggKIhxDQkFTRHdvSkwyMHZNREZqY0hsNUVnSmxiaWdBUAE",divider:!0}};function C(a){t.textContent="";var n=cjce.createElement("cjmd-container");t.appendChild(n),v().then(function(){var e=g({q:a,ned:s,shadow:"transparentOnScroll"});n.appendChild(e)})}function E(e){e=cjBasics.urlParams.attach("https://newsstand.google.com/"+e,{hl:cjBasics.lang.current,authuser:c.account.authuser});return cjBasics.ajax(e).then(function(e){return JSON.parse(e.replace(")]}',","")).data.items||[]})}function f(e,a){if(0===e.length)return cjce.createElement("cjmd-emptystate",{label:cjBasics.lang.i18n("cj_i18n_01342","No items found"),iconName:"__mdi:news"});for(var n,l=cjce.createElement("cjmd-grid"),t=0;t<e.length;t++)a===("SAVED_SEARCH"===e[t].kind)&&(n=function(e){var a=cjce.createElement("cjmd-griditem",{onClick:function(){p(e)}}),n=I.createElement("div"),l=(n.className="cjmd-griditem__thumbnail bm-p-news-griditem__thumbnail",e.icon&&((l=e.icon.image&&e.icon.image.url)?n.style.backgroundImage='url("'+l+'")':e.icon.text&&(n.textContent=e.icon.text)),"TOPIC"===e.kind&&(n.style.backgroundColor=e.theme.background),a.appendChild(n),I.createElement("div"));return l.className="cjmd-griditem__bottom",a.appendChild(l),(n=I.createElement("div")).className="cjmd-griditem__textcontainer",l.appendChild(n),(l=I.createElement("div")).textContent=e.title,n.appendChild(l),a}(e[t]),l.appendChild(n));return l}function N(a){r.cjceSetLoading(!0),t.textContent="";var n=cjce.createElement("cjmd-container",{scrollable:!0,shadow:"transparentOnScroll"}),l=(t.appendChild(n),"");cjgApis.cache.getItem(c.account,"bm_cache_v33__news__library").then(function(e){Array.isArray(e)&&(l=JSON.stringify(e),e=f(e,a),n.appendChild(e))}),E("api/library/subscriptions").then(function(e){r.cjceSetLoading(!1),JSON.stringify(e)!==l&&(n.textContent="",cjgApis.cache.setItem(c.account,"bm_cache_v33__news__library",e),e=f(e,a),n.appendChild(e))})}function S(e){if(0===e.length)return cjce.createElement("cjmd-emptystate",{label:cjBasics.lang.i18n("cj_i18n_01342","No items found"),iconName:"__mdi:news"});for(var a=cjce.createElement("cjmd-grid"),n=0;n<e.length;n++){var l=function(e){var a=cjce.createElement("cjmd-griditem",{onClick:function(){p(e)}}),n=I.createElement("div");n.className="bm-p-news-griditem__thumbnail bm-p-news-griditem__thumbnail--tall",n.style.backgroundImage='url("'+e.image.url+'")',"TOPIC"===e.kind&&(n.style.backgroundColor=e.theme.background),a.appendChild(n);(n=I.createElement("div")).className="cjmd-griditem__bottom",a.appendChild(n);var l=I.createElement("div");return l.className="cjmd-griditem__textcontainer",n.appendChild(l),(n=I.createElement("div")).textContent=e.magazineTitle.title,l.appendChild(n),(n=I.createElement("div")).className="cjmd-secondarytext",n.textContent=e.title,l.appendChild(n),a}(e[n]);a.appendChild(l)}return a}function y(){r.cjceSetLoading(!0);var a="HEADLINE",n=(t.textContent="",i||(i=cjce.createElement("cjmd-appbar",{secondary:!0}),r.appendChild(i)),cjce.createElement("cjmd-container"));function l(){var e=g({q:n.textContent="",ned:s,topic:a,shadow:"thinOnScroll"});n.appendChild(e)}t.appendChild(n),v().then(function(){var e=cjce.createElement("ccbm-tabs",{itemLimit:4,items:b,onMetaClick:function(e){e=b[e].newTabUrl;c.openTab(e)},onChange:function(e){a=e,l()},selectedId:"HEADLINE"});i.textContent="",i.appendChild(e),r.cjceSetLoading(!1),l()})}function T(){var a,n;i&&(i.hidden="headlines"!==l),"headlines"===l?y():"covid19"===l?C(cjBasics.lang.i18n("cj_i18n_06392","COVID-19")):"library"===l?N(!1):"searches"===l?N(!0):(r.cjceSetLoading(!0),t.textContent="",a=cjce.createElement("cjmd-container",{scrollable:!0,shadow:"transparentOnScroll"}),t.appendChild(a),n="",cjgApis.cache.getItem(c.account,"bm_cache_v33__news__magazines").then(function(e){Array.isArray(e)&&(n=JSON.stringify(e),e=S(e),a.appendChild(e))}),E("api/library/magazines").then(function(e){r.cjceSetLoading(!1),JSON.stringify(e)!==n&&(a.textContent="",cjgApis.cache.setItem(c.account,"bm_cache_v33__news__magazines",e),e=S(e),a.appendChild(e))}))}r=cjce.createElement("bm-ogb",{loading:!0,drawer:!0,serviceIcon:"news",serviceLabel:cjBasics.lang.i18n("cj_i18n_00425","News"),pageLabel:w[l].label,searchbox:{suggestHandler:function(e){return cjgApis.suggestquery.get({gAccount:c.account,hl:cjBasics.lang.current,q:e,ds:"n"})},onClear:function(){T()},onSubmit:function(e){C(e)},onMetaSubmit:function(e){e=cjBasics.urlParams.attach("https://www.google.com/search",{tbm:"nws",q:e,authuser:c.account.authuser});c.openTab(e)}},bmApis:c,onNewTab:function(){var e=w[l].newTabUrl;c.openTab(e)}}),e.appendChild(r),n=r.cjceDrawerEl,j=cjce.createElement("bm-navlist",{isSelector:!0,selectedId:"headlines",items:w,onChange:function(e){"weather"===e?(j.cjceSelectedId=l,c.pageManager.navigate("weather")):(e=w[l=e].label,r.cjceSetPageLabel(e),T())},onNewTab:function(e,a){c.openTab(a.newTabUrl)}}),n.appendChild(j),v().then(function(){var a=cjce.createElement("bm-drawerdropdown",{iconName:"__mdi:language",label:cjBasics.lang.i18n("cj_i18n_01343","Change edition"),selectedId:s,items:m,onChange:function(){var e=a.cjceSelectedId;browserStorage.sync.setItem("bm_pref__news__edition",e),s=e,y()}});n.appendChild(a)}),o=r.cjceSearchboxEl,c.setOnPageDisplayHandler(o.select),t=cjce.createElement("cjmd-container"),e.appendChild(t),T()})}();