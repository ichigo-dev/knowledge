"use strict";cjce.registerTemplate("bm-p-mapswithcompanion",function(a,c){var n,t,e,i="https://www.google.com",o=i,s=cjBasics.navigator.opera,r=(o=s?"https://maps.google.com":o)+"/maps/companion",l="0"===c.account.authuser?null:c.account.authuser,s=cjgApis.companion.getInitData(),u=s.id,m=s.hash,h=s.parameters,p=cjBasics.uniqueId.generate(),_="",d=cjBasics.lang.i18n("cj_i18n_00061","Explore"),g=["q","Wc"];j="bm_cache_v33__mapswithcompanion__functionnames";var b,j,f,w={set:function(a){B().then(function(){v(a),browserStorage.local.setItem(j,a),cjgApis.cache.setItem(c.account,j,a)})},restore:B};function v(a){Array.isArray(a)&&a.forEach(function(a,e){var c;"string"==typeof(c=a)&&/^[$A-Za-z]{1,3}$/.test(c)&&(g[e]=a)})}function B(){return b=b||cjgApis.cache.getItem(c.account,j).then(function(a){if(!Array.isArray(a))return browserStorage.local.getItem(j).then(v);v(a)})}function S(a){n&&n.cjceSendFrameCommand(a,o)}function I(a,e){S({method:e?"mapswithcompanionSubmitSearchQuery":"mapswithcompanionUpdateSearchQuery",value:a})}function y(a){a=cjBasics.urlParams.attach(i+"/maps/search/",{api:"1",query:a,authuser:"0"!==c.account.authuser?c.account.authuser:null});c.openTab(a)}function N(){var e;n=cjce.createElement("bm-iframe",{src:(e={bm_cid:"mapswithcompanion",bm_iid:p,bm_wiz:"1",bm_wfn:g.join("_"),hl:cjBasics.lang.current,authuser:"0"===c.account.authuser?null:c.account.authuser},Object.keys(h).forEach(function(a){e[a]=h[a]}),e.usegapi=null,cjBasics.urlParams.attach(r,e)+m),solid:"#fff",sandbox:"allow-scripts allow-forms allow-same-origin allow-popups",onLoad:function(){t.cjceSetLoading(!1)},onMessage:function(a){var e;"string"==typeof a&&a.startsWith("!_{")?(e=cjgApis.companion.handleOpenUrlMessage(a,u,c.account))&&c.openTab(e):"mapswithcompanionBackState"===a.bm_method?t.cjceSetBackState(Boolean(a.bm_value)):"mapswithcompanionNewFunctionNames"===a.bm_method?w.set(a.bm_value):"mapswithcompanionPageTitle"===a.bm_method&&t.cjceSetPageLabel(a.bm_value||d)}}),a.appendChild(n)}function x(){if(_)return y(_);var a=cjBasics.urlParams.attach(i+"/maps",{authuser:l});c.openTab(a)}function A(a){S({method:"mapswithcompanionToggleFocusState",value:a})}t=cjce.createElement("bm-ogb",{loading:!0,drawer:!0,serviceIcon:"maps",pageLabel:d,serviceLabel:cjBasics.lang.i18n("cj_i18n_00423","Maps"),searchbox:{onInput:function(a){I(a,!1)},onSubmit:function(a){I(_=a,!0),e.value="",A(!1),t.cjceNavigatorEl.cjceSetCollapseState(!1)},onMetaSubmit:y,onClear:function(){I(_="",!0)},onFocusChanged:A},bmApis:c,onBack:function(){S({method:"mapswithcompanionGoBack"}),e.value="",A(!1),t.cjceSetNavigatorCollapseState(!1)},onNewTab:x}),a.appendChild(t),e=t.cjceSearchboxEl,c.setOnPageDisplayHandler(function(){e.select(),A(!0)}),s=t.cjceDrawerEl,f={home:{iconName:"__mdi:place",label:d,shortcutId:"101"},locationsharing:{label:cjBasics.lang.i18n("cj_i18n_00863","Location sharing"),shortcutId:"590",iconName:"__mdi:record_voice_over",external:!0},places:{label:cjBasics.lang.i18n("cj_i18n_00127","Your places"),shortcutId:"557",iconName:"__mdi:place",external:!0},contributions:{label:cjBasics.lang.i18n("cj_i18n_00128","Your contributions"),shortcutId:"332",iconName:"__mdi:rate_review",external:!0},timeline:{label:cjBasics.lang.i18n("cj_i18n_00129","Your timeline"),shortcutId:"185",iconName:"__mdi:timeline",external:!0},yourdata:{label:cjBasics.lang.i18n("cj_i18n_01780","Your data in Maps"),shortcutId:"912",iconName:"__mdi:cjg_account",external:!0,divider:!0},mymaps:{label:cjBasics.lang.i18n("cj_i18n_00410","My Maps"),shortcutId:"167",iconName:"__mdi:file_map"},earth:{label:cjBasics.lang.i18n("cj_i18n_00471","Earth"),shortcutId:"49",iconName:"__mdi:earth",external:!c.servicesDatabase.earth}},f=cjce.createElement("bm-navlist",{items:f,selectedId:"home",onClick:function(a){"home"!==a&&c.pageManager.navigate(a)},onNewTab:function(a,e){e=e.newTabUrl||cjgShortcuts.getUrl(e.shortcutId,c.account);c.openTab(e)}}),s.appendChild(f),cjBasics.webRequest.handleIframeHeaders([r+"*bm_iid="+p+"*"],{handleFirefoxInject:!0,handleSwCache:!0}),w.restore().then(N)});