"use strict";!function(){var n=window,e=n.location,i=document,t="undefined"!=typeof chrome&&chrome||{};if(n.top!==n.self){var o=e.origin,o="https://www.google.com"===o||"https://maps.google.com"===o;if(o&&-1!==e.pathname.indexOf("/maps/companion")){var a,c,s,u,m,r=t.runtime.getURL("PATH/").replace("/PATH/",""),o=e.ancestorOrigins;if("object"==typeof o){if(0===o.length||2<o.length)return;if(o[0]!==r&&o[1]!==r)return;if(2===o.length&&!o[0].endsWith(".google.com"))return}-1!==e.search.indexOf("bm_wfn")&&(a=r.startsWith("moz-extension://"),c=!1,s=null,u='img[src*="x/arrow_back_"]',m='img[src*="x/search_"] + input',n.addEventListener("message",function(e){var t;e.origin===r&&(e.isTrusted||a)&&(t=(e=e.data||{}).bm_method,e=e.bm_value,"mapswithcompanionOpenInNew"!==t)&&("mapswithcompanionUpdateSearchQuery"===t?h(e):"mapswithcompanionSubmitSearchQuery"===t?(h(e),w()):"mapswithcompanionRemoveBlurHandler"!==t&&("mapswithcompanionGoBack"===t?v():"mapswithcompanionToggleFocusState"===t&&(e?i.documentElement.dataset.bmCsMapswithcompanionFocusState="1":setTimeout(function(){i.documentElement.dataset.bmCsMapswithcompanionFocusState="0"},200))))}),function e(){var t=Boolean(i.querySelector('img[src*="x/arrow_back_"]')),t=(c!==t&&(c=t,n.parent.postMessage({bm_method:"mapswithcompanionBackState",bm_value:t},r)),i.querySelector('h1[class*="__title-container"] > div[class*="__subtitle"]')),t=t&&t.textContent||null;s!==t&&(s=t,n.parent.postMessage({bm_method:"mapswithcompanionPageTitle",bm_value:t},r)),setTimeout(e,100)}(),function e(){var t,n=i.querySelector("#map > div:first-child > div:first-child");n?((t=i.createElement("button")).type="button",t.className="bm-cs-mapswithcompanion-fab",t.addEventListener("click",function(){h("Navigate"),w()}),n.appendChild(t)):setTimeout(e,100)}())}}function p(e,t){t=new InputEvent(t,{bubbles:!0,cancelable:!0});e.dispatchEvent(t)}function l(e,t){t=new KeyboardEvent(t,{bubbles:!0,cancelable:!0,keyCode:13});e.dispatchEvent(t)}function d(e,t){t=new FocusEvent(t,{bubbles:!0,cancelable:!0,view:window});e.dispatchEvent(t)}function b(e,t){t=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window});e.dispatchEvent(t)}function f(e){b(e,"mousedown"),b(e,"mouseup"),b(e,"click")}function h(e){var t,n,o;"string"==typeof e&&((t=i.querySelector(m))?((n=t).mapswithcompanionQueryInputPrepared||(n.mapswithcompanionQueryInputPrepared=!0,"object"==typeof n.__jsaction&&delete n.__jsaction.blur,(o=n.getAttribute("jsaction"))&&-1!==o.indexOf(";blur:")&&n.setAttribute("jsaction",o.replace(";blur:",";bluuuur:")),setTimeout(function(){d(n,"focus")},1e3)),t.value=e,p(t,"input")):(v(),setTimeout(function(){h(e)},10)))}function w(){var e,t;i.documentElement.dataset.bmCsMapswithcompanionFocusState="0",e=i.querySelector(m),t=0,setTimeout(function(){f(e)},t+=50),setTimeout(function(){d(e,"focus")},t+=50),setTimeout(function(){l(e,"keydown")},t+=50),setTimeout(function(){l(e,"keyup")},t+=50),setTimeout(function(){p(e,"input")},250)}function v(){var e=i.querySelector(u);e&&f(e)}}();