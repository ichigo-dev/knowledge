"use strict";!function(){var u=window,t=u.location,n="undefined"!=typeof chrome&&chrome||{},c=null;var d=n.runtime.getURL("PATH/").replace("/PATH/","");function f(e,t,n){u.parent.postMessage({bm_method:"cjgOriginRequest",bm_value:{success:n,response:t},bm_request:e},d)}function e(){var o=d.startsWith("moz-extension://");u.addEventListener("message",function(e){var t,n,s,r,i,a;e.origin===d&&(e.isTrusted||o)&&(t=(e=e.data||{}).bm_method,n=JSON.parse(u.atob(e.bm_value)),s=e.bm_request,"cjgOriginRequest"===t)&&(r=n.url,e=n.parameters,a=(i=e||{}).fetchAs||"text",new Promise(function(n,s){var o;return"undefined"==typeof XMLHttpRequest?fetch(r,{method:i.method||"GET",body:i.body}).then(function(e){var t=e.status;return t<200||299<t?e.text().then(function(e){throw{status:t,body:e}}):"json"===a?e.json():e.text()}):((o=new XMLHttpRequest).open(i.method||"GET",r),o.addEventListener("load",function(){var e=o.status,t=o.responseText;if(e<200||299<e)s({status:e,body:t});else if("json"===a)try{n(JSON.parse(t))}catch(e){s(e)}else"xml"===a||"html"===a?(c=c||new DOMParser,n(c.parseFromString(t,"xml"===a?"text/xml":"text/html"))):n(t)}),o.addEventListener("error",function(){var e=o.status,t=o.responseText;s({status:e,body:t})}),i.credentials&&"include"===i.credentials&&(o.withCredentials=!0),i.headers&&Object.keys(i.headers).forEach(function(e){var t=i.headers[e];null!=t&&o.setRequestHeader(e,t)}),"json"===a&&o.overrideMimeType("application/json"),o.send(i.body),o)}).then(function(e){f(s,e,!0)},function(e){f(s,e,!1)}))}),u.parent.postMessage({bm_method:"cjgProxyReady"},d)}!function(){if(u.top!==u.self){var e=t.origin;if("https://www.google.com"===e||"https://ogs.google.com"===e){var e=t.ancestorOrigins;if("object"!=typeof e||1===e.length&&e[0]===d)return e=(e="object"==typeof n.i18n&&"function"==typeof n.i18n.getMessage&&n.i18n)&&e.getMessage("@@extension_id")||d.split("://")[1]||"",t.pathname.startsWith("/cjg-proxy/"+e)?1:void 0}}}()||e()}();