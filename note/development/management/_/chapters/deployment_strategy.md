# 『デプロイ戦略』ノート

（最終更新： 2023-06-13）


## 目次

1. [デプロイ](#デプロイ)
1. [インプレースデプロイ](#インプレースデプロイ)
1. [ブルーグリーンデプロイ](#ブルーグリーンデプロイ)
1. [イミュータブルデプロイ](#イミュータブルデプロイ)
1. [ローリングデプロイ](#ローリングデプロイ)
1. [カナリアデプロイ](#カナリアデプロイ)


## デプロイ

**デプロイ**(Deploy)は、[ソフトウェア](../../../../computer/software/_/chapters/software.md#ソフトウェア)を開発環境から実稼働環境に展開する工程。開発者や運用チームによって実施され、新しい[バージョン](../../../../computer/software/_/chapters/package.md#バージョン)の[ソフトウェア](../../../../computer/software/_/chapters/software.md#ソフトウェア)が利用可能となる。


## インプレースデプロイ

**インプレースデプロイ**は、稼働中の[サーバ](../../../../computer/_/chapters/computer.md#サーバ)に対して直接[アプリケーション](../../../../computer/software/_/chapters/software.md#応用ソフトウェア)を配置、再起動する方法。最も直感的ではあるが、異常時のロールバックやダウンタイムといったユーザへの影響が発生する可能性がある。


## ブルーグリーンデプロイ

**ブルーグリーンデプロイ**は、既存の環境に影響を与えず、新しい環境に新しい[バージョン](../../../../computer/software/_/chapters/package.md#バージョン)を[デプロイ](#デプロイ)する方法。既存の環境とは分離された新しい環境に[デプロイ](#デプロイ)するため、安全性が高く十分なテストを実施することができる。また、ダウンタイムが発生せず、即時ロールバックが可能というメリットもある。一方で、同時に2つの環境を動作させる必要があるため、高コストである。


## イミュータブルデプロイ

**イミュータブルデプロイ**は、[ブルーグリーンデプロイ](#ブルーグリーンデプロイ)と同様、既存の環境とは分離された新しい環境に[デプロイ](#デプロイ)する方法。ただし、新環境への切り替え後に旧環境を削除することでコスをと抑える、という違いがある。ロールバックの際には、再度新しい環境を作り、古い[バージョン](../../../../computer/software/_/chapters/package.md#バージョン)を[デプロイ](#デプロイ)して切り替える。


## ローリングデプロイ

**ローリングデプロイ**は、一度にすべてのインスタンスに対して更新を行うのではなく、可用性を維持しながら順次更新を行う[デプロイ](#デプロイ)手法。稼働中の[サーバ](../../../../computer/_/chapters/computer.md#サーバ)が複数台で負荷分散されていることが前提。一部を切り離して[デプロイ](#デプロイ)を行い、再びオンラインに戻す（[インプレースデプロイ](#インプレースデプロイ)）、もしくは新しい環境に[デプロイ](#デプロイ)してから旧環境を削除する（[イミュータブルデプロイ](#イミュータブルデプロイ)）、という操作を繰り返す。


## カナリアデプロイ

**カナリアデプロイ**は、稼働中の[サーバ](../../../../computer/_/chapters/computer.md#サーバ)の一部だけに[アプリケーション](../../../../computer/software/_/chapters/software.md#応用ソフトウェア)を[デプロイ](#デプロイ)する方法。特定のユーザだけに新しい[アプリケーション](../../../../computer/software/_/chapters/software.md#応用ソフトウェア)を利用してもらい、新サービスの検証を行う、という目的で行われる。
