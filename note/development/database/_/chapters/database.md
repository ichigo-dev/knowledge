# 『データベース』ノート

（最終更新： 2023-09-24）


## 目次

1. [データベース](#データベース)
	1. [リレーショナルデータベース](#リレーショナルデータベース)
	1. [階層型データベース](#階層型データベース)
	1. [ネットワーク型データベース](#ネットワーク型データベース)
	1. [オブジェクト指向データベース](#オブジェクト指向データベース)
	1. [ハイパーテキストデータベース](#ハイパーテキストデータベース)
	1. [マルチメディアデータベース](#マルチメディアデータベース)
	1. [XMLデータベース](#xmlデータベース)
	1. [NoSQLデータベース](#nosqlデータベース)
1. [DBMS](#dbms)
	1. [RDBMS](#rdbms)
1. [スキーマ](#スキーマ)
	1. [3層スキーマ](#3層スキーマ)
	1. [外部スキーマ](#外部スキーマ)
	1. [概念スキーマ](#概念スキーマ)
	1. [内部スキーマ](#内部スキーマ)
1. [レプリケーション](#レプリケーション)
	1. [マスタ](#マスタ)
	1. [スレーブ](#スレーブ)
	1. [非同期レプリケーション](#非同期レプリケーション)


## データベース

**データベース**は、構造化したデータや情報を蓄積して、再利用できるようにした[システム](../../../../system/_/chapters/system.md#システム)。データの構造化の形式によって、[リレーショナルデータベース](#リレーショナルデータベース)や[ネットワーク型データベース](#ネットワーク型データベース)、[NoSQLデータベース](#nosqlデータベース)などに分類される。

### リレーショナルデータベース

**リレーショナルデータベース**（関係データベース）は、2次元の表形式でデータを管理する[データベース](#データベース)で、データを扱う[アプリケーション](../../../../computer/software/_/chapters/software.md#応用ソフトウェア)では最も一般的に用いられている。リレーショナルデータベースのことを単に[データベース](#データベース)と言う場合も多い。

### 階層型データベース

**階層型データベース**は、データをヒエラルキー構造で管理する[データベース](#データベース)。レコード間に階層構造をもたせた[木](../../../../basics/applied_mathematics/_/chapters/graph_theory.md#木)構造で表現され、親レコードと子レコードは[ポインタ](../../../../programming/_/chapters/data_type.md#ポインタ型)によって結合される。各要素が最大1つの親を持つ**シングルペアレント階層**となっている。

### ネットワーク型データベース

**ネットワーク型データベース**は、一連のレコードに階層構造があり、かつレコード間に複数のつながりがある、[グラフ](../../../../basics/applied_mathematics/_/chapters/graph_theory.md#グラフ)構造で表現される[データベース](#データベース)。各要素が2つ以上の親を持つことも許される**マルチペアレント階層**となっている。

### オブジェクト指向データベース

**オブジェクト指向データベース**は、データと手続きを一体化させた[オブジェクト](../../../../programming/_/chapters/object_oriented.md#オブジェクト)によりレコードを表現する[データベース](#データベース)。

### ハイパーテキストデータベース

**ハイパーテキストデータベース**は、複数の文書をそれぞれ[リンク](../../../../network/_/chapters/web.md#ハイパーリンク)させた形でもたせた[データベース](#データベース)。

### マルチメディアデータベース

**マルチメディアデータベース**は、テキストだけではなく、静止画や動画、音声などを管理することに最適化された[データベース](#データベース)。

### XMLデータベース

**XMLデータベース**は、タグを用いてデータの構造と意味を表す[データベース](#データベース)。

### NoSQLデータベース

**NoSQLデータベース**は、[リレーショナルデータベース](#リレーショナルデータベース)を操作するための言語である[SQL](./sql.md#sql)を使わない[データベース](#データベース)の総称。[リレーショナルデータベース](#リレーショナルデータベース)の機能の一部を捨てるなどの工夫によって、パフォーマンスを追求したものが多い。大量データを扱う[システム](../../../../system/_/chapters/system.md#システム)などと相性が良い。


## DBMS

**DBMS**（**データベース管理システム**: Database Management System）は、[データベース](#データベース)の管理や制御、データの検索などを行うための[ソフトウェア](../../../../computer/software/_/chapters/software.md#ソフトウェア)（[ミドルウェア](../../../../computer/software/_/chapters/middleware.md#ミドルウェア)）。代表的なものとして、OracleやMySQL(MariaDB)、PostgreSQL、SQL Server、DB2などがある。

### RDBMS

**RDBMS**(Relational Database Management System)は、[リレーショナルデータベース](#リレーショナルデータベース)を扱うための[DBMS](#dbms)。


## スキーマ

**スキーマ**は、[データベース](#データベース)の構造を定義したもの。[データベース](#データベース)のデータをどのように管理するかを定めた、一連の取り決め。

### 3層スキーマ

**3層スキーマ**は、[データベース](#データベース)を構造や形式（[スキーマ](#スキーマ)）を3つの階層に分けてそれぞれ定義する方式。[外部スキーマ](#外部スキーマ)、[概念スキーマ](#概念スキーマ)、[内部スキーマ](#内部スキーマ)の3階層に分ける考え方と、概念スキーマ、論理スキーマ、物理スキーマの3階層に分ける考え方が代表的。

### 外部スキーマ

**外部スキーマ**は、利用者（[アプリケーション](../../../../computer/software/_/chapters/software.md#応用ソフトウェア)）から見たデータの形式。実際に保存されているデータを[アプリケーション](../../../../computer/software/_/chapters/software.md#応用ソフトウェア)側でユーザが求めている形に加工した[ビュー](./sql.md#ビュー操作)を生成するレイヤ。

### 概念スキーマ

**概念スキーマ**は、開発者がわから見たデータの形式。[外部スキーマ](#外部スキーマ)を[データベース](#データベース)上で扱いやすくするために、重複した項目の排除や関連性に応じた分割などの正規化を行ったレイヤ。

### 内部スキーマ

**内部スキーマ**は、物理的なデータの格納形式。記憶装置上にどのようにデータを格納し、アクセスするのかといった、[データベース](#データベース)の物理的な構造を定義する。[インデックス](./index.md#インデックス)の定義による検索の高速化などが行われるレイヤ。


## レプリケーション

**レプリケーション**は、[データベース](#データベース)を複数の[ハードウェア](../../../../computer/hardware/_/chapters/hardware.md#ハードウェア)上にリアルタイムに複製する技術。複製した[データベース](#データベース)は定期的に[マスタ](#マスタ)となる[データベース](#データベース)と同期しており、[マスタ](#マスタ)の[データベース](#データベース)が障害などによって停止した際にも継続して[システム](../../../../system/_/chapters/system.md#システム)を運用することができる。[MySQL](#dbms)などの[DBMS](#dbms)では、シングル[マスタ](#マスタ)、マルチ[スレーブ](#スレーブ)の構成がサポートされている。

### マスタ

**マスタ**は、[データベース](#データベース)の[レプリケーション](#レプリケーション)において、[クライアント](../../../../system/_/chapters/system_processing_model.md#クライアントサーバシステム)からの更新と参照の両方の[クエリ](./sql.md#クエリ)を受け付ける[サーバ](../../../../system/_/chapters/system_processing_model.md#クライアントサーバシステム)。マスタでは、データの更新処理のみを記録する**バイナリログ**が作成される。

### スレーブ

**スレーブ**は、[データベース](#データベース)の[レプリケーション](#レプリケーション)において、[クライアント](../../../../system/_/chapters/system_processing_model.md#クライアントサーバシステム)から参照の[クエリ](./sql.md#クエリ)のみを受け付ける[サーバ](../../../../system/_/chapters/system_processing_model.md#クライアントサーバシステム)。

多くの場合、スレーブではI/O[スレッド](../../../../computer/software/_/chapters/operating_system.md#スレッド)と[SQL](./sql.md#sql)[スレッド](../../../../computer/software/_/chapters/operating_system.md#スレッド)が稼働している。I/O[スレッド](../../../../computer/software/_/chapters/operating_system.md#スレッド)で[ファイル](../../../../computer/software/_/chapters/file_system.md#ファイル)に[クエリ](./sql.md#クエリ)を書き込んでおき、[SQL](./sql.md#sql)[スレッド](../../../../computer/software/_/chapters/operating_system.md#スレッド)でその[クエリ](./sql.md#クエリ)を実行することで、複製の遅延を軽減している。スレーブでは、I/O[スレッド](../../../../computer/software/_/chapters/operating_system.md#スレッド)が[マスタ](#マスタ)からの更新ログを**リレーログ**に記録する。

### 非同期レプリケーション

**非同期レプリケーション**は、[データベース](#データベース)の[レプリケーション](#レプリケーション)において、[マスタ](#マスタ)から[スレーブ](#スレーブ)へのデータの複製をリアルタムに行わず、一定期間をおいてから反映する方法。一定期間分の更新をまとめて行うため、更新処理が高速になる一方で、データの最新性が保たれないというデメリットもある。
