# Git基本編


## 目次

1. [リポジトリの作成](#リポジトリの作成)
1. [リポジトリの接続](#リポジトリの接続)
1. [変更の保存](#変更の保存)
	1. [ステージング](#ステージング)
	1. [コミットの作成](#コミットの作成)
	1. [gitignoreとgitkeep](#gitignoreとgitkeep)
1. [変更の比較](#変更の比較)
1. [変更の退避](#変更の退避)
1. [状態の確認](#状態の確認)
1. [履歴の確認](#履歴の確認)


## リポジトリの作成

リポジトリを作成するには、Gitの管理対象としたいディレクトリで `git init` を実行する。

```bash
$ git init
```

もしくは、既存のGitリポジトリを自身の環境にクローンする場合は `git clone` を実行する。サーバからリポジトリをクローンする際、セキュリティの観点からSSHによる認証が必要となる場合がある。SSHによる認証では、SSHキーペアを作成してサーバに公開鍵をアップロードし、ローカルのコンピュータには秘密鍵を保存しておく。

```bash
$ git clone <url>
```


## リポジトリの接続

接続先に関する操作には `git remote` を使用する。

```bash
# 接続先の一覧を確認
$ git remote

# 接続先の一覧を確認（詳細）
$ git remote -v

# 新しい接続先の追加
$ git remote add <name> <url>

# 接続先を削除
$ git remote rm <name>

# 接続先の名前を変更
$ git remote rename <old-name> <new-name>
```


## 変更の保存

Gitではコミットを作成することでその時のファイルの変更内容を記録することができる。

### ステージング

ファイルの変更をステージングするには `git add` を使用する。

```bash
# 全てのファイルをステージング
$ git add .

# ファイル、ディレクトリを指定してステージング
$ git add <file>
$ git add <directory>
```

### コミットの作成

コミットを作成するためには `git commit` を使用する。このコマンドを使用すると `core.editor` 設定値に登録されたエディタを開き、コミットメッセージの入力を行う。

```bash
$ git commit
```

`-m` オプションを追加することで、コミットメッセージをコマンド中に直接含めることもできる。

```bash
$ git commit -m "commit message"
```

## 変更の比較

Gitは2つのコミットやブランチ、ファイルなどの差分を比較するためのツールを備えている。

---

2つのデータセットの比較には `git diff` コマンドを使用する。

```bash
# ワークツリーとステージの差分を確認
$ git diff

# ワークツリーとHEADの差分を確認
$ git diff HEAD

# ワークツリーと特定のコミットの差分を確認
$ git diff <commit number>

# ワークツリーと特定のコミットの差分をファイル指定で確認
$ git diff <commit number> <path>
```


## 変更の退避

作業中の変更があるときに緊急のタスクが割り当てられた場合などに、一時的に変更を退避しておくことができる。退避に使用される領域は**スタッシュ**と呼ばれ、一度に複数のスタッシュを作成することができる。

---

作業中の内容を退避するには `git stash` コマンドを使用する。

```bash
# スタッシュの一覧を表示
$ git stash list

# ワークツリーの変更を退避
$ git stash

# 説明付きでワークツリーの変更を退避
$ git stash save "discription"

# 直近に退避した内容をワークツリーに適用
$ git stash apply

# 直近に退避した内容をワークツリーに適用（スタッシュから削除）
$ git stash pop

# スタッシュ指定で退避した内容をワークツリーに適用
$ git stash apply "stash@{n}"

# スタッシュ指定で退避した内容をワークツリーに適用（スタッシュから削除）
$ git stash pop "stash@{n}"

# スタッシュを指定して削除
$ git stash drop "stash@{n}"

# スタッシュを一括削除
$ git stash clear
```


## 状態の確認

ワークツリーとステージの状態を確認するには `git status` を使用する。

```bash
$ git status
```
