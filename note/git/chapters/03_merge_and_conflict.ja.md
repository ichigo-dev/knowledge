# マージとコンフリクト


## 目次

1. [マージの仕組み](#マージの仕組み)
	1. [Fast-forwardマージ](#fast-forwardマージ)
	1. [3wayマージ](#3wayマージ)
1. [コンフリクト](#コンフリクト)


## マージの仕組み

マージはあるブランチを別のブランチへ統合する操作のことで、次の2つのパターンが存在する。

### Fast-forwardマージ

作業中のブランチAから新しいブランチBを作成し、ブランチBでの作業後にブランチAにマージするという場合、ブランチBでの作業中にブランチAでコミットが1度も行われなかった場合は**Fast-forwardマージ**が実行される。Fast-forwardマージではひとつのブランチでしか作業が行われていないことが分かっているため、単純にブランチBの最新の状態がブランチAに反映される動作となる。

### 3wayマージ

2つのブランチでそれぞれコミットが存在する状態で、これらのブランチをマージしようとした場合には**3wayマージ**（**Non-Fast-forwardマージ**）が行われる。3wayマージでは、それぞれのブランチに加えられた変更と2つのブランチの重複（分岐直前のコミット）の3つの比較に基づいてマージが行われる。Gitはマージ処理の結果を受けて、自動的に**マージコミット**を作成する。


## コンフリクト

マージは基本的にGitが自動的にそれぞれのブランチの変更箇所を統合するが、同一ファイルの同一箇所に変更が加えられていた場合はどちらの変更を優先するかを人間が判断する必要がある。このような状態を**コンフリクト**（衝突）という。

コンフリクトが発生した場合には手動でマージコミットを作成する必要がある。Gitはファイル内でコンフリクトが発生した個所をマークするため、その部分を確認して手動で調整しコミットを行う。
