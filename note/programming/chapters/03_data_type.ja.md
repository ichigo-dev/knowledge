# データ型


## 目次

- [型](#型)
- [プリミティブ型](#プリミティブ型)
	- [文字型](#文字型)
	- [整数型](#整数型)
	- [固定小数点数型](#固定小数点数型)
	- [浮動小数点数型](#浮動小数点数型)
	- [ブーリアン型](#ブーリアン型)
	- [ポインタ型](#ポインタ型)
	- [参照型](#参照型)


## 型

コンピュータが扱うデータを性質や属性によって分類したものを**データ型**という。プログラム中で使用するデータについても、それがどの型のデータであるかがはっきりしていないといけない。静的型付け言語においてはプログラマがソースコード中に型を明示することによってコンパイル時にデータの型が決まり、動的型付け言語においては実行時に型を自動的に判定する。

## プリミティブ型

多くのプログラミング言語では**プリミティブ型**（**基本データ型**、**原始型**）が標準的に用意されている。プリミティブ型に属する型はプログラミング言語においてそれ以上分解することができないシンプルな型であり、基本的にプロセッサが最も高速に演算できるデータとなる。

### 文字型

**文字型**（ `char` ）は自然言語の1文字を格納するための型。1バイトで表現できる**ASCII文字**だけでなく、文字種によって**マルチバイト文字**に対応しているものもある。文字セットとしては**UTF-8**や**Unicode**などのサポートが一般的。文字型の配列を文字列として扱う言語もある。

### 整数型

**整数型**（ `int`, `short`, `long` ）は整数値を格納するための型。1バイトが表現できる範囲は0~255(2の8乗)であるため、より大きい数値を扱えるように2バイトや4バイト、8バイトの整数型などを用意しているプログラミング言語もある。**符号付き整数**と**符号なし整数**をサポートしているものもあり、値が負にならないことが分かっている場合には符号なし整数を用いた方が使用できる数の範囲が増える。

### 固定小数点数型

**固定小数点数型**（ `fixed` ）は小数を扱うための型で、どのビットを小数点とするかをあらかじめ決めておく。データの解析は容易であるが、表現できる数値の範囲が限定されてしまうため、後述の浮動小数点数を用いる場合が多い。

### 浮動小数点数型

**浮動小数点数型**（ `float`, `double` ）は小数を扱うための型で、IEEE 754によって規定された浮動小数点方式と呼ばれる方式を用いる。

10進数において $12.345$ という数を浮動小数点数で表現すると、 $+0.012345 \times 10^3$ となる。この時 $+$ にあたる部分を符号部、 $^3$ にあたる部分を指数部、 $0.012345$ にあたる部分を仮数部という。また浮動小数点方式では、数値の有効範囲数を広げるために**正規化**（指数部を調整することで仮数部の最上位桁を0以外にする作業）を行う。前の例であれば、 $+0.12345 \times 10^2$ が正規化された浮動小数点数の表現となる。コンピュータが扱う数値は2進数であるため、**基数**（10進数であれば10、2進数であれば2など、計算の基準となる数）は2となる。

- **符号部**には、その数が正(0)であるか負(1)であるかを格納する
- **指数部**には、基数に対する指数部分を2進数表記したものを格納する（指数部が負の数の場合は**2の補数**表現を使用）
- **仮数部**には、正規化した小数点以下の値を格納する

浮動小数点数には単精度と倍精度があり、**単精度**では32ビット（符号部1ビット、指数部8ビット、仮数部23ビット）、**倍精度**では64ビット（符号部1ビット、指数部11ビット、仮数部52ビット）で表現する。

固定小数点数では限られた範囲の中であれば**誤差**なく計算することができるが、浮動小数点数では近似計算を前提としているため誤差が発生する。コンピュータでは無限小数や無理数の正確な値を扱うことができないため、有限の桁数で近似されている。10進数で表したときに有限小数であっても、2進数で表すと無限小数となる場合もあるので注意が必要（ $0.01$ など）。浮動小数点数における誤差には次のようなものがある。

### ブーリアン型

**ブーリアン型**（ `bool`, `boolean` ）は真偽値を扱うための型で、 `true` か `false` のどちらかの値が格納される。この型には対しては、論理積（ `AND` ）、論理和（ `OR` ）、排他的論理和（ `XOR` ）、同値、非同値、否定といった論理演算が可能。条件分岐において、条件式の評価結果として用いられる。

### ポインタ型

**ポインタ型**は変数や関数が置かれたメモリ上のアドレスを格納するための特殊な型。プログラム中で利用される変数や関数などのリソースはメモリ上で固有のアドレスを持っており、アドレスを知っていればそのデータにアクセスすることができる。ポインタが指す先のデータを直接読み書きすることができたり、メモリアドレスを足し引きして別のアドレスにアクセスできるというメリットがあるが、一方で予期しないアドレスのデータを変更してしまう場合があるなど深刻なバグにつながるという欠点もある。

![ポインタ](/note/programming/images/pointer.ja.jpg)

### 参照型

**参照型**はポインタ型と同様、変数や関数が置かれたメモリ上のアドレスを指す。ポインタ型と異なり、参照先に書き込むことはできない読み込み専用のデータ。また、参照先にデータが存在しない（未初期化状態）であることが禁止されている。これらの特性から、ポインタに比べて安全に利用できるという利点がある。
