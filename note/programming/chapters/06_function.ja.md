# 関数


## 目次

1. [プログラミングにおける関数](#プログラミングにおける関数)
1. [引数](#引数)
1. [戻り値](#戻り値)
1. [関数定義](#関数定義)
1. [関数呼び出し](#関数呼び出し)
1. [標準関数](#標準関数)


## プログラミングにおける関数

**関数**（**サブルーチン**）は処理ブロックに識別子をつけて再利用可能にしたもので、プログラム中で関数呼び出しを行うことで実行できる。


## 引数

関数には、**引数**として実行時に動的に情報を渡すことができる。関数定義では引数として受け取る情報に識別子をつけた**仮引数**を用いて処理を記述する。関数呼び出しの際に実際に処理したい情報を**実引数**として渡すことで、仮引数部分がデータに置き換えられて処理が実行される。関数は引数を複数個受け取ることも可能。仮引数にデフォルト値を指定しておくことで、関数呼び出し側で引数を渡さなかった場合にデフォルト値で置き換えて処理を実行することができ、このような引数を**オプション引数**（**任意引数**）という。また、関数定義の際に引数の数を固定せず、呼び出し側で任意の数の引数を渡して処理を実行するような**可変長引数**をサポートしている言語もある（文字列のフォーマットなどによく利用される）。


## 戻り値

関数は処理を行った結果として、**戻り値**を返却する。通常戻り値は1つしか返すことができないため、複数の値を返却したいような場合には、値をオブジェクトとして返却したり、引数として受け取ったポインタに直接値を書き込んだりする。

関数内部で用意されたローカル変数（局所変数）は、関数の処理ブロック内部でのみ有効な変数であるため、戻り値として使用する場合には注意が必要となるプログラミング言語もある。戻り値として返却したい値がプリミティブ型の場合にはデータがディープコピーされるため問題ないが、シャロ―コピーが発生するような値を返却したい場合には、関数の処理が終わった時点でローカル変数が破棄されてしまうため**ダングリングポインタ**（無効なポインタ）が発生する可能性がある。そのため、明示的に確保したメモリに確保したデータのポインタを返却したり、引数として受け取ったポインタに直接データを格納したりといった工夫が必要となる。

関数は `return` 文を用いて戻り値を呼び出し元に返却することができる。


## 関数定義

**関数定義**では関数の識別子、処理内容、仮引数リスト、戻り値を記述する。

```c
// C言語

// 関数定義
int add( int a_, int b_ )
{
    int result = a_ + b_;
    return result;
}
```

```php
<?php

// PHP

// 関数定義
function add( $a_, $b_ )
{
    $result = $a_ + $b_;
    return $result;
}

?>
```

```javascript
// JavaScript

function add( a_, b_ )
{
    let result = a_ + b_;
    return result;
}
```


## 関数呼び出し

**関数呼び出し**では関数の識別子と仮引数リストに対応した実引数を記述する。

```c
// C言語

// 関数プロトタイプ宣言
int add( int, int );

// メイン関数
int main()
{
    int a = 5;
    int b = 10;

    // 関数呼び出し
    int result = add(a, b);
    printf("Result: %d\n", result);

    return 0;
}

// 関数定義
int add( int a_, int b_ )
{
    int result = a_ + b_;
    return result;
}
```

```php
<?php

// PHP

// 関数定義
function add( $a_, $b_ )
{
    $result = $a_ + $b_;
    return $result;
}

$a = 5;
$b = 10;

// 関数呼び出し
$result = add($a, $b);
echo("Result: " . $result);

?>
```

```javascript
// JavaScript

// 関数定義
function add( a_, b_ )
{
    let result = a_ + b_;
    return result;
}

let a = 5;
let b = 10;

// 関数呼び出し
let result = add(a, b);
console.log("Result: " + result);
```


## 標準関数

**標準関数**は各プログラミング言語の仕様としてあらかじめ用意されている関数。使い方は通常の関数と同様で、仕様として定義されているためプログラマが定義・実装する必要はない。用意されている関数の詳細については、各プログラミング言語のドキュメントなどを参照する必要がある。
