# 『テクニックとアンチパターン』ノート

（最終更新： 2023-10-07）


## 目次

1. [リファクタリング](#リファクタリング)
1. [ガード節](#ガード節)
1. [DRY原則](#dry原則)
1. [アンチパターン](#アンチパターン)
1. [ハードコーディング](#ハードコーディング)
	1. [マジックナンバー](#マジックナンバー)
1. [スマートUI](#スマートui)


## リファクタリング

**リファクタリング**は、[プログラム](./programming.md#プログラム)の動作や振る舞いを変えることなく、内部の設計や構造を見直すことで、[コード](./programming.md#ソースコード)を理解や修正がしやすいように整える作業。[システム](../../../system/_/chapters/system.md#システム)を長期的に運用したり、仕様変更に強くしたりするために重要な工程。


## ガード節

**ガード節**（**アーリーリターン**、**早期リターン**）は、[プログラミング](./programming.md#プログラミング)のテクニックのひとつで、ある条件が満たされていない場合に[コード](./programming.md#ソースコード)の実行を中断し、特定の制御を行う仕組み。主に[反復処理](./control_flow.md#反復)や[関数](./function.md#関数)の中で使用される。

例えば、条件を満たしている場合にポイントを付与する、以下のような[関数](./function.md#関数)を考える。

```js
function give_family_point( member_, point_ = 100 )
{
    if( member_.is_gold_rank() )
    {
        if( member_.has_children() )
        {
            if( member_.with_family() )
            {
                member_.give_point(point_);
            }
        }
    }
}
```

これは[条件分岐](./control_flow.md#条件分岐)の[ネスト](./control_flow.md#ネスト)が深く、非常に読みづらい[コード](./programming.md#ソースコード)となっている。そこで、ガード節を用いてこの[関数](./function.md#関数)を[リファクタリング](#リファクタリング)すると、以下のようになる。

```js
function give_family_point( member_, point_ = 100 )
{
    // ガード節によるアーリーリターン
    if( member_.is_gold_rank() === false ) return;
    if( member_.has_children() === false ) return;
    if( member_.with_family() === false ) return;

    member_.give_point(point_);
}
```

ガード節を用いると、可読性が向上する他に、条件ブロックと処理ブロックを分離できるというメリットがある。また、 `return` だけではなく、 `break` や `continue` を用いても同様の[リファクタリング](#リファクタリング)が可能。


## DRY原則

**DRY原則***(Don't Repeat Yourself)は，同じ[コード](./programming.md#ソースコード)を繰り返し記述しないことを指す[プログラミング](./programming.md#プログラミング)における原則。これを厳守することにより、[コード](./programming.md#ソースコード)の可読性や保守性を向上させることができ、[バグ](./programming.md#バグ)の発生を防止することができる。

何度も使用する処理を[関数](./function.md#関数)にまとめたり、値をハードコーディングせずに[変数](./variable.md#変数)として定義することでDRY原則を適用することができる。


## アンチパターン

**アンチパターン**は、[ソフトウェア](../../../computer/software/_/chapters/software.md#ソフトウェア)開発において、よくある失敗のパターン。このようなパターンに当てはまる[プログラム](./programming.md#プログラム)は解析や改修が難しく、プロジェクトが失敗する可能性が高まってしまう。


## ハードコーディング

**ハードコーディング**（**ハードコード**）は、[プログラミング](./programming.md#プログラミング)の[アンチパターン](#アンチパターン)の一種で、[ソースコード](./programming.md#ソースコード)中に直接的に値を書き込む形でデータを挿入することを指す。ハードコーディングが多用された[プログラム](./programming.md#プログラム)は可読性や保守性が低下し、[バグ](./programming.md#バグ)を生み出しやすくなる。

### マジックナンバー

**マジックナンバー**は、[プログラミング](./programming.md#プログラミング)において、[ソースコード](./programming.md#ソースコード)中に[ハードコーディング](#ハードコーディング)された数値。その意味や意図が記述した本人以外には自明ではないため、可読性や保守性の低下を招くものとして、原則避けるべきとされている。


## スマートUI

**スマートUI**は、[GUI](../../../computer/software/_/chapters/software.md#gui)[ソフトウェア](../../../computer/software/_/chapters/software.md#ソフトウェア)や[Web](../../../network/_/chapters/web.md#web)[システム](../../../system/_/chapters/system.md#システム)の[プログラミング](./programming.md#プログラミング)における[アンチパターン](#アンチパター)の一種で、表示関連の[ソースコード](./programming.md#ソースコード)中に表示以外のロジックが実装されている構造を指す。特に、複雑なロジックが表示関連の[コード](./programming.md#ソースコード)に紛れ込んでいると、デザイン変更により機能に不具合が発生するなど、保守性の低下を招く。
