# 『システムの処理形態』ノート

（最終更新： 2023-04-10）


## 目次

1. [集中処理](#集中処理)
	1. [集中システム](#集中システム)
	1. [バッチ処理](#バッチ処理)
	1. [リアルタイム処理](#リアルタイム処理)
	1. [対話型処理](#対話型処理)
	1. [リアルタイム制御処理](#リアルタイム制御処理)
	1. [トランザクション処理](#トランザクション処理)
	1. [ACID特性](#acid特性)
1. [分散処理](#分散処理)
	1. [分散システム](#分散システム)
	1. [RPC](#rpc)
	1. [分散オブジェクト](#分散オブジェクト)
	1. [ロードシェアリングシステム](#ロードシェアリングシステム)
	1. [P2P](#p2p)
	1. [クライアントサーバシステム](#クライアントサーバシステム)
	1. [リクエスト](#リクエスト)
	1. [レスポンス](#レスポンス)
	1. [2層クライアントサーバシステム](#2層クライアントサーバシステム)
	1. [3層クライアントサーバシステム](#3層クライアントサーバシステム)
	1. [ストアドプロシージャ](#ストアドプロシージャ)
	1. [シンクライアントシステム](#シンクライアントシステム)


## 集中処理

**集中処理**は、データや情報を1か所にまとめてホスト[コンピュータ](../../../computer/_/chapters/computer.md#コンピュータ)で処理する[システム](./system.md#システム)の形態。データの更新やセキュリティを一括で管理できる一方で、[コンピュータ](../../../computer/_/chapters/computer.md#コンピュータ)がダウンすると[システム](./system.md#システム)全体が機能しなくなってしまう。

### 集中システム

**集中システム**(Centralized System)は、処理形態として[集中処理](#集中処理)を用いるような[システム](./system.md#システム)。

### バッチ処理

**バッチ処理**は、データを一定期間蓄積しておき、一括して処理する形態。データ量の多い処理に適している。

### リアルタイム処理

**リアルタイム処理**は、処理要求が発生してから即座に処理を行い、決められた時間までに完了する形態。

### 対話型処理

**対話型処理**は、利用者と[システム](./system.md#システム)がやり取りしながら処理を進めていく形態。速い応答が期待される[システム](./system.md#システム)などで採用される場合が多く、[プログラム](../../../programming/_/chapters/programming.md#プラグラム)の開発にも適している（対話型[インタプリタ](../../../basics/information_theory/_/chapters/compiler_theory.md#インタプリタ)、対話型[シェル](../../../computer/linux/_/chapters/shell_and_terminal.md#シェル)）。

### リアルタイム制御処理

**リアルタイム制御処理**は、[制御システム](../../../basics/measurement_and_control/_/chapters/control_theory.md#制御システム)で刻々と変化する情報を元に即座に計算処理を行い、その結果を[制御システム](../../../basics/measurement_and_control/_/chapters/control_theory.md#制御システム)に出力する形態。制御結果を[システム](./system.md#システム)にフィードバックして次の制御を決めるPID制御などが代表的。

### トランザクション処理

**トランザクション処理**（**オンライントランザクション処理**、**OLTP**）は、発生したデータを処理し、その都度確定しながら進めていく形態。一連の処理をまとめておき、その処理全体が成功するか失敗するかの2つの結果しか起こりえない。トランザクション処理は[ACID特性](#acid特性)を保証している必要がある。

### ACID特性

**ACID特性**(Atomicity, Consistency, Isolation, Durability)は[トランザクション処理](#トランザクション処理)が保証するべき4つの性質を合わせた用語。

**原始性・不可分性**(Atomicity)はある操作がそれ以上細かい単位や要素に分割されない性質。原始性を持つ操作は、「実行される」か「実行されない」かのどちらかしか起きないことが保障されており、[データベース](../../../development/database/_/chapters/basic_knowledge_of_database.md#データベース)の**トランザクション**（複数の操作をひとつにまとめ上げて管理すること）は原始性を持つ操作となっている。トランザクションは「全て成功」か「全て失敗」のいずれかとなることが保障されている。

**一貫性・整合性**(Consistency)はあるデータが更新された場合に必ず変更後の状態を取得できる性質。変更中のデータを別の操作により取得しようとした場合、古いデータが参照されることなく最新のデータが取得できることが保障される（**強整合性**）。トランザクションの前後ではデータの整合性が保たれ、矛盾が発生しないことが保障されている。

**独立性・隔離性**(Isolation)はある操作の処理中はその内容が他の操作から隠蔽される性質。独立性を持つ操作は別の処理が並行して実行されたとしても影響を受けないことが保障されており、[データベース](../../../development/database/_/chapters/basic_knowledge_of_database.md#データベース)のトランザクションは独立性を持つ操作となっている。トランザクションを複数同時に実行しても、単独で実行した場合と同じ結果を得られることが保障されている。

**永続性・持続性**(Durability)は操作結果が失われない確率あるいは性質。数値としての永続性は、1から**AFR**（年間故障率）を引いた確率で表される。また、[データベース](../../../development/database/_/chapters/basic_knowledge_of_database.md#データベース)のトランザクションは永続性を持つ操作となっており、トランザクションの結果は障害が発生しても失われてはいけない。トランザクションにおけるデータ操作はログに記録され、障害発生時にはログをもとに更新を反映させるといった対策が施される。

また強整合性と比較して用いられる**結果整合性**は、更新が反映されるまでに時間がかかる場合に保存前や変更前の状態が見える可能性がある性質のこと。一貫性を保とうとした場合、あるユーザが操作中のデータに他のユーザが一時的にアクセスできなくなるため、[可用性](./system_performance_evaluation.md#可用性)を犠牲にすることとなる。強整合性が必要となるか結果整合性がとれていれば問題ないかは[システム](./system.md#システム)や処理に応じて判断する必要がある。


## 分散処理

**分散処理**は、複数の[コンピュータ](../../../computer/_/chapters/computer.md#コンピュータ)を[ネットワーク](../../../network/_/chapters/basic_knowledge_of_network.md#ネットワーク)で接続し、処理能力や資源を共有しあって効率の良い処理を実現する処理形態。1台の[コンピュータ](../../../computer/_/chapters/computer.md#コンピュータ)が停止しても[システム](./system.md#システム)への影響が少なく、拡張性も高い。また、[システム](./system.md#システム)の利用者が場所を選ばずに機能にアクセスできるという利点もあり、このような性質を**アクセス透過性**という。一方で、データの不整合が発生してしまったり、保守が複雑になるといったデメリットもある。

### 分散システム

**分散システム**(Distributed System)は、処理形態として[分散処理](#分散処理)を用いるような[システム](./system.md#システム)。

### RPC

**RPC**（**遠隔手続き呼び出し**: Remote Procedure Call）は、[ネットワーク](../../../network/_/chapters/basic_knowledge_of_network.md#ネットワーク)によって繋がれた他の[コンピュータ](../../../computer/_/chapters/computer.md#コンピュータ)上の[プログラム](../../../programming/_/chapters/prgramming.md#プログラミング)を実行する仕組みで、[分散処理](#分散処理)実行の基盤となる。

有名なRPC[システム](./system.md#システム)としては、Sun Microsystemsの**SunRPC**(ONC RPC)や**アポロ**、IBMとDECが共同開発した**DCE**(Distributed Computing Environment)がある。

### 分散オブジェクト

**分散オブジェクト**(Distributed Object)は、[RPC](#rpc)のような単なる[関数](../../../programming/_/chapters/function.md#関数)の呼び出しではなく、[オブジェクト](../../../programming/_/chapters/object_oriented.md#オブジェクト)自体をリモートに配置する技術。

代表的な分散オブジェクトには、**CORBA**(Common Object Request Broker Architecture)やMicrosoftが開発した**DCOM**(Distributed Component Object Model)がある。これらは、**IDL**(Interface Definition Language)によって[オブジェクト](../../../programming/_/chapters/object_oriented.md#オブジェクト)[メソッド](../../../programming/_/chapters/object_oriented.md#メソッド)を定義し、[ネットワーク](../../../network/_/chapters/basic_knowledge_of_network.md#ネットワーク)越しにシリアライズしたメッセージを交換する仕組みであった。

### ロードシェアリングシステム

**ロードシェアリングシステム**は、同じ機材などを複数用意して、処理を振り分けることで負荷を分散する処理形態。

### P2P

**P2P**（**ピアツーピア**: peer to peer）は、[コンピュータ](../../../computer/_/chapters/computer.md#コンピュータ)同士の接続形態のひとつで、処理が集中しないよう特定の[サーバ](#クライアントサーバシステム)を置かず、上下関係も持たない。単純に接続する**ピュア型**や、検索用の[サーバ](#クライアントサーバシステム)を置く**ハイブリット型**、処理の高いノードが検索と管理を担う**スーパーノード型**がある。

### クライアントサーバシステム

**クライアントサーバシステム**は、サービスを提供する**サーバ**と、サービスを要求する**クライアント**で役割を分担する[システム](./system.md#システム)の形態。クライアントとサーバで負荷を分散できるほか、互いの実装が独立しているため、クライアントを[マルチプラットフォーム](../../../computer/software/_/chapters/software.md#マルチプラットフォーム)にしたり、サーバの実装に用いる[プログラミング言語](../../../programming/_/chapters/programming.md#プログラミング言語)を自由に選択できるといった利点がある。

サーバに対してクライアントの数が多くなるため、サーバの負荷を減らす工夫が必要となる。

### リクエスト

**リクエスト**は、[クライアントサーバシステム](#クライアントサーバシステム)において、[クライアント](#クライアントサーバシステム)が[サーバ](#クライアントサーバシステム)に対してサービスを要求すること。

### レスポンス

**レスポンス**は、[クライアントサーバシステム](#クライアントサーバシステム)において、[サーバ](#クライアントサーバシステム)が[クライアント](#クライアントサーバシステム)の[リクエスト](#リクエスト)を受けてサービスを提供すること。

### 2層クライアントサーバシステム

**2層クライアントサーバシステム**は、[クライアント](#クライアントサーバシステム)が[ユーザインタフェース](../../../computer/software/_/chapters/software.md#ui)とデータの加工処理を行い、[サーバ](#クライアントサーバシステム)は[データベース](../../../development/database/_/chapters/basic_knowledge_of_database.md#データベース)へのアクセスのみを行うような[クライアントサーバシステム](#クライアントサーバシステム)。サービスを要求する[クライアント](#クライアントサーバシステム)と依頼された処理を提供する[サーバ](#クライアントサーバシステム)との組み合わせからなる構成。

### 3層クライアントサーバシステム

**3層クライアントサーバシステム**では、[ユーザインタフェース](../../../computer/software/_/chapters/software.md#ui)（プレゼンテーション層）、データの加工処理（ファンクション層）、[データベース](../../../development/database/_/chapters/basic_knowledge_of_database.md#データベース)へのアクセス（データベース層）、という3つのレイヤで[システム](./system.md#システム)を構成する。それぞれの役割は[クライアント](#クライアントサーバシステム)、[アプリケーション](../../../computer/software/_/chapters/software.md#応用ソフトウェア)[サーバ](#クライアントサーバシステム)、[データベース管理システム](../../../development/database/_/chapters/basic_knowledge_of_database.md#dbms)が担う。

- **プレゼンテーション層**（[クライアント](#クライアントサーバシステム)側）: ユーザからの入力を受け取り、[サーバ](#クライアントサーバシステム)から受け取った情報を提供する
- **ファンクション層**（[サーバ](#クライアントサーバシステム)側）: データの加工や取得、その他[システム](./system.md#システム)に必要な処理を行う
- **データベース層**（[サーバ](#クライアントサーバシステム)側）: [データベース](../../../development/database/_/chapters/basic_knowledge_of_database.md#データベース)にアクセスし、データを管理する

### ストアドプロシージャ

データベースに対する一連の処理の流れを1つのプログラムにまとめておき（プロシージャ）、それをデータベース管理システムに保存したもの。複雑なSQL文の呼び出しを簡易化することができる。

### シンクライアントシステム

**シンクライアントシステム**は、クライアント側のコンピュータに最低限の機能のみを持たせ、実際の処理やデータの蓄積をサーバ側で行うシステム。クライアント側にデータを残さないことで情報漏洩を防ぐことができる。ただし、ネットワークに接続できない環境においては全く機能しないという欠点もある。


## 参考文献

- [角谷一成.令和05年 基本情報技術者合格教本.株式会社技術評論社, 2022, 575](https://gihyo.jp/book/2022/978-4-297-13164-7)
- [瀬戸美月.徹底攻略 応用情報技術者教科書 令和4年度.株式会社インプレス, 2021, 814](https://book.impress.co.jp/books/1121101057)
