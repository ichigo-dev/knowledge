# 『Web』ノート

（最終更新： 2023-03-03）


## 目次

1. [Web](#web)
	1. [Webブラウザ](#webブラウザ)
	1. [Webサーバ](#webサーバ)
	1. [ユーザエージェント](#ユーザエージェント)
	1. [Web API](#web-api)
	1. [W3C](#w3c)
	1. [Webの歴史](#webの歴史)
1. [ハイパーメディア](#ハイパーメディア)
	1. [ハイパーリンク](#ハイパーリンク)
	1. [ハイパーテキスト](#ハイパーテキスト)
	1. [Memex](#memex)
	1. [Xanadu](#xanadu)
	1. [HyperCard](#hypercard)
1. [検索エンジン](#検索エンジン)
	1. [クローリング](#クローリング)
	1. [インデックス](#インデックス)
	1. [ランキング](#ランキング)
	1. [ページランク](#ページランク)
1. [REST](#rest)
	1. [SOAP](#soap)
	1. [クライアントサーバ](#クライアントサーバ)
	1. [ステートレスサーバ](#ステートレスサーバ)
	1. [キャッシュ](#キャッシュ)
	1. [統一インタフェース](#統一インタフェース)
	1. [階層化システム](#階層化システム)
	1. [コードオンデマンド](#コードオンデマンド)
	1. [RESTful](#restful)
1. [URI](#uri)
	1. [URL](#url)
	1. [URN](#urn)
	1. [スキーム](#スキーム)
	1. [クエリパラメータ](#クエリパラメータ)
	1. [URIフラグメント](#uriフラグメント)
	1. [リソース](#リソース)
	1. [アドレス可能性](#アドレス可能性)
	1. [クールURI](#クールrui)
	1. [リダイレクト](#リダイレクト)
1. [HTML](#html)
1. [HTTPにおける認証](#httpにおける認証)
	1. [Basic認証](#basic認証)
	1. [Digest認証](#digest認証)
1. [HTTPメッセージ](#httpメッセージ)
	1. [HTTPヘッダ](#httpヘッダ)
	1. [HTTPボディ](#httpボディ)
	1. [リクエストメッセージ](#リクエストメッセージ)
	1. [リクエストライン](#リクエストライン)
	1. [レスポンスメッセージ](#レスポンスメッセージ)
	1. [ステータスライン](#ステータスライン)
1. [HTTPメソッド](#httpメソッド)
1. [ステータスコード](#ステータスコード)
	1. [ステータスコードの分類](#ステータスコードの分類)
	1. [頻出のステータスコード](#頻出のステータスコード)
1. [セッション](#セッション)
	1. [Cookie](#cookie)


## Web

**Web**は、TCP/IPのアプリケーションレイヤのシステムで、インターネット上でHTTP通信によりハイパーテキスト形式の情報をやり取りすることができる。世界最大の分散システムであり、ハイパーメディアという情報システムの一種である。

Webブラウザの画面に表示されるイメージ全体を**Webページ**、Webページの見出しとなるページを**ホームページ**と呼ぶ。

### Webブラウザ

**Webブラウザ**は、Webの情報を画面に表示するためのクライアントソフトウェア。代表的なブラウザとしてはMicrosoftのMicrosoft EdgeやMozila FoundationのFirefox、GoogleのGoogle Chrome、Opera SoftwareのOpera、AppleのSafariなどがある。

HTMLやCSS、JavaScriptをどのように解釈するかはブラウザの実装次第であるため、Webコンテンツの表示や挙動が微妙に異なる場合がある。

### Webサーバ

**Webサーバ**は、インターネット上でWebのコンテンツを配信するサーバ。

### ユーザエージェント

**ユーザエージェント**(**UA**: User Agent)は、Webコンテンツにアクセスする具体的なプログラムやソフトウェアのこと。OSやブラウザの名称やバージョンなどの情報はユーザエージェントとしてサーバに通知される。

### Web API

**Web API**(Web Application Programming Interface)は、Webを介して他のソフトウェアと機能やサービスを共有する仕組み。データを共有する際のフォーマットとしてはXMLやJSONがよく用いられる。

### W3C

**W3C**(World Wide Web Consortium)は、IETFに代わってWebの標準化を行う団体。HTMLやXML、HTTP、URI、CSSなどの標準化作業を行う。

### Webの歴史

1980年代までにハイパーメディアの構想が成熟し、インターネットの技術が登場し、分散システムの基盤が構築された。1990年11月、スイスの**CERN**（European Organization for Nuclear Research: 欧州原子核研究機構）のTim Berners-Leeが、インターネットベースの分散情報管理システムとしてWebの提案書を書き、その年の年末には最初のバージョンのブラウザとサーバを完成させた。

1993年にイリノイ大学の**NCSA**（National Center for Supercomputing Application: 米国立スーパーコンピュータ応用研究所）が公開した**Mosaic**というブラウザは、それまでのブラウザがテキストのみを扱っていたのに対して、画像をインライン表示できるという機能を備えていた。

様々な高機能ブラウザが登場するとWebは急速に普及し、インターネットの標準化を行うIETFのRFCの仕様策定が追いつかなくなった。そこで、1994年にBerners-Leeが中心となってW3Cを設立し、IETFに代わってWebの標準化を進めた。


## ハイパーメディア

**ハイパーメディア**は、テキストや音声、映像などの様々なメディアをリンクで結び付けて構成したシステム。

### ハイパーリンク

**ハイパーリンク**（**リンク**）は、ハイパーメディアにおいて情報同士を結びつける機構のこと。

### ハイパーテキスト

**ハイパーテキスト**は、ハイパーリンクを用いて情報を結びつけた文字情報中心の文書のこと。ハイパーメディアはハイパーテキストを拡張した考え方。

### Memex

**Memex**は、1945年にアメリカの研究者Vannevar Bushが発表した情報検索システムについての論文で、ハイパーメディアの起源である。コンピュータが登場したばかりの頃の論文であるが、電気的に接続した本やフィルムなどを相互にリンクし、リンクをたどって情報を探索するという現在のWebを予感させるシステムが構想されていた。

### Xanadu

**Xanadu**は、Memexの構想に影響を受けたTed Nelsonによって構想されたハイパーメディアシステム。現在のWebよりもさらに高機能な理想のハイパーメディアとして開発されたが、あまりの複雑さから計画が頓挫し、Webの圧倒的な普及速度に追いつけなかった。

### HyperCard

**HyperCard**は、1987年にAppleのBill Atkinsonが開発したハイパーメディアで、カードと呼ばれる文書を単位に相互にリンクを張るという構成。当時Appleがよく利用していたスクリプト言語、HyperTalkにより実装されていた。


## 検索エンジン

**検索エンジン**は、広大なインターネット上の情報から、クライアントが求める情報を探し出すためのシステム。ユーザがWebブラウザの検索ボックスに入力したキーワードを元に、最適な情報を探索する。現在使われている検索エンジンは、ほとんどがGoogleとなっているが、YahooやBingといった検索エンジンもよく用いられている。

### クローリング

**クローリング**は、**クローラ**というプログラムによってインターネット上のリンクをたどり、Webページを巡回して情報を収集すること。

### インデックス

**インデックス**は、クローリングによって収集したデータを蓄積し、検索インデックスにWebページの情報を格納すること。

### ランキング

**ランキング**は、インデックスされた情報を検索アルゴリズムと照合して評価し、関連性の高い回答を検索結果として表示すること。

### ページランク

**ページランク**は、Googleが採用している検索エンジンのランキングアルゴリズム。


## REST

**REST**は、ネットワークシステムのアーキテクチャスタイルのひとつであり、クライアントサーバシステムに様々な制約を加えたものとなっている。RESTはWebをソフトウェアアーキテクチャの観点から分析してまとめられている。

RESTは、**ULCODC$SS**(Uniform Layered Code on Demand Client Cache Stateless Server)というアーキテクチャスタイルのことで、Webサービスを実装するうえではRESTを構成するいくつかのアーキテクチャスタイルは除外してもよい。

### SOAP

**SOAP**は、ネットワークシステムのアーキテクチャスタイルのひとつであり、メッセージの転送方法を定めた仕様。1990年代後半から2000年代にかけて、Web APIの標準化をめぐってRESTと争っていたが、多くのベンダーがドラフトを持ち寄って実装を進めた結果、相互運用性に欠ける状態となったためにRESTに敗北した。

### クライアントサーバ

**クライアントサーバ**(Client/Server)は、クライアントがサーバにリクエストを送り、それに対してサーバがレスポンスを返すというアーキテクチャスタイル。

### ステートレスサーバ

**ステートレスサーバ**(Stateless Server)は、クライアントの**アプリケーション状態**（**セッション状態**）をサーバが管理しないアーキテクチャスタイル。しかし現実にはステートレスではないWebサービスやWeb APIがほとんどであり、Cookieなどのセッションを使ったステートフルな状態管理が多用されている。

ステートフルなアプリケーションでは、クライアントの数が増え、保持しなければいけないアプリケーション状態が増加した際にスケールアウトすることが難しい。ステートフルな構成はステートレスサーバの利点をあえて捨てているということを理解した上で利用する必要がある。

### キャッシュ

**キャッシュ**(Cache)は、リソースの鮮度に基づいて、一度取得したリソースの表現をクライアント側で使いまわすアーキテクチャスタイル。CDSを用いるなどしてサーバ側でキャッシュを扱う場合もある。

キャッシュを用いることにより、サーバとクライアントの間の通信を減らしてネットワーク帯域の利用や処理時間を縮小し、より効率的な処理ができるようになる。ただし、古いキャッシュを利用してしまい、情報の信頼性が下がる可能性もある。

### 統一インタフェース

**統一インタフェース**(Uniform Interface)は、URIで指示したリソースに対する操作を、統一した限定的なインタフェースにより行うアーキテクチャスタイル。実際にHTTPには限られたいくつかのメソッドしか用意されておらず、Webのアーキテクチャ全体をシンプルに保っている。

### 階層化システム

**階層化システム**(Layerd System)は、システムをいくつかの階層に分類するアーキテクチャスタイル。統一インタフェースの恩恵もあり、サーバとクライアントの間にロードバランサを設置して負荷分散をしたり、プロキシサーバを設置してアクセスを制限したりすることが容易となっている。

### コードオンデマンド

**コードオンデマンド**は、プログラムコードをサーバからダウンロードして、それをクライアント側で実行するアーキテクチャスタイル。**JavaScript**や**Flash**、**Javaアンプレット**がこれに該当する技術で、クライアント側の拡張性が高くなるという利点がある。

### RESTful

**RESTful**は、RESTの制約に従うRESTらしいサービスのことを指す。個別のWebサービスやWeb APIがRESTfulになると、Webは全体としてより良くなるため、開発者はRESTを意識して個別のシステムを設計する必要がある。


## URI

**URI**（Uniform Resource Identifier: **統一リソース識別子**）は、インターネット上の資源（リソース）を表す識別子。

URIで表されるパスにはASCII文字のみ利用することができ、日本語などのASCII以外の文字を使いたい場合は**%エンコーディング**という方式を用いて文字をエンコードする。

### URL

**URL**(Uniform Resource Locator)は、URIよりも狭義の概念で、インターネット上のWebリソースを表す識別子のことを指す。

### URN

**URN**(Uniform Resource Name)は、URIよりも狭義の概念で、リソースに恒久的なIDを振るための識別子。例えば、書籍には**ISBN**という世界的に統一されたURNが割り振られている。

### スキーム

**スキーム**(Scheme)は、URI中でそのURIが利用するプロトコルを指す部分。スキームの公式な一覧は**IANA**(Internet Assigned Numbers Authority)にある。

### クエリパラメータ

**クエリパラメータ**（**クエリ文字列**）は、URI中に指定することができるパラメータで、クライアントがサーバに対して情報を送信したい場合に用いられる。

### URIフラグメント

**URIフラグメント**は、URI中でリソースの内部のさらに細かい部分を指定するときに使用される部分。

### リソース

**リソース**は、Web上に存在するURIを持ったありとあらゆる情報のこと。ひとつのリソースが複数の名前を持つこともできる。

実際にクライアントとサーバがやり取りするデータのことを**リソースの表現**といい、リソースの表現は時間によって**状態**が変化する可能性がある。

### アドレス可能性

**アドレス可能性**は、URIが持つリソースを一意的に指し示すことができる性質。

### クールURI

**クールURI**は、良いURIや綺麗なURIを指す言葉で、Berners-Leeが1998年に発表した「Cool URIs don't change」というWebページが発祥となっている。Berners-Leeは、「URIは変わらないべきである。変わらないURIこそが最上のURIである」と主張した。

### リダイレクト

**リダイレクト**(Redirect)は、古いURIを新しいURIに転送するHTTPの仕組み。URIを変更したい場合はリダイレクトにより古いURIが完全に使えなくなることを防ぐとよい。


## HTML

**HTML**(HyperText Markup Language)は、Webページを記述するためのマークアップ言語あるいはデータ形式のこと。HTMLはハイパーテキストであり、画面に表示する文字や画像にリンクを張って別の情報と紐づけることができる。

HTMLはWWWのプレゼンテーション層の機能であるが、このプレゼンテーション層は完全には整備されておらず、OSやブラウザが異なると表示の細かい部分に違いを生じる場合がある。


## HTTPにおける認証

### Basic認証

**Basic認証**は、base64でエンコードされたユーザIDとパスワードによる認証。平文でネットワークを流れるので安全性は低く、HTTPSの暗号化通信と組み合わせて使用することが推奨されている。

### Digest認証

**Digest認証**は、Basic認証の欠点であった平文で認証情報が流れてしまうことを改善した認証方式。ユーザIDとパスワードをMD5でハッシュ化して送信する。ただし、Digest認証の暗号化方式も解析が可能となっているため、HTTPSと合わせて使用するなど安全性を高める対策は必要となる。


## HTTPメッセージ

**HTTPメッセージ**は、HTTP通信においてリクエストやレスポンスの際にやり取りされるメッセージ。

### HTTPヘッダ

**HTTPヘッダ**は、HTTPメッセージにおいて、HTTP通信のメタデータが格納された部分。

### HTTPボディ

**HTTPボディ**は、HTTPメッセージにおいて様々な情報が格納される部分で、その扱いはソフトウェア次第。HTTPボディは省略することも可能。通常のWebページのレスポンスではHTTPボディにHTMLが格納され、Web APIではリクエストのパラメータやレスポンスデータとしてHTTPボディにXMLやJSONなどが格納されることが多い。

### リクエストメッセージ

**リクエストメッセージ**は、HTTP通信においてリクエストの際にやり取りされるHTTPメッセージ。

```
[リクエストメッセージの例]
GET /test?q=test HTTP/1.1
Host: example.jp
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64)
Accept: text/html,application/xhtml+xml,application/xml;q=0.9
```

### リクエストライン

**リクエストライン**は、リクエストメッセージの1行目にあたる部分で、HTTPメソッド、リクエストURI、プロトコルバージョンからなる。

### レスポンスメッセージ

**レスポンスメッセージ**は、HTTP通信においてレスポンスの際にやり取りされるHTTPメッセージ。

```
[レスポンスメッセージの例]
HTTP/1.1 200 OK
Content-Type: application/xhtml+xml; charset=utf-8

<html>
 ...
</html>
```

### ステータスライン

**ステータスライン**は、レスポンスメッセージの1行目にあたる部分で、プロトコルバージョン、ステータスコード、テキストフレーズからなる。


## HTTPメソッド

**HTTPメソッド**は、HTTPリクエストの際に、対象となるリソースに対してどのような操作を行うかを表す命令。中でもGET、POST、PUT、DELETEは、これら4つでCRUDの性質を満たす。

| メソッド | 意味                                                     |
|----------|----------------------------------------------------------|
| GET      | リソースの取得                                           |
| POST     | 子リソースの作成、リソースへのデータの追加、その他の処理 |
| PATCH    | リソースの部分的な更新                                   |
| PUT      | リソースの更新、リソースの作成                           |
| DELETE   | リソースの削除                                           |
| HEAD     | リソースのヘッダの取得                                   |
| OPTIONS  | リソースがサポートしているメソッドの取得                 |
| TRACE    | 自分宛てにリクエストメッセージを返す（ループバック）試験 |
| CONNECT  | プロキシ動作のトンネル接続への変更                       |


## ステータスコード

### ステータスコードの分類

ステータスコードは3桁の数字で、先頭の数字によって5つに分類することができる。

| ステータスコードの分類    | 概要                                                         |
|---------------------------|------------------------------------------------------------------------------------------------------------------------------------------|
| 1xx（処理中）             | 処理が継続していることを示す。クライアントはそのままリクエストを継続するか、サーバの指示に従ってプロトコルをアップデートして再送信する。 |
| 2xx（成功）               | リクエストが成功したことを示す。                                                                                                         |
| 3xx（リダイレクト）       | ほかのリソースへのリダイレクトを示す。クライアントはレスポンスメッセージのLocationヘッダを見て新しいリソースへ接続する。                 |
| 4xx（クライアントエラー） | クライアントエラーを示す。原因はクライアント側にあり、エラーを解消しない限りは正常な結果が得られない。                                   |
| 5xx（サーバエラー）       | サーバエラーを示す。サーバ側の原因を解決すれば同一のリクエストを再送信して正常な結果が得られる可能性がある。                             |

### 頻出のステータスコード

| ステータスコード          | 概要                                                         |
|---------------------------|------------------------------------------------------------------------------------------------------------------------|
| 200 OK                    | リクエストが成功したことを示す。                                                                                       |
| 201 Created               | リソースを新たに作成したことを示す。                         |
| 301 Moved Permanently     | リクエストで指定したリソースが新しいURIに移動したことを示す。古いURIを保ちつつ新しいURIに移行する際に用いられる。     |
| 303 See Other             | リクエストに対する処理結果が別のURIで取得できることを示す。POSTでリソースを操作した結果をGETで返す場合など。          |
| 400 Bad Request           | リクエストの構文やパラメータが間違っていることを示す。適切なクライアントエラーがない場合にも用いられる。               |
| 401 Unauthorized          | リクエストの認証情報が不適切であることを示す。                                                                         |
| 404 Not Found             | 指定したリソースが見つからなかったことを示す。                                                                         |
| 500 Internal Server Error | サーバ側に何らかの異常が生じていて、正しいレスポンスが返せないことを示す。適切なサーバエラーがない場合にも用いられる。 |
| 503 Service Unavailable   | サーバがメンテナンスなどで一時的にアクセスできないことを示す。                                                         |


## セッション

**セッション**は、クライアントがあるWebサイトに訪問してから離脱するまでの通信のこと。各クライアントごとのセッション情報はサーバが利用するストレージに格納されており、クライアントは自分のセッション情報を参照するためのキーをCookieなどで保持する。

サーバを冗長化する場合は、全てのサーバが共有できるストレージ（DBやキャッシュサーバなど）でセッション情報を管理する必要がある。

### Cookie

**Cookie**は、ブラウザに保存される情報で、セッション情報を参照するためのキーの管理などに用いられる。Cookieの情報をどれだけの期間保持しておくかは、ブラウザの設定やHTTPメッセージ内のメタ情報により制御する。
