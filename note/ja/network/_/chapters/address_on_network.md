# 『ネットワーク上のアドレス』ノート

（最終更新： 2023-04-26）


## 目次

1. [MACアドレス](#macアドレス)
1. [IPアドレス](#ipアドレス)
	1. [ネットワーク部](#ネットワーク部)
	1. [ホスト部](#ホスト部)
	1. [ネットワークアドレス](#ネットワークアドレス)
	1. [ブロードキャストアドレス](#ブロードキャストアドレス)
	1. [クラス](#クラス)
	1. [サブネットワーク](#サブネットワーク)
	1. [サブネットマスク](#サブネットマスク)
	1. [CIDR](#cidr)
	1. [VLSM](#vlsm)
	1. [グローバルIPアドレス](#グローバルipアドレス)
	1. [プライベートIPアドレス](#プライベートipアドレス)
	1. [WHOIS](#whois)
	1. [ループバックアドレス](#ループバックアドレス)
	1. [IPv4](#ipv4)
	1. [IPv6](#ipv6)
1. [ポート番号](#ポート番号)
	1. [ウェルノウンポート番号](#ウェルノウンポート番号)
	1. [エフェメラルポート番号](#エフェメラルポート番号)


## MACアドレス

**MACアドレス**(Media Access Control)は、[データリンク](./datalink_layer.md#データリンク)に接続している[ノード](./network.md#ノード)を識別する際に利用される識別子で、48[ビット](../../../basics/_/chapters/computer_and_number.md#ビット)の長さを持つ。[ネットワーク](./network.md#ネットワーク)機器が出荷される時点で割り当てられた固有のアドレスとなっている。

一般的な[NIC](./network.md#nic)では、MACアドレスは[ROM](../../../computer/hardware/_/chapters/memory.md#rom)に焼き込まれており、同じMACアドレスを持つ[NIC](./network.md#nic)は世界中にひとつしかない。MACアドレスには、[NIC](./network.md#nic)の製造メーカを特定する**ベンダ識別子**と、メーカが決定する[ビット](../../../basics/_/chapters/computer_and_number.md#ビット)列である**製造番号**が含まれている。ベンダ識別子はIEEEが割り当てる番号で、従来は**OUI**(Organizationally Unique Identifier)と呼ばれていたが、**MA-L**(MAC Address Block Large)に改称された。


## IPアドレス

**IPアドレス**は、個々の[ホスト](./network.md#ホスト)を特定するための識別子で、32[ビット](../../../basics/_/chapters/computer_and_number.md#ビット)で表される。人間がわかりやすいように8[ビット](../../../basics/_/chapters/computer_and_number.md#ビット)ずつに区切り境目にドットを入れた**ドット・デシマル・ノーテーション**や、[10進数](../../../basics/discrete_mathematics/_/chapters/radix.md#10進数)に置き換えた記法がよく用いられる。

### ネットワーク部

**ネットワーク部**は、[IPアドレス](#ipアドレス)中で[データリンク](./datalink_layer.md#データリンク)の[セグメント](./datalink_layer.md#セグメント)ごとに割り当てられた固有の値。世界中の[ネットワーク](./network.md#ネットワーク)からどの[ネットワーク](./network.md#ネットワーク)[セグメント](./datalink_layer.md#セグメント)であるかを特定するために用いられる。

### ホスト部

**ホスト部**は、[データリンク](./datalink_layer.md#データリンク)が属する[セグメント](./datalink_layer.md#セグメント)内で、各機器に割り当てられた固有の値。[セグメント](./datalink_layer.md#セグメント)内の[ホスト](./network.md#ホスト)を特定するために用いられる。

### ネットワークアドレス

**ネットワークアドレス**は、[IPアドレス](#ipアドレス)の[ホスト部](#ホスト部)をすべて0にしたアドレスで、その[セグメント](./datalink_layer.md#セグメント)の[ネットワーク](./network.md#ネットワーク)自体を表す。

### ブロードキャストアドレス

**ブロードキャストアドレス**は、[ホスト部](#ホスト部)をすべて1とし、その[ネットワーク](./network.md#ネットワーク)に属しているすべての[ホスト](./network.md#ホスト)に[パケット](./network.md#パケット)を送信するためのアドレス。その[コンピュータ](../../../computer/_/chapters/computer.md#コンピュータ)自身が属している[セグメント](./datalink_layer.md#セグメント)内への[ブロードキャスト](./network.md#ブロードキャスト)を**ローカルブロードキャスト**、異なる[IP](./internet_layer.md#ip)[ネットワーク](./network.md#ネットワーク)への[ブロードキャスト](./network.md#ブロードキャスト)を**ダイレクトブロードキャスト**という。

### クラス

**クラス**は、[IPアドレス](#ipアドレス)の[ネットワーク部](#ネットワーク部)と[ホスト部](#ホスト部)を識別するために用いられていた概念。[IPアドレス](#ipアドレス)をクラスA〜クラスDの4つのグループに分類し、[IPアドレス](#ipアドレス)の先頭8[ビット](../../../basics/_/chapters/computer_and_number.md#ビット)によってどのクラスに属するかを判断する。同一[ネットワーク](./network.md#ネットワーク)内の接続可能台数は[ホスト部](#ホスト部)が表せる範囲となるので、例えばクラスCの[ネットワーク](./network.md#ネットワーク)では $2^8 - 2 = 254$ 台となる。

クラス単位での[IPアドレス](#ipアドレス)の割当は、利用されないアドレスが発生しやすく、限られたアドレス空間を有効に利用できないため、[CIDR](#cidr)方式を用いるのが一般的。

### サブネットワーク

**サブネットワーク**は、[クラス](#クラス)で区切られた[ネットワーク](./network.md#ネットワーク)空間をさらに細かい[ネットワーク](./network.md#ネットワーク)に分割したもの。[クラス](#クラス)を用いた方法よりも柔軟に接続可能な[ホスト](./network.md#ホスト)の台数を制御できる。

### サブネットマスク

**サブネットマスク**は、[IPアドレス](#ipアドレス)の[ネットワーク部](#ネットワーク部)と[ホスト部](#ホスト部)を識別するために用いるアドレス。[ネットワーク部](#ネットワーク部)がすべて1、[ホスト部](#ホスト部)がすべて0のアドレスとなっており、[IPアドレス](#ipアドレス)に対してマスクする（[論理積](../../../basics/discrete_mathematics/_/chapters/logical_operation.md#and演算)を取る）ことでそれぞれの部分を抽出することができる。

先頭から何[ビット](../../../basics/_/chapters/computer_and_number.md#ビット)が[ネットワーク部](#ネットワーク部)であるか（サブネットマスクが1である[ビット](../../../basics/_/chapters/computer_and_number.md#ビット)数）は、 `172.10.0.1/32` のように[IPアドレス](#ipアドレス)の末尾に付けて表現される。

### CIDR

**CIDR**(Classless InterDomain Routing)は、[サブネットマスク](#サブネットマスク)によって[ネットワーク部](#ネットワーク部)の長さを識別する方式。これにより、ネットワークアドレスの長さを固定せずに分割して扱えるため、各組織に余分な[IPアドレス](#ipアドレス)空間を割り当てることを防げる。

### VLSM

**VLSM**(Variable Length Subnet Mask)は、同一[ネットワーク](./network.md#ネットワーク)内で様々な長さの[サブネットマスク](#サブネットマスク)を使用する技術。

### グローバルIPアドレス

**グローバルIPアドレス**は、[インターネット](./network.md#インターネット)に接続された機器に割り当てられている[IPアドレス](#ipアドレス)。グローバルIPアドレスの割り当ては、**ICANN**(Internet Corporation for Assigned Names and Numbers)で一元管理されており、日本国内では**JPNIC**(Japan Network Information Center)がグローバルIPアドレスの割り当てを行っている。

### プライベートIPアドレス

**プライベートIPアドレス**は、[インターネット](./network.md#インターネット)に直接接続されない、組織内などで固有の[IPアドレス](#ipアドレス)。[インターネット](./network.md#インターネット)に接続する際は、[インターネット](./network.md#インターネット)との接点となる[ルータ](./network_architecture.md#ルータ)や公開[サーバ](../../../computer/_/chapters/computer.md#サーバ)にだけ[グローバルIPアドレス](#グローバルipアドレス)を割り当てて、プロキシサーバや、[NAT](./internet_layer.md#nat)などの[ネットワーク](./network.md#ネットワーク)変換機能を用いるのが一般的。

### WHOIS

**WHOIS**は、[IPアドレス](#ipアドレス)を管理している組織や管理者の連絡先情報。[インターネット](./network.md#インターネット)の通信経路の途中で異常が発生している装置を突き止める目的などで設定する。

### ループバックアドレス

**ループバックアドレス**は、同じ[コンピュータ](../../../computer/_/chapters/computer.md#コンピュータ)内部の[プログラム](../../../programming/_/chapters/programming.md#プログラム)間で通信したい場合などに利用される、その機器自身を表す[IPアドレス](#ipアドレス)。どの機器にも固定で `127.0.0.1` が割り当てられており、 `localhost` という[ホスト](./network.md#ホスト)名がエイリアスとして利用される。


## ポート番号

**ポート番号**は、同一の[コンピュータ](../../../computer/_/chapters/computer.md#コンピュータ)内で通信を行っている[プログラム](../../../programming/_/chapters/programming.md#プログラム)を識別するときに利用される識別子。[アプリケーション層](./communication_protocol.md#アプリケーション層)で処理する[プログラム](../../../programming/_/chapters/programming.md#プログラム)を[トランスポート層](./communication_protocol.md#トランスポート層)で指定するために用いられる。

### ウェルノウンポート番号

**ウェルノウンポート番号**(Well-known Port Number)は、一般的によく用いられる[プログラム](../../../programming/_/chapters/programming.md#プログラム)の[ポート番号](#ポート番号)のことで、 $0 \sim 1023$ の番号が割り当てられたもの。また、ウェルノウンポート番号以外にも、 $1024 \sim 49151$ は正式に登録されている[ポート番号](#ポート番号)となっている。

### エフェメラルポート番号

**エフェメラルポート番号**は、 $1024 \sim 655354$ の[ポート番号](#ポート番号)のことで、[OS](../../../computer/software/_/chapters/operating_system.md#オペレーティングシステム)が動的に管理する[ポート番号](#ポート番号)。[サーバ](../../../computer/_/chapters/computer.md#サーバ)は[ポート番号](#ポート番号)が決まっている必要があるが、サービスを受ける側の[ポート番号](#ポート番号)は必ずしも決まっている必要はなく、エフェメラルポート番号を自由に割り当てることができる。
