# 『シェル』ノート

（最終更新： 2023-03-05）


## 目次

1. [シェル](#シェル)
	1. [ログインシェル](#ログインシェル)
	1. [プロンプト](#プロンプト)
	1. [sh](#sh)
	1. [bash](#bash)
	1. [ash](#ash)
	1. [zsh](#zsh)
	1. [csh](#csh)
	1. [tcsh](#tcsh)
1. [コマンド](#コマンド)
	1. [サブコマンド](#サブコマンド)
	1. [オプション](#オプション)


## シェル

**シェル**は、ユーザとLinuxカーネルの橋渡しをするプログラムで、カーネルの機能をユーザに提供するためのインタフェース。シェルはまず、キーボードに入力されたユーザのコマンドを受け取り、カーネルに対して処理命令を行う。そして、カーネルの処理結果を受け取ってそれをユーザに提供する。シェルは、このようなやり取りを繰り返すインタラクティブな操作を提供する。

Linuxカーネルとシェルのレイヤを分離することにより、カーネルには手を入れずにシェルのみをユースケースに合わせて変更することができたり、別のOSを利用する際にシェルのみ移植すれば操作を同様に行える、といった利点がある。

### ログインシェル

**ログインシェル**は、ユーザがログイン時に最初にLinuxによって自動的に起動されるシェル。ログインシェルは、 `SHELL` 環境変数に指定されたコマンドで起動されるものとなる。ログインシェルを変更するには、 `chsh` コマンドを使用する。

```sh
# ログインシェルの確認
$ echo $SHELL
/bin/bash

# 利用できるシェルを一覧表示
$ chsh --list-shells
/bin/sh
/bin/bash
/usr/bin/git-shell
/bin/zsh
/usr/bin/zsh
/bin/rbash
/usr/bin/rbash

# ログインシェルの変更
$ chsh
Changing shell for user.
Password:
New shell [/bin/bash]: /bin/zsh
Shell changed.
```

### プロンプト

**プロンプト**は、シェルがユーザの入力を受け付けている状態を示す記号。多くの場合は `$` や `#` で表わされ、さらにログイン中のユーザ名やホスト名、カレントディレクトリなどの付加情報を表示する場合もある。プロンプトの表示は、シェルの設定によりユーザが任意に変更することもできる。

Ubuntuのデフォルトのプロンプトは以下の通り。（ユーザ名が `user` 、ホスト名が `host` の場合）

```sh
user@host:~$
```

プロンプト記号の `$` は一般ユーザでの操作、 `#` はスーパユーザでの操作を例示しているドキュメントが多い。

### sh

**sh**(Bourne Shell)は、多くのUNIX系OSで標準的に使われているシェルのひとつで、古くからあり多くのシェルがshとの互換性を持っている。

### bash

**bash**(Bourne-Again Shell)は、GNUで開発されているオープンソースのシェル。sh互換だが様々な機能が追加されており、一時期はMacOSのシェルとしても採用されていた。多くのLinux環境でデフォルトのシェルとして採用されており、利用者が多いため情報を集めやすい。

### ash

**ash**(Almquist Shell)は、軽量かつ高速なsh互換のシェルで、Debian系のLinuxディストリビューションで利用されている。

### zsh

**zsh**(Z Shell)は、他のシェルの便利な機能を持ちつつ独自に進化しているsh互換でオープンソースのシェル。MacOSのデフォルトのシェルとしても採用されている。

### csh

**csh**(C Shell)は、BSD系のOSで使用されているシェルで、shとは異なり文法がC言語風となっている。

### tcsh

**tcsh**(TENEX C Shell)は、cshを拡張したオープンソースのシェルで、MacOSで採用されていたこともあったが、シェルスクリプトの記述には向いていないとされている。


## コマンド

**コマンド**は、ユーザがシェルに対して与える命令。

### サブコマンド

**サブコマンド**は、様々な機能をまとめたコマンドに対して、具体的な操作の種類を指定する命令。第一コマンドに続けて指定する。

### オプション

**オプション**（**引数**、**フラグ**、**パラメータ**）は、コマンドの操作対象や処理内容の詳細を指定する部分。
