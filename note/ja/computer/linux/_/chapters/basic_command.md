# 『基本コマンド』ノート

（最終更新： 2023-03-11）


## 目次

1. [コマンドの使い方](#コマンドの使い方)
	1. [マニュアル](#マニュアル)
	1. [ヘルプオプション](#ヘルプオプション)
1. [ログアウト](#ログアウト)
	1. [シャットダウン](#シャットダウン)
1. [ファイル操作](#ファイル操作)
	1. [ファイルの一覧表示](#ファイルの一覧表示)
	1. [ファイルの作成](#ファイルの作成)
	1. [ファイルの削除](#ファイルの削除)
	1. [ファイルのコピー](#ファイルのコピー)
	1. [ファイルの移動](#ファイルの移動)
	1. [ファイルの内容確認](#ファイルの内容確認)
	1. [ファイルのページャ表示](#ファイルのページャ表示)
	1. [ファイルの先頭表示](#ファイルの先頭表示)
	1. [ファイルの末尾表示](#ファイルの末尾表示)
1. [ディレクトリ操作](#ディレクトリ操作)
	1. [カレントディレクトリの確認](#カレントディレクトリの確認)
	1. [ディレクトリの移動](#ディレクトリの移動)
	1. [ディレクトリの作成](#ディレクトリの作成)
	1. [ディレクトリの削除](#ディレクトリの削除)
1. [リンクの作成](#リンクの作成)
1. [ファイルの検索](#ファイルの検索)
	1. [データベースを利用したファイルの検索](#データベースを利用したファイルの検索)
1. [コマンドの検索](#コマンドの検索)


## コマンドの使い方

コマンドの使い方がわからない場合、コマンドのマニュアルを確認したり、ヘルプオプションを利用して簡易的な説明を表示することができる。

### マニュアル

`man` は、Linuxのマニュアルページを表示するために使用されるコマンド。マニュアルページには、Linuxシステムやソフトウェアの機能、オプション、使用例などが記載されている。 `man` コマンドを使うことで、コマンドやファイル、システムの概要を調べることができる。

`man` コマンドの書式は以下の通り。

```
man [OPTION]... [COMMAND/FILE]
```

例えば、 `ls` コマンドのマニュアルページを表示したい場合は、次のように実行する。

```sh
$ man ls
```

マニュアルページを開いている間は、矢印キーや `Enter/BackSpace` 、 `j/k` でページ内を移動することができ、 `q` キーでマニュアルを閉じてインタラクティブシェルに復帰できる。また、操作がわからなくなった場合には `h` キーを入力することでヘルプを参照することができる。これらの操作が有効なのは、ページャとしてデフォルトの `less` を用いている場合に限られる。

`OPTION` に指定することができる主要なオプションは以下の通り。

| オプション      | 概要                                                                                     |
| --------------- | :--------------------------------------------------------------------------------------- |
| `-f` `-k` `-i`  | 指定したキーワードに該当するコマンドを検索し、見つかったマニュアルページの一覧を出力する |
| `-a`            | すべてのマニュアルページを表示する                                                       |
| `-P` `--pager`  | マニュアルページの閲覧に用いるページャを指定する（デフォルトでは `less` ）               |

また、マニュアルは種類ごとに以下のようなセクション番号が割り振られており、番号を指定してマニュアルを調べることもできる。

| セクション番号 | 内容                                   |
| -------------- | :------------------------------------- |
| `1`            | Linuxコマンド                          |
| `2`            | システムコール（カーネル関数）         |
| `3`            | ライブラリコール（Cライブラリの関数）  |
| `4`            | スペシャルファイル（デバイスファイル） |
| `5`            | ファイルのフォーマット                 |
| `6`            | ゲームやデモ                           |
| `7`            | マクロ                                 |
| `8`            | その他                                 |
| `9`            | システムコマンドとデーモン             |

### ヘルプオプション

**ヘルプオプション**は、コマンドの使い方やオプションなどの情報を表示するためのオプションで、多くのコマンドがこのオプションを備えている。一般的にはヘルプオプションは `-h` 、 `--help` 、 `-?` といった形式で提供される。

ヘルプオプションを使用することで、コマンドの詳細な使用方法やオプションの意味を知ることができる。ヘルプオプションを使用する場合、次のようにコマンドを入力する。

```sh
$ [COMMAND] --help
```

例えば、 `ls` コマンドのヘルプを表示するには、次のように入力する。

```sh
$ ls --help
```


## ログアウト

`exit` は、Linuxにおいてシェルからログアウトするためのコマンド。このコマンドの実行により現在使用しているシェルプロセスを終了する。

### シャットダウン

`shutdown` は、Linuxシステムをシャットダウンするためのコマンド。システムをシャットダウンする前にユーザに通知を行い、デフォルトではシャットダウンまで1分間の待ち時間が設定されている。

また、 `poweroff` もシャットダウンのためのコマンド。ただし、 `shutdown` とは異なり、システムを直ちに停止するため、アプリケーションが意図せず停止されてしまう恐れがある。


## ファイル操作

### ファイルの一覧表示

`ls` は、Linux及びUNIX系オペレーティングシステムで使用される、ファイルやディレクトリの一覧表示を行うコマンド。 `ls` は"list"の略語。ファイル名やパーミッション、所有者、更新日時、ファイルサイズなどの情報を表示することができる。

コマンドの書式は以下の通り。

```
ls [OPTION]... [FILE]...
```

`ls` コマンドを単体で使用すると、カレントディレクトリのファイルやディレクトリを一覧表示する。また、 `ls` コマンドの主要なオプションは以下の通り。

| オプション | 概要                                                                                  |
| ---------- | :------------------------------------------------------------------------------------ |
| `-l`       | パーミッションや所有者、グループ、ファイルサイズ、更新日時など、詳細な情報を表示する |
| `-a`       | 隠しファイルも含めたすべてのファイルを表示する                                        |
| `-h`       | ファイルサイズを人間が読みやすい形式で表示する                                        |
| `-t`       | 更新日時の新しい順に並べ替えて表示する                                                |
| `-r`       | 結果を逆順で表示する                                                                  |
| `-R`       | サブディレクトリ以下のファイルやディレクトリを再帰的に表示する                       |
| `-F`       | ファイル名の後ろにファイルの種類を表す記号を追加して表示する                         |

`-F` オプションを指定した場合、ファイル名の後ろに次のような記号が追加で表示される。

| 種別               | 記号 |
| ------------------ | ---- |
| 通常ファイル       | なし |
| ディレクトリ       | `/`  |
| 実行可能ファイル   | `*`  |
| シンボリックリンク | `@`  |

### ファイルの作成

`touch` は、LinuxおよびUNIX系オペレーティグシステムで使用される、空のファイルを作成したり、既存のファイルの更新日時を変更するコマンドです。

コマンドの書式は以下の通り。

```
touch [OPTION]... FILE...
```

`touch` コマンドを単独で使用すると、カレントディレクトリに空のファイル作成する。例えば次のコマンドは、カレントディレクトリに `test.txt` という名前のからファイルを作成する。

```sh
$ touch test.txt
```

また、既存のファイルの更新日時を変更する場合は、ファイル名を指定して `touch` コマンドを実行する。 `touch` コマンドの代表的なオプションは以下の通り。

| オプション | 概要                                                                    |
| ---------- | :---------------------------------------------------------------------- |
| `-c`       | ファイルが存在しない場合に、ファイルを新規作成せずにコマンドを終了する |
| `-d`       | ファイルの更新日時を指定した日時に変更する                              |
| `-m`       | ファイルの更新日時だけを変更する（最終アクセス日時は更新しない）       |
| `-r`       | 指定したファイルと同じ更新日時にする                                    |

### ファイルの削除

`rm` は、LinuxおよびUNIX系オペレーティングシステムで使用される、ファイルやディレクトリを削除するためのコマンド。 `rm` は"remove"の略語。

コマンドの書式は以下の通り。

```
ls [OPTION]... [FILE]...
```

`rm` コマンドを単独で使用すると、指定したファイルを削除する。例えば次のコマンドは、カレントディレクトリにある `test.txt` という名前のファイルを削除する。

```sh
$ rm test.txt
```

`rm` コマンドによって削除されたファイルは元に戻すことができないので、注意が必要。 `rm` コマンドの代表的なオプションは以下の通り。

| オプション | 概要                                                                                                  |
| ---------- | :---------------------------------------------------------------------------------------------------- |
| `-r`       | サブディレクトリを削除するためのオプションで、サブディレクトリ内のファイルやディレクトリもすべて削除 |
| `-i`       | 削除時に確認を求める                                                                                  |
| `-f`       | 警告を表示せずに、強制的にファイルを削除する                                                          |

`rm` は強力なコマンドであり、誤って重要なファイルやディレクトリを削除しないように十分に注意が必要。

### ファイルのコピー

`cp` は、LinuxおよびUNIX系オペレーティングシステムで使用される、ファイルやディレクトリをコピーするためのコマンド。 `cp` は"copy"の略語。

コマンドの書式は以下の通り。

```
cp [OPTION]... [-T] SOURCE DEST
cp [OPTION]... SOURCE... DIRECTORY
cp [OPTION]... -t DIRECTORY SOURCE...
```

`cp` コマンドにコピー元ファイルとコピー先ファイルのパスを指定することで、ファイルをコピーすることができる。例えば次のコマンドは、 `/home/user/src/test.txt` というファイルを `/home/user/dest/test.txt` というファイルにコピーする。

```sh
cp /home/user/src/test.txt /home/user/dest/test.txt
```

`cp` コマンドの代表的なオプションは以下の通り。

| オプション | 概要                                             |
| ---------- | :----------------------------------------------- |
| `-r`       | 指定したディレクトリの中身を再帰的にコピーする   |
| `-p`       | コピー元ファイルの属性やパーミッションを維持する |
| `-i`       | 上書き確認を求める                               |

`cp` コマンドはファイルやディレクトリを簡単にコピーすることができるが、コピー先に同名のファイルが存在する場合には、内容が上書きされるため注意が必要。

### ファイルの移動

`mv` は、LinuxおよびUNIX系オペレーティングシステムで使用される、ファイルやディレクトリを移動するためのコマンド。また、ファイルやディレクトリの名前を変更するためにも用いられる。 `mv` は"move"の略語。

コマンドの書式は以下の通り。

```
mv [OPTION]... [-T] SOURCE DEST
mv [OPTION]... SOURCE... DIRECTORY
mv [OPTION]... -t DIRECTORY SOURCE...
```

`mv` コマンドに移動元ファイルまたはディレクトリのパスと移動先のパスを指定することで、ファイルやディレクトリを移動することができる。例えば次のコマンドは、 `/home/user/src/test.txt` というファイルを `/home/user/dest/test.txt` というファイルに移動する。

```sh
$ mv /home/user/src/test.txt /home/user/dest/test.txt
```

また、 `mv` コマンドを使用してファイルやディレクトリをリネームすることもできる。例えば次のコマンドは、 `/home/user/src/test.txt` というファイルを `/home/user/src/test2.txt` という名前に変更する。

```sh
$ mv /home/user/src/test.txt /home/user/src/test2.txt
```

`mv` コマンドに `-i` オプションを指定すると、移動先に同じ名前のファイルがあった場合に上書き確認を行う。

### ファイルの内容確認

`cat` は、LinuxおよびUNIX系オペレーティングシステムで使用される、テキストファイルの内容を表示するためのコマンド。 `cat` は"concatenate"の略語。

コマンドの書式は以下の通り。

```
cat [OPTION]... [FILE]...
```

基本的に、`cat` コマンドは1つ以上のファイルを引数として受け取り、それらのファイルの内容を順番に連結して標準出力に表示する。例えば次のコマンドを実行すると、ファイル `file1.txt` と `file2.txt` の内容が順番に表示される。

```sh
$ cat test1.txt test2.txt
```

`cat` コマンドの代表的なオプションは以下の通り。

| オプション | 概要                                         |
| ---------- | :------------------------------------------- |
| `-n`       | 行番号を表示する                             |
| `-b`       | 行番号を表示する（空行には行番号を付けない） |
| `-s`       | 空行をまとめる                               |
| `-E`       | 各行の末尾に `$` を表示する                  |

`cat` はテキストファイルの内容を素早く表示することができるが、大きなファイルを扱う場合には `less` や `more` といったページャコマンドのほうが向いている。

### ファイルのページャ表示

`less` や `more` コマンドは、LinuxおよびUNIX系オペレーティングシステムで使用される、テキストファイルを閲覧するためのコマンド。 `less` は `more` よりも高度な機能を持っている。

コマンドの書式は以下の通り。

```
less [OPTION]... [FILE]...
```

`less` コマンドを使用すると、指定したファイルの内容が先頭から表示される。 `Space` キーを入力すると1ページ分のテキストをスクロールダウンし、 `b` キーを入力すると1ページ分のテキストをスクロールアップする。また、 `q` キーを入力すると `less` コマンドを終了する。

また、 `less` コマンドは `more` コマンドにはない以下のような機能を提供する。

- テキスト内の文字列を検索する機能（ `/` キーを押して、検索したい文字列を入力する）
- ファイル内の行数を表示する（ `=` キーを入力する）
- ファイル内の任意の行に移動する（ `g` キーを入力するとファイルの先頭に、 `G` キーを入力するとファイルの末尾にジャンプする）

例えば次のコマンドを実行すると、 `less` ページャ内に `/var/log/syslog` ファイルを表示する。

```sh
$ less /var/log/syslog
```

### ファイルの先頭表示

`head` は、LinuxおよびUNIX系ディストリビューションで使用される、テキストファイルの先頭から指定された行数分の内容を表示するコマンド。 `tail` コマンドと同様に、ログファイルや大容量テキストファイルの処理に便利なツール。

コマンドの書式は以下の通り。

```
head [OPTION]... [FILE]...
```

デフォルトでは、 `head` コマンドは指定されたファイルの先頭10行を表示する。 `-n` オプションを使用することで、表示する行数を変更することができる。例えば次のコマンドを実行すると、カレントディレクトリにある `test.txt` の先頭5行が表示される。

```sh
$ head -n 5 test.txt
```

また、複数のファイルを指定して、それぞれのファイルの先頭を表示することもできる。例えば次のコマンドを実行すると、カレントディレクトリにある `test1.txt` と `test2.txt` の先頭10行がそれぞれ表示される。

```sh
$ head test1.txt test2.txt
```

### ファイルの末尾表示

`tail` は、LinuxおよびUNIX系オペレーティングシステムで使用される、テキストファイルの末尾から指定された行数分の内容を表示するためのコマンド。主にログファイルや大容量のテキストファイルの処理や解析に便利なツール。

コマンドの書式は以下の通り。

```
tail [OPTION]... [FILE]...
```

デフォルトでは、 `tail` コマンドは指定されたファイルの末尾10行を表示する。 `-n` オプションを使用することで、表示する行数を変更することができる。例えば次のコマンドを実行すると、カレントディレクトリにある `test.txt` の末尾5行が表示される。

```sh
$ tail -n 5 test.txt
```

また、複数のファイルを指定して、それぞれのファイルの末尾を表示することもできる。例えば次のコマンドを実行すると、カレントディレクトリにある `test1.txt` と `test2.txt` の末尾10行がそれぞれ表示される。

```sh
$ tail test1.txt test2.txt
```

`-f` オプションを使用すると、ファイルの変更をリアルタイムに追跡するとこができる。これは、ログファイルの解析などにおいて非常に便利なオプションで、以下の例では `access.log` の変更をリアルタイムに追跡する。

```sh
$ tail -f access.log
```


## ディレクトリ操作

### カレントディレクトリの確認

`pwd` は、LinuxおよびUNIX系オペレーティングシステムで使用される、現在の作業ディレクトリを表示するためのコマンド。 `pwd` は"print working directory"の略語。

コマンドの書式は以下の通り。

```
pwd [OPTION]...
```

基本的に `pwd` は現在の作業ディレクトリの絶対パスを表示する。例えば、現在の作業ディレクトリが `~/docs` である場合、 `pwd` コマンドを実行すると、 `/home/user/docs` という出力が得られる。

`pwd` コマンドに `-P` オプションを指定すると、シンボリックリンクを解決したパスを表示する。

### ディレクトリの移動

`cd` は、LinuxおよびUNIX系オペレーティングシステムで使用される、カレントディレクトリを変更するためのコマンド。 `cd` は"change directory"の略語。

コマンドの書式は以下の通り。

```
cd [PATH]
```

`cd` に移動先のパスを指定すると、カレントディレクトリを指定したパスに変更する。例えば以下のコマンドを実行すると、 `/home/user/docs` ディレクトリに移動する。

```sh
$ cd /home/user/docs
```

`..` を使用することで、1つ上のディレクトリを指定することができる。例えば以下のコマンドを実行すると、カレントディレクトリから見て1つ上のディレクトリ移動する。

```sh
$ cd ..
```

### ディレクトリの作成

`mkdir` は、LinuxおよびUNIX系オペレーティングシステムで使用される、新しいディレクトリを作成するためのコマンド。 `mkdir` は"make directory"の略語。

コマンドの書式は以下の通り。

```
mkdir [OPTION]... DIRECTORY...
```

`mkdir` コマンドにディレクトリ名を指定すると、カレントディレクトリに指定した名前のサブディレクトリが作成される。例えば以下のコマンドを実行すると、カレントディレクトリに `docs` という名前の新しいディレクトリが作成される。

```sh
$ mkdir docs
```

`mkdir` コマンドは一度に複数のディレクトリを作成することもできる。例えば以下のコマンドを実行すると、カレントディレクトリに `docs` と `music` と `pictures` という3つの新しいディレクトリを同時に作成する。

```sh
$ mkdir docs music pictures
```

### ディレクトリの削除

`rmdir` は、LinuxおよびUNIX系オペレーティングシステムで使用される、空のディレクトリを削除するためのコマンド。 `rmdir` は"remove directory"の略語。

コマンドの書式は以下の通り。

```
rmdir [OPTION]... DIRECTORY...
```

`rmdir` にディレクトリ名を指定すると、カレントディレクトリにある指定した名前のディレクトリを削除する。例えば以下のコマンドを実行すると、 `docs` という名前の空のディレクトリを削除する。

```sh
$ rmdir docs
```


## リンクの作成

`ln` は、LinuxおよびUNIX系オペレーティングシステムで使用される、リンクを作成するために使用されるコマンド。 `ln` は"link"の略語。

コマンドの書式は以下の通り。

```
ln [OPTION]... [-T] TARGET LINK_NAME
ln [OPTION]... TARGET
ln [OPTION]... TARGET... DIRECTORY
ln [OPTION]... -t DIRECTORY TARGET...
```

例えば、 `/home/user/test.txt` というファイルに対して `/home/user/test_link.txt` というハードリンクを作成するには、次のようなコマンドを実行する。

```sh
$ ln /home/user/test.txt /home/user/test_link.txt
```

また、 `/home/user/docs` というディレクトリに対して `/home/user/docs_link` というシンボリックリンクを作成するには、次のようなコマンドを実行する。

```sh
$ ln -s /home/user/docs /home/user/docs_link
```

`-s` オプションを使用することで、シンボリックリンクを作成することができる。


## ファイルの検索

`find` は、LinuxおよびUNIX系オペレーティングシステムで使用される、指定されたディレクトリツリー内でファイルやディレクトリを検索するためのコマンド。条件に合致するファイルを見つけ出して、指定されたアクションを実行することができる。

コマンドの書式は以下の通り。

```
find [OPTION]... [PATH] [EXPRESSION]...
```

`PATH` には検索を開始するディレクトリのパスを指定し、 `EXPRESSION` には検索条件を指定する。検索条件は、 `-name` や `-type` などのオプションを指定することができる。例えば次のコマンドを実行すると、現在のディレクトリ以下で名前が `test.txt` であるファイルを検索する。

```sh
$ find . -name "test.txt"
```

`find` コマンドの主要なオプションは以下の通り。

| オプション | 概要                                                                                                                                               |
| ---------- | :------------------------------------------------------------------------------------------------------------------------------------------------- |
| `-name`    | ファイル名が指定したパターンに一致するファイルを検索する                                                                                           |
| `-type`    | 指定したファイルタイプに一致するファイルを検索する（ `-type f` は通常ファイル、 `-type d` はディレクトリ、 `-type l` はシンボリックリンク）        |
| `-mtime`   | ファイルの最終更新日時が指定した日数前（正）または後（負）であるファイルを検索する                                                                 |
| `-size`    | ファイルサイズが指定したサイズに一致したファイルを検索する（単位として `c` （バイト）、 `k` （キロバイト）、 `M` （メガバイト）などを指定できる） |
| `-exec`    | 検索されたファイルに対して指定されたコマンドを実行する                                                                                             |

### データベースを利用したファイルの検索

`locate` は、ファイルシステム内で指定した文字列にマッチするファイルを高速に検索するためのコマンド。 `find` コマンドよりも効率的で、パターンマッチングにも対応している。

コマンドの書式は以下の通り。

```
locate [OPTION]... PATTERN
```

例えば以下のコマンドを実行すると、 `/etc` ディレクトリ以下の `ssh` という名前を含むファイルを検索する。

```sh
$ locate /etc/*ssh*
```

`locate` は、ディスクをスキャンすることなく、専用のデータベースを利用するため、高速に動作する。ただし、ファイルパスのデータベースが更新されていない可能性があるため、存在しないファイルが表示されたり、存在するファイルが表示されない可能性がある。最新の情報を手動で更新するには、 `updatedb` コマンドを実行する。主要なオプションは以下の通り。

| オプション | 概要                           |
| ---------- | :----------------------------- |
| `-i`       | 大文字と小文字を区別しない     |
| `-l [NUM]` | 最大の検索結果数を指定する     |
| `-c`       | 該当するファイルの数を表示する |

パターンに複数のパターンを指定するとOR検索になり、 `-A | --alll` オプションを指定するとAND検索になる。


## コマンドの検索

`which` は、LinuxおよびUNIX系オペレーティングシステムで使用される、コマンドがどの場所にインストールされているかを特定するためのコマンド。

コマンドの書式は以下の通り。

```
which [OPTION] [--] PROGRAMNAME...
```

例えば以下のコマンドを実行すると、 `python` コマンドがインストールされているパスを表示する。

```sh
$ which python
```

デフォルトでは、 `PATH` 環境変数に定義された場所でコマンドを検索する。
