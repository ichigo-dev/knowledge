# 『その他の機能』ノート

（最終更新： 2023-03-03）


## 目次

1. [ワークツリーの退避](#ワークツリーの退避)
	1. [スタッシュの一覧表示](#スタッシュの一覧表示)
	1. [スタッシュの復元](#スタッシュの復元)
	1. [スタッシュの確認](#スタッシュの確認)
	1. [スタッシュの削除](#スタッシュの削除)
1. [タグ](#タグ)
	1. [タグの一覧表示](#タグの一覧表示)
	1. [タグの作成](#タグの作成)
	1. [タグの削除](#タグの削除)
	1. [タグの共有](#タグの共有)


## ワークツリーの退避

`git stash` は、ワークツリーに加えた変更を一時的に退避するためのコマンド。ワークツリーの変更内容を**スタッシュ**領域に退避しておき、緊急の作業等を行った後にスタッシュの内容を復元する、といった使い方ができる。また、引数にコメントをつけることで、複数のスタッシュが管理しやすくなる。

```sh
# ワークツリーをスタッシュに退避
$ git stash

# ワークツリーをコメント付きでスタッシュに退避
$ git stash "<comment>"
```

### スタッシュの一覧表示

`git stash list` は、スタッシュに退避した変更内容を一覧表示するコマンド。

```sh
$ git stash list
```

### スタッシュの復元

`git stash apply` や `git stash pop` は、スタッシュに退避した変更内容をワークツリーに反映するコマンド。 `git stash apply` はスタッシュの内容を維持したままワークツリーに反映し、 `git stash pop` はスタッシュの内容をワークツリーに反映した後に破棄される。また、 `git stash list` で確認できるスタッシュの識別子を指定してスタッシュを復元することもできる。


```sh
# 直前のスタッシュを復元
$ git stash apply
$ git stash pop

# 指定のスタッシュを復元
$ git stash apply <stash>
$ git stash pop <stash>
```

### スタッシュの確認

`git stash show` は、スタッシュの変更ファイルを確認するコマンド。引数を指定しなければ直前のスタッシュの変更ファイルを表示し、引数にスタッシュの識別子を指定すると任意のスタッシュの変更ファイルを表示できる。また、 `git stash show` コマンドに `-p` オプションを指定することで、スタッシュの変更内容を確認できる。

```sh
# 直前のスタッシュの変更ファイルを確認
$ git stash show

# 指定のスタッシュの変更ファイルを確認
$ git stash show <stash>

# 直前のスタッシュの変更を確認
$ git stash show -p

# 指定のスタッシュの変更を確認
$ git stash show <stash> -p
```

### スタッシュの削除

`git stash drop` は、スタッシュを削除するコマンド。引数としてスタッシュの識別子を指定することで、任意のスタッシュを削除できる。また、 `git stash clear` を用いることで全てのスタッシュを一括で削除できる。


```sh
# 指定のスタッシュを削除
$ git stash drop <stash>

# スタッシュを一括削除
$ git stash clear
```


## タグ

**タグ**は、特定のコミットをマークすることで参照しやすくするための機能。**軽量タグ**では、ある特定のコミットに対して名前を付けることができる。**注釈付きタグ**では、タグ名に加えて作成者や作成日、コメントといった情報を付与することができる。タグはコミットハッシュのエイリアスとしても利用できる。

### タグの一覧表示

`git tag` は、登録されているタグの一覧を表示するコマンド。

```sh
$ git tag
```

### タグの作成

`git tag` コマンドの引数として任意のタグ名を与えることで、 `HEAD` に対して軽量タグを作成できる。さらに、 `-a` オプションを指定することで注釈付きタグを作成したり、タグ名の後にコミットハッシュを指定することで任意のコミットにタグをつけることもできる。

```sh
# 軽量タグの作成
$ git tag <tagname>

# 注釈付きタグの作成
$ git tag -a <tagname>

# コメントをインラインで指定して注釈付きタグを作成
$ git tag -a <tagname> -m <comment>

# 過去のコミットに対してタグを作成
$ git tag <tagname> <commit-hash>
$ git tag -a <tagname> <commit-hash>
$ git tag -a <tagname> <commit-hash> -m <comment>
```

### タグの削除

`git tag` コマンドに `-d` オプションを指定することで、任意のタグを削除できる。

```sh
$ git tag -d <tagname>
```

### タグの共有

`git push` コマンドに引数としてリモート名とタグ名を指定することで、リモートリポジトリに対してタグを共有することができる。
