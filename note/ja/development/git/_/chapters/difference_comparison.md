# 『差分比較』

（最終更新： 2023-02-02）


## 目次

1. [差分の比較](#差分の比較)
	1. [差分の強調表示](#差分の強調表示)
	1. [変更ファイル名のみ表示](#変更ファイル名のみ表示)
1. [コミット間の差分](#コミット間の差分)
1. [ファイル間の差分](#ファイル間の差分)
1. [ブランチ間の差分](#ブランチ間の差分)
1. [特定のコミットの確認](#特定のコミットの確認)


## 差分の比較

`git diff` は、2つの入力データセットを比較して、その差分を出力するコマンド。引数を指定しなかった場合は、 `HEAD` とワークツリーの差分を出力する。

```sh
$ git diff
```

### 差分の協調表示

`git diff` コマンドに `--color-words` オプションを指定することで、差分を強調表示することができる。

```sh
$ git diff --color-words
```

### 変更ファイル名のみ表示

`git diff` コマンドに `--name-only` オプションを指定することで、差分のあるファイル名のみを表示することができる。

```sh
$ git diff --name-only
```


## コミット間の差分

`git diff` コマンドに引数を指定しなかった場合、ステージとワークツリーの差分が出力される。また、 `git diff` コマンドに `--staged` （または `--cached` ）オプションを指定することで、 `HEAD` とステージの差分を出力できる。

```sh
# ステージとワークツリーの差分
$ git diff

# HEADとステージの差分
$ git diff --staged
$ git diff --cached
```

コミットハッシュを指定することで、ワークツリーと指定のコミットや、2つのコミット間の差分を出力できる。

```sh
# ワークツリーと指定コミットの差分
$ git diff <commit-hash>

# 2つのコミット間の差分
$ git diff <commit-hash-1> <commit-hash-2>
$ git diff <commit-hash-1>..<commit-hash-2>
```


## ファイル間の差分

`git diff` コマンドの最後に引数としてファイルパスを指定することで、特定のファイルの差分のみを確できる。

```sh
$ git diff <path>
```

また、 `git diff` コマンドに `--no-index` オプションを指定し、2つのファイルパスを与えることで、ファイル間の差分も出力できる。

```sh
$ git diff --no-index <path-1> <path-2>
```

コミットの特定ファイルを指定したい場合は、 `<commit-hash>:<path>` のように記述すれば良い。


## ブランチ間の差分

`git diff` コマンドの引数としてブランチ名を指定した場合、現在のブランチと指定のブランチの差分を出力できる。また、2つのブランチ名を指定することで、指定したブランチ間の差分を出力できる。

```sh
# 現在のブランチと指定ブランチの差分
$ git diff <branch>

# 2つの指定ブランチの差分
$ git diff <branch-1> <branch-2>
```


## 特定のコミットの確認

`git show` は、コミットハッシュを指定することで、指定したコミットと直前のコミットを `git diff` した結果を出力できる。

```sh
# HEADとHEAD~1のdiffを出力
$ git show
$ git show HEAD

# 特定のコミットとその1つ前のコミットのdiffを出力
$ git show <commit-hash>
```

また、ファイルパスを指定することで、指定のコミット時点でのファイルの内容を確認できる。

```sh
$ git show <commit-hash>:<path>
```
