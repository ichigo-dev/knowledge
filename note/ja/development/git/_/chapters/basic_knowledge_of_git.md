# 『Gitの基礎知識』ノート

（最終更新： 2023-03-03）


## 目次

1. [バージョン管理システム](#バージョン管理システム)
	1. [集中管理方式](#集中管理方式)
	1. [分散管理方式](#分散管理方式)
1. [Git](#git)
	1. [作業の流れ](#作業の流れ)
1. [Gitのインストール](#gitのインストール)
	1. [初期設定](#初期設定)
	1. [GUIソフトウェア](#guiソフトウェア)
1. [Gitホスティングサービス](#gitホスティングサービス)


## バージョン管理システム

**バージョン管理システム**(**VCS**: Version Control System)は、ファイルの変更履歴を管理するためのシステム。プログラムのソースコードやドキュメントなどの電子ファイルは、通常は段階を経て編集されていく。バージョン管理システムを用いることで、ファイルの編集の過程を履歴として記録し、ファイルの過去の状態を確認したり、その時の状態に戻したりすることができるようになる。また複数人で同じファイルを編集したいような場合に、ファイルの同じ行を変更してしまうことによる競合などの問題が発生する可能性があるが、バージョン管理システムはこのような状況を解決する仕組みも持っているものも多い。バージョン管理システムはプログラムの開発にとどまらず、電子データを扱う全てのケースで活用できるツールである。

### 集中管理方式

**集中管理方式**（**集中型**）のバージョン管理システムでは、バージョン管理のための専用サーバにリポジトリを用意しておき、そのサーバ上で履歴を一元管理する。ユーザはサーバから自身のコンピュータにファイルのコピーをダウンロードし、変更を加えたらその変更をサーバ上のリポジトリに記録する。

ユーザはネットワークに繋がっていない状態だと、変更を記録することができない。また、サーバが単一障害点となっており、サーバ上のリポジトリが破損するとデータが復旧できない可能性がある。

集中管理方式のバージョン管理システムとしては、**CVS**や**SVN**が代表的。

### 分散管理方式

**分散管理方式**（**分散型**）のバージョン管理システムでは、全ユーザの変更を集約する中央サーバにリポジトリを設置し、個々の作業用コンピュータには疎のリポジトリの複製（ローカルリポジトリ）を作成する。変更履歴の管理は各々のローカルリポジトリ上で行われ、リモートリポジトリと同期することで変更内容を共有する。

ユーザはネットワークに接続されていなくてもローカルリポジトリ上でほとんどの操作を行うことができる。また、各コンピュータ上にリポジトリの複製が存在するため、中央サーバのリポジトリが破損した場合の復旧が容易である。

分散管理方式のバージョン管理システムとしては、**Git**や**Mercurial**が代表的。


## Git

**Git**は、開発におけるデファクトスタンダードとなっている分散型バージョン管理システム。もともとはLinuxの開発のためにLinus Torvaldsによって実装され、巨大なソースコードであっても変更点の抽出やリポジトリ操作が高速にできるように工夫されている。

### 作業の流れ

Gitを用いたバージョン管理の一般的な流れは次の通り。

1. 中央サーバに全体の履歴を集約するリポジトリを作成する
1. リモートリポジトリの複製をローカルリポジトリとして各ユーザの作業コンピュータに作成する
1. ローカル環境にてファイルの修正や追加、削除などを行い、ローカルリポジトリに変更履歴を記録する
1. ローカルリポジトリの変更履歴をリモートリポジトリに反映する
1. 他のユーザがリモートリポジトリに加えた変更内容をローカルリポジトリに反映し、最新の状態にする
1. 3～5を繰り返し、バージョン管理を行う


## Gitのインストール

Gitが既に自身の環境にインストールされているかを確認するには、ターミナルソフトウェア（Macのターミナル、Windowsのコマンドプロンプト等）を起動し、次のコマンドを実行する。

```sh
$ git --version
git version 2.39.1
```

上の例のように、Gitのバージョン情報が表示されれば、Gitは既に使用できる状態となっている。コマンドが存在しない旨のエラーが表示される場合は、Gitをインストールする必要がある。

- [Gitのインストール](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git)

上記サイトより、自身の環境のOSに応じたインストール手順を実施し、改めて `git --version` を実行してバージョン情報が出力されることを確認する。

### 初期設定

Gitを使い始めるには、最初にコミット時に履歴に登録されるユーザ名とメールアドレスを設定する必要がある。Gitの設定変更には、 `git config` コマンドを用いる。

```sh
# ユーザ名を設定
$ git config --global user.name <name>

# メールアドレスを設定
$ git config --global user.email <email>
```

また、コミット時などに使用するエディタを変更したい場合は、次のように設定する。

```sh
$ git config --global core.editor <editor>
```

初期ブランチ名を変更したい場合の設定は次のように行う。

```sh
$ git config --global init.defaultBranch <name>
```

設定した内容を確認するには、 `git config` コマンドに `--list` オプションをつける。

```sh
$ git config --list
```

### GUIソフトウェア

Gitコマンドは、ターミナルソフトウェア上でCLIとして利用できる。コマンドによる操作が苦手な場合は、Git用のGUIソフトウェアをインストールすることで直感的な操作が可能となる。

代表的なGitのGUIクライアントソフトウェアは以下の通り。

- [SourceTree](https://www.sourcetreeapp.com/)
- [Git Fork](https://git-fork.com/)
- [GitKraken](https://www.gitkraken.com/)


## Gitホスティングサービス

**Gitホスティングサービス**は、クラウド上でGitの環境が整えられたサーバをサービスとして提供したもの。Gitホスティングサービスを利用することで、自身でサーバを用意することなく手軽にソースコードを共有するためのリモートリポジトリを用意することができる。

代表的なGitホスティングサービスとしては**GitHub**や**GitLab**、**BitBucket**などがある。

- [GitHub](https://github.co.jp/)
- [GitLab](https://about.gitlab.com/)
- [BitBucket](https://bitbucket.org/)
