# 『イメージ』ノート

（最終更新： 2023-03-04）


## 目次

1. [イメージ](#イメージ)
1. [イメージの入手](#イメージの入手)
1. [イメージの一覧](#イメージの一覧)
1. [イメージの削除](#イメージの削除)
1. [イメージのセーブ](#イメージのセーブ)
1. [イメージのロード](#イメージのロード)


## イメージ

**イメージ**は、コンテナの生成時のテンプレートとなるもので、コンテナ内で使用する実行ファイルやライブラリ、コンテナ起動時に実行させたいコマンドなどが含まれる。Dockerイメージにより、アプリケーションの実行環境を容易に入手したり、開発環境と本番環境のランタイムシステムの違いを吸収したりすることができる。また、1つのDockerイメージから複数のコンテナを素早く起動することができるため、アプリケーションのスケールを容易に行うことができるというメリットもある。


## イメージの入手

`docker pull` は、Docker HubからDockerイメージを入手するコマンド。インターネット環境に繋がった状態で実行すると、イメージのダウンロードが始まる。

```sh
# Docker Hubからイメージを入手
$ docker pull <image>

# イメージ入手の例
$ docker pull ubuntu:22.10
$ docker pull python:latest
```


## イメージの一覧

`docker images` は、入手したイメージ一覧を確認するコマンド。

```sh
# イメージの一覧を確認
$ docker images
REPOSITORY   TAG       IMAGE ID       CREATED          SIZE
ubuntu       22.10     10c2f4041af1   4 weeks ago      70.2MB
python       latest    33ce09363487   33 hours ago     925MB
```


## イメージの削除

`docker rmi` は、イメージを削除するコマンド。イメージを削除するためには、そのイメージを元にしたコンテナを全て停止するか削除する必要がある。ただし、そのイメージを元にした停止中のコンテナがある場合には、 `-f` オプションを付与する必要がある。

```sh
# イメージの削除
$ docker rmi <image>

# イメージの削除の例
$ docker rmi python:latest
```


## イメージのセーブ

`docker save` は、イメージを `tar` 形式のアーカイブに変換するコマンド。

```sh
# イメージのセーブ
$ docker save <image> -o <filename>

# イメージのセーブの例
$ docker save ubuntu:22.10 -o ubuntu-22.10.tar
```


## イメージのロード

`docker load` は、セーブしたイメージのアーカイブからイメージを取り込むコマンド。

```sh
# イメージのロード
$ docker load -i <filename>

# イメージのロードの例
$ docker load -i ubuntu-22.10.tar
```
